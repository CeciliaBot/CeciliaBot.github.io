<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
<meta name="viewport" content="initial-scale=0.6, user-scalable=no">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-combinatorics@0.5"></script>
<!--<script src="vue.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
:root {
    --primary-color: #302AE6;
    --secondary-color: #536390;
    --font-color: #424242;
    --bg-color: #fff;
    --search-primary-color:#f1f1f1;
    --search-border-color: #666666;
    --colore-check-eroi:green;
}

  /* variabili del tema*/
[data-theme="dark"] {
    --primary-color: #9A97F3;
    --secondary-color: #818cab;
    --font-color: #A1AEBD;
    --bg-color: #252B35;
    --search-primary-color:#1e2126;
    --search-border-color: #131417;
    --colore-check-eroi:red;
}
  
  
body {
  font-family: Arial, Helvetica, sans-serif;
  background-color: var(--bg-color);
  color: var(--font-color); /* font color */
}



/* Full-width input fields */
  
input[type=text], input[type=password] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

/* Set a style for all buttons */
.button_login {
  background-color: #4CAF50;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  cursor: pointer;
  width: 100%;
}

.button_login:hover {
  opacity: 0.8;
}

/* Extra styles for the cancel button */
.button_login_cancelbtn {
  width: auto;
  padding: 10px 18px;
  border: none;
  color: white;
  cursor: pointer;
  background-color: #f44336;
}

/* Center the image and position the close button */
.imgcontainer {
  text-align: center;
  margin: 24px 0 12px 0;
  position: relative;
}

img.avatar {
  width: 200px;
  border-radius: 50%;
}

.container {
  padding: 16px;
}

span.psw {
  float: right;
  padding-top: 16px;
}

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  padding-top: 60px;
}

/* Modal Content/Box */
.modal-content {
  background-color: #fefefe;
  margin: 5% auto 15% auto; /* 5% from the top, 15% from the bottom and centered */
  border: 1px solid #888;
  width: 80%; /* Could be more or less, depending on screen size */
}

/* The Close Button (x) */
.close {
  position: absolute;
  right: 25px;
  top: 0;
  color: #000;
  font-size: 35px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: red;
  cursor: pointer;
}

/* Add Zoom Animation */
.animate {
  -webkit-animation: animatezoom 0.6s;
  animation: animatezoom 0.6s
}

@-webkit-keyframes animatezoom {
  from {-webkit-transform: scale(0)} 
  to {-webkit-transform: scale(1)}
}
  
@keyframes animatezoom {
  from {transform: scale(0)} 
  to {transform: scale(1)}
}

/* Change styles for span and cancel button on extra small screens */
@media screen and (max-width: 300px) {
  span.psw {
     display: block;
     float: none;
  }
  .cancelbtn {
     width: 100%;
  }
}
  
div.toolbar {
  position: fixed;
  bottom: 0;
  right: 0;
  width: 100%;
  border: 3px solid #73AD21;
}
  
span.heroImgList {
    position: relative;
    margin-top: 12px;
    margin-bottom: 12px;
    margin-left: 12px;
    margin-right: 12px;
    font-weight: bold;
    font-size:24px;
    color: #221461;
    /*The change*/
    display:inline-block; /*or display:block;*/
}
.heroImgList:hover,
.heroImgList:focus {
  background-color:#ddd;
  cursor: pointer;
}
.heroInTeam {
  background-color:green;
}
  
/* The Close Button (x) */
.removeHero {
  position: relative;
  top: 0;
  color: #A1AEBD;
  font-size: 20px;
  font-weight: bold;
}
.removeHero:hover,
.removeHero:focus {
  color: red;
  cursor: pointer;
}
                  .center {
                    max-width: 800px;
                    margin: auto;
                  }
                  .topics {
                    text-align:center; 
                    font-family:sans-serif;
                    font-size:16px
                  }
  
  
  
.search_hero_area {
  position:relative;
  display:inline-block;
  text-align: center;
  padding-right: 5%;
  padding-bottom: 18px;

}
.search_hero_filter {
  background-color: var(--search-primary-color); /*  */
  border: none;
  text-align: center;
  font-size:20px;
  color: var(--font-color);
  width: 50px;
  height: 50px;
  padding: 10px 8px;
  text-align: center;
  text-decoration: none;
  position: relative;
  top:0px;
  display: inline-block;
  font-size: 10px;
  border-style: ridge;
  border-width: thin;
  border-color: var(--search-border-color);
  vertical-align: top;
} 
.search_hero_filter div { /* per il testo dei tasti */
  text-align: center;
  vertical-align: center;
  font-size:18px;
  max-height:20px;
  height:100%;
}
.search_hero_filter input { /* Casella di testo */
  text-align: center;
  font-size:20px;
}
.search_hero_filter img { /* per le immagini dei tasti */
  text-align: center;
  height:70%;
}
.search_hero_filter.active { /* tasto premuto*/
  background-color: var(--search-border-color);
  color: white;
} 

.box_advanced_settings {
	background: var(--search-primary-color);
  color: var(--font-color);
	border-radius: 15px;
}

  
  
  
  
.icon-bar {
  position:fixed;
  bottom: 0;
  right: 0;
  width: 100%;
  background-color: #555;
}

.icon-bar span {
  float: left;
  width: 20%;
  text-align: center;
  padding: 12px 0;
  transition: all 0.3s ease;
  color: white;
  font-size: 36px;
}

.icon-bar span:hover {
  background-color: #000;
}

.active-icon-bar {
  background-color: #4CAF50;
}
  
  
  
  
                  /* dark mode old */
                  /*body { 
                    background-color: #252B35;
                    color: #A1AEBD;
                  }
                  .light-mode {
                    background-color: white;
                    color: black;
                  }
                  */
  
                  .topics {
                    text-align:center; 
                    font-family:sans-serif;
                    font-size:16px
                  }




                  .switch {
                    position: relative;
                    display: inline-block;
                    width: 60px;
                    height: 35px;
                  }

                  /* Hide default HTML checkbox */
                  .switch input {
                    opacity: 0;
                    width: 0;
                    height: 0;
                  }

                  /* The slider */
                  .slider {
                    position: absolute;
                    cursor: pointer;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background-color: #ccc;
                    -webkit-transition: .4s;
                    transition: .4s;
                  }

                  .slider:before {
                    position: absolute;
                    content: "";
                    height: 26px;
                    width: 26px;
                    left: 4px;
                    bottom: 4px;
                    background-color: white;
                    -webkit-transition: .4s;
                    transition: .4s;
                  }

                  input:checked + .slider {
                    background-color: #2196F3;
                  }

                  input:focus + .slider {
                    box-shadow: 0 0 1px #2196F3;
                  }

                  input:checked + .slider:before {
                    -webkit-transform: translateX(26px);
                    -ms-transform: translateX(26px);
                    transform: translateX(26px);
                  }

                  /* Rounded sliders */
                  .slider.round {
                    border-radius: 34px;
                  }

                  .slider.round:before {
                    border-radius: 50%;
                  }

  
/* Lock icon */
.top-right {
  position: absolute;
  top: 2px;
  right: 7px;
}
.top-left {
  position: absolute;
  top: -15px;
  left: -10px;
  color: var(--colore-check-eroi);
}
.center_img {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

 
  
  
.label {
  padding: 12px;
  display: inline-block;
  position: relative;
  margin: 10px;
  cursor: pointer;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.label::before {
  background-color: white;
  color: white;
  content: " ";
  display: block;
  border-radius: 50%;
  position: absolute;
  top: -5px;
  left: -5px;
  width: 25px;
  height: 25px;
  text-align: center;
  line-height: 28px;
  transition-duration: 0.4s;
  transform: scale(0);
}

.label img {
  height: 100px;
  width: 100px;
  transition-duration: 0.2s;
  transform-origin: 50% 50%;
}

:checked+.label {
  border-color: #ddd;
}

:checked+.label::before {
  content: "✓";
  /*background-color: grey;*/
  background-color: green;
  transform: scale(1);
}


/* display as list */
.displaylistTable {
  width:100%;
  max-width: 700px;
  border-spacing:10px;
}
.displaylistTable tr {
  padding: 20px;
}
.displayListTable td {
  display:inline;
}
.displaylistTable tr div {
  height: 110px;
  width: 100%;
  vertical-align: middle;
  font-size: 20px;
}
.displaylistTable tr img {
   position:relative;
   width:70px;
   vertical-align: middle;
   left:10px;
   top:13px;
}
.displaylistTable tr span {
  position:relative;
  padding-left: 10px;
  top:17px;
}
.displaylistTable tr:nth-child(odd) div {
  background-color: var(--search-primary-color);
  color: var(--font-color);
  border-radius: 15px;
}

.displaylistTable tr div:hover {
  background-color: var(--search-border-color);
  color: white;
  border-radius: 15px;
}

.displaylistTableIcons {
  font-size:38px;
  /*color: var(--colore-check-eroi);*/
  float: right;
  padding:10px;
  position:relative;
  top:35px;
  right:20px;
}

.displaylistTableIcons:hover {
  color: white;
}

</style>
</head>
<body onload="app.getHeroDB();app.filtroTuttiGliEroi({tipo:'refresh',casella:'',value:'',className: 'search_hero_filter', name: 'bodyLoad'},'AllHeroes')">
  <div id="app"><!-- vue.js -->
    <div id="welcome" style="display: '';">
        <h2>Benvenuto su Epic 7 Camp Simulator<br><font color="red">Modalità offline</font></h2>
    </div>
    <div id="add_window" style="display:none;">
      <h2><span style="position:relative;top:10px;vertical-align: middle">Aggiungi </span>
	<input style="padding-top: 5px;padding-bottom: 5px;width:250px;height:40px;font-size:20px;vertical-align: top;" type="text" id="inputInTuttiGliEroi" class="search_hero_filter" onkeyup="app.filtroTuttiGliEroi({tipo:'input',casella:this,value:this.value,className: 'search_hero_filter', name: 'ricerca'})" placeholder="Cerca eroe..." title="Type in a name">
          <div id="pulsanti_display_add_window" style="display:inline">
          <button class="search_hero_filter active" name="display_list" onclick="app.setDisplayStyle(this, 'add_window')" value="grid">
            <div><i class="fa fa-th-large"></i></div>
          </button><!--
          --><button class="search_hero_filter" name="display_list" onclick="app.setDisplayStyle(this, 'add_window')" value="list">
            <div><i class="fa fa-th-list"></i></div>
          </button>
         </div>
	</h2>
       <!-- Pulsanti filtro eroi -->
      <div style="display:inline-block;width:100%;height:100%;">
        <div class="search_hero_area" id="filter_all_rarity">
          <button class="search_hero_filter active" name="filter_rarity" onclick=app.filtroTuttiGliEroi(this) value="*">
            <div>All</div>
          </button><!--
          --><button class="search_hero_filter" name="filter_rarity" onclick=app.filtroTuttiGliEroi(this) value="3">
            <div><i>3</i><img src="https://assets.epicsevendb.com/star/cm_icon_star.png" /></div>
          </button><!-- 
          --><button class="search_hero_filter" name="filter_rarity" onclick=app.filtroTuttiGliEroi(this) value="4">
            <div><i>4</i><img src="https://assets.epicsevendb.com/star/cm_icon_star.png" /></div>
          </button><!-- 
          --><button class="search_hero_filter" name="filter_rarity" onclick=app.filtroTuttiGliEroi(this) value="5">
            <div><i>5</i><img src="https://assets.epicsevendb.com/star/cm_icon_star.png" /></div>
          </button>
        </div>
        <div class="search_hero_area">
          <button class="search_hero_filter active" name="filter_element" onclick=app.filtroTuttiGliEroi(this) value="*">
            <div>All</div>
          </button><!--
          --><button class="search_hero_filter" name="filter_element" onclick=app.filtroTuttiGliEroi(this) value="fire">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_profire.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_element" onclick=app.filtroTuttiGliEroi(this) value="ice">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_proice.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_element" onclick=app.filtroTuttiGliEroi(this) value="wind">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_proearth.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_element" onclick=app.filtroTuttiGliEroi(this) value="light">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_prolight.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_element" onclick=app.filtroTuttiGliEroi(this) value="dark">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_promdark.png">
          </button>
        </div>
        <div class="search_hero_area">
          <button class="search_hero_filter active" name="filter_class" onclick=app.filtroTuttiGliEroi(this) value="*">
            <div>All</div>
          </button><!--
          --><button class="search_hero_filter" name="filter_class" onclick=app.filtroTuttiGliEroi(this) value="knight">
            <!-- <span>knight</span> -->
          <img src="https://assets.epicsevendb.com/class/cm_icon_role_knight.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick=app.filtroTuttiGliEroi(this) value="warrior">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_warrior.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick=app.filtroTuttiGliEroi(this) value="thief">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_thief.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick=app.filtroTuttiGliEroi(this) value="ranger">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_ranger.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick=app.filtroTuttiGliEroi(this) value="mage">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_knight.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick=app.filtroTuttiGliEroi(this) value="soul-weaver">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_soul-weaver.png">
          </button>
        </div>
        <div class="search_hero_area">
          <button class="search_hero_filter" name="filter_gia_aggiunti" onclick=app.filtroTuttiGliEroi(this) value="false">
            <div style="max-height:20px;"><i class="fa fa-eye"></i></div>
          </button><!--
          --><button class="search_hero_filter active" name="filter_gia_aggiunti" onclick=app.filtroTuttiGliEroi(this) value="true"> <!-- di default nascondi eroi già aggiunti -->
            <div style="max-height:20px;"><i class="fa fa-eye-slash"></i></div>
          </button>
        </div>
      </div>
      <!-- fine pulsanti filtro eroi -->

      <!-- display tutti gli eroi -->
       <template v-if="displayStyle === 'grid'"> <!-- grid -->
        <table id="lista_hero_disponibili">
          <tr>
            <td>
              <span v-for="key in displayList" class="heroImgList">
                <!--<div class="fa fa-check-circle top-left" v-bind:style="'font-size:38px;color:green;display:' + isInTeam(thisHeroData(key).name)"></div>-->
                <img v-bind:src="'https://cdn.glitch.com/97cf5510-4561-4fba-a2bd-849e3aed02ba%2F' + thisHeroData(key).id + '_s.png'" style="width:70px" v-on:click="addHero(key)" v-bind:alt="thisHeroData(key).name" v-bind:titolo="thisHeroData(key).name"/>
                <div class="top-left" v-bind:style="'font-size:38px;display:' + isInTeam(key)">✔</div>
              </span>
            </td>
          </tr>
         </table>
	      </template>
        <template v-else-if="displayStyle === 'list'">  <!-- Lista -->
         <table class="displaylistTable" style="margin-left:auto;margin-right:auto;">
          <tr v-for="key in displayList">
            <td>
              <div>
                <img v-bind:src="'https://cdn.glitch.com/97cf5510-4561-4fba-a2bd-849e3aed02ba%2F' + thisHeroData(key).id + '_s.png'" style="width:70px;vertical-align: middle;top:15px;" v-on:click="addHero(thisHeroData(key).name)" v-bind:alt="thisHeroData(key).name" v-bind:titolo="thisHeroData(key).name"/>
		            <span>{{ thisHeroData(key).name }}</span>
		            <template v-if="isInTeam(thisHeroData(key).name) === 'none'">  <!-- già aggiunto -->
                  <span v-on:click="addHero(thisHeroData(key).name)" class="fa fa-plus displaylistTableIcons">   </span>
                </template>
		            <template v-else> <!-- aggiungi -->
                  <span class="fa fa-check-circle displaylistTableIcons"></span>
                </template>
              </div>
            </td>
          </tr>
         </table>
        </template>


	<br><br><br><br> <!-- -->
    </div>
    <div id="manage_window" style="display:none;">
      <h2><span style="position:relative;top:10px;vertical-align: middle">I tuoi eroi </span>
          <input style="padding-top: 5px;padding-bottom: 5px;width:250px;height:40px;font-size:20px;vertical-align: top;" type="text" id="inputInMyHeroes" class="search_hero_filter" onkeyup="app.filtroTuttiGliEroi({tipo:'input',casella:this,value:this.value,className: 'search_hero_filter', name: 'ricerca'}, 'MyHeroes')" placeholder="Cerca eroe..." title="Type in a name">
          <div id = "pulsanti_display_manage_window" style="display:inline">
          <button class="search_hero_filter active" name="display_list" onclick="app.setDisplayStyle(this, 'manage_window')" value="grid">
            <div><i class="fa fa-th-large"></i></div>
          </button><!--
          --><button class="search_hero_filter" name="display_list" onclick="app.setDisplayStyle(this, 'manage_window')" value="list">
            <div><i class="fa fa-th-list"></i></div>
          </button>
          </div>
	</h2>
       <!-- Pulsanti filtro eroi -->
      <div style="display:inline-block;width:100%;height:100%;">
        <div class="search_hero_area" style="" id="filter_all_rarity">
          <button class="search_hero_filter active" name="filter_rarity" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="*">
            <div>All</div>
          </button><!--
          --><button class="search_hero_filter" name="filter_rarity" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="3">
            <div><i>3</i><img src="https://assets.epicsevendb.com/star/cm_icon_star.png" /></div>
          </button><!-- 
          --><button class="search_hero_filter" name="filter_rarity" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="4">
            <div><i>4</i><img src="https://assets.epicsevendb.com/star/cm_icon_star.png" /></div>
          </button><!-- 
          --><button class="search_hero_filter" name="filter_rarity" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="5">
            <div><i>5</i><img src="https://assets.epicsevendb.com/star/cm_icon_star.png" /></div>
          </button>
        </div>
        <div class="search_hero_area">
          <button class="search_hero_filter active" name="filter_element" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="*">
            <div>All</div>
          </button><!--
          --><button class="search_hero_filter" name="filter_element" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="fire">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_profire.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_element" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="ice">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_proice.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_element" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="wind">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_proearth.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_element" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="light">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_prolight.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_element" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="dark">
            <img src="https://assets.epicsevendb.com/attribute/cm_icon_promdark.png">
          </button>
        </div>
        <div class="search_hero_area">
          <button class="search_hero_filter active" name="filter_class" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="*">
            <div>All</div>
          </button><!--
          --><button class="search_hero_filter" name="filter_class" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="knight">
            <!-- <span>knight</span> -->
          <img src="https://assets.epicsevendb.com/class/cm_icon_role_knight.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="warrior">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_warrior.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="thief">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_thief.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="ranger">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_ranger.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="mage">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_mage.png">
          </button><!-- 
          --><button class="search_hero_filter" name="filter_class" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="soul-weaver">
            <img src="https://assets.epicsevendb.com/class/cm_icon_role_soul-weaver.png">
          </button>
        </div>
        <div class="search_hero_area">
          <button class="search_hero_filter active" name="filter_locked_only" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="false">
            <div style="max-height:20px;">All</div>
          </button><!--
          --><button class="search_hero_filter" name="filter_locked_only" onclick="app.filtroTuttiGliEroi(this, 'MyHeroes')" value="true"> <!-- di default nascondi eroi già aggiunti -->
            <div style="max-height:20px;"><i class="fa fa-lock"></i></div>
          </button>
        </div>
      </div>
      <!-- fine pulsanti filtro eroi -->


       <template v-if="displayStyle === 'grid'">  <!-- grid -->
        <table id="myHeroes">
          <tr>
            <td>
              <span v-for="key in displayMyHeroes" class="heroImgList">
                <img v-bind:src="'https://cdn.glitch.com/97cf5510-4561-4fba-a2bd-849e3aed02ba%2F' + thisHeroData(key).id + '_s.png'" style="width:70px" v-on:click="app.lockHero(key)" v-bind:alt="key" v-bind:titolo="key"/><span v-on:click="app.removeHero(key)" class="removeHero" v-bind:title="'Remove ' + key">×</span>
		            <div class="top-right" v-bind:style="'display:' + isLocked(key)"  v-on:click="app.lockHero(key.name)">&#128274;</div>
              </span>
            </td>
          </tr>
      </table>
      </template>
        <template v-else-if="displayStyle === 'list'">  <!-- Lista -->
         <table class="displaylistTable" style="margin-left:auto;margin-right:auto;">
          <tr v-for="key in displayMyHeroes">
            <td>
              <div>
                <img v-bind:src="'https://cdn.glitch.com/97cf5510-4561-4fba-a2bd-849e3aed02ba%2F' + thisHeroData(key).id + '_s.png'" style="width:70px;vertical-align: middle;top:15px;" v-on:click="addHero(thisHeroData(key).name)" v-bind:alt="thisHeroData(key).name" v-bind:titolo="thisHeroData(key).name"/>
		             <span>{{ thisHeroData(key).name }}</span>
                 <span v-on:click="app.removeHero(thisHeroData(key).name)" class="fa fa-trash displaylistTableIcons" aria-hidden="true"></span>
		             <template v-if="isLocked(thisHeroData(key).name) === 'none'">  <!-- non lockato -->
                   <span class="fa fa-unlock-alt displaylistTableIcons" v-on:click="app.lockHero(key)"></span>
                 </template>
		             <template v-else> <!-- simbolo lock -->
                   <span class="fa fa-lock displaylistTableIcons" style="color:blue;" v-on:click="app.lockHero(key)"></span>
                 </template>
              </div>
            </td>
          </tr>
         </table>
        </template>



      <br><br><br><br> <!-- -->
    </div>
  <div id="advanced_window" style="display:none;"> <!-- Watcher aggiorna automaticamente i dati -->
	  <h2>Impostazioni avanzate</h2>
		<input type="checkbox" id="AoE" name="AoE" value="AoE" onclick="app.aggiornaImposatazioniAvanzate()">
		<label for="AoE"> Team deve contenere AoE</label><br>
		<input type="checkbox" id="noS1debuffs" name="noS1debuffs" value="noS1debuffs" onclick="app.aggiornaImposatazioniAvanzate()">
		<label for="noS1debuffs"> No S1 Debuffs (Esclusi: Provoke, Sleep e Stun)</label><br>
		<input type="checkbox" id="noDebuffs" name="noDebuffs" value="noDebuffs" onclick="app.aggiornaImposatazioniAvanzate()">
		<label for="noDebuffs"> No Debuffs</label><br><br>
    <div id="advanced_classe" class="box_advanced_settings" style="height:auto;width:100%;display:inline-block;padding-bottom: 25px;padding-top: 5px;">
      <center>Classe:</center>
        <input type="checkbox" id="checkbox_knight" name="classe" value="knight" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_knight" class="label"> <img src="https://assets.epicsevendb.com/class/cm_icon_role_knight.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Knight</p></label>

        <input type="checkbox" id="checkbox_thief" name="classe" value="thief" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_thief" class="label"> <img src="https://assets.epicsevendb.com/class/cm_icon_role_thief.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Thief</p></label>

        <input type="checkbox" id="checkbox_warrior" name="classe" value="warrior" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_warrior" class="label"> <img src="https://assets.epicsevendb.com/class/cm_icon_role_warrior.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Warrior</p></label>
      
        <input type="checkbox" id="checkbox_ranger" name="classe" value="ranger" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_ranger" class="label"> <img src="https://assets.epicsevendb.com/class/cm_icon_role_ranger.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Ranger</p></label>
      
        <input type="checkbox" id="checkbox_mage" name="classe" value="mage" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_mage" class="label"> <img src="https://assets.epicsevendb.com/class/cm_icon_role_mage.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Mage</p></label>
      
        <input type="checkbox" id="checkbox_soul-weaver" name="classe" value="soul-weaver" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_soul-weaver" class="label"> <img src="https://assets.epicsevendb.com/class/cm_icon_role_soul-weaver.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-35px;text-align:center;">Soul Weaver</p></label>
    </div>
    <br><br>
    <div id="advanced_elemento" class="box_advanced_settings" style="height:auto;width:100%;display:inline-block;padding-bottom: 25px;padding-top: 5px;">
      <center>Elemento:</center>
        <input type="checkbox" id="checkbox_fire" name="elemento" value="fire" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_fire" class="label"> <img src="https://assets.epicsevendb.com/attribute/cm_icon_profire.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Fire</p></label>

        <input type="checkbox" id="checkbox_ice" name="elemento" value="ice" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_ice" class="label"> <img src="https://assets.epicsevendb.com/attribute/cm_icon_proice.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Ice</p></label>

        <input type="checkbox" id="checkbox_earth" name="elemento" value="wind" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_earth" class="label"> <img src="https://assets.epicsevendb.com/attribute/cm_icon_proearth.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Earth</p></label>
      
        <input type="checkbox" id="checkbox_light" name="elemento" value="light" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_light" class="label"> <img src="https://assets.epicsevendb.com/attribute/cm_icon_prolight.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Light</p></label>
      
        <input type="checkbox" id="checkbox_dark" name="elemento" value="dark" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label for="checkbox_dark" class="label"> <img src="https://assets.epicsevendb.com/attribute/cm_icon_promdark.png" style="height:60px;width:60px;" /><p style="position:absolute;bottom:-20px;text-align:center;">Dark</p></label>
      
    </div>
    <br><br>
    <div id="advanced_buff" class="box_advanced_settings" style="height:auto;width:100%;display:inline-block;padding-bottom: 25px;padding-top: 5px;">
      <center>Buff:</center>
      <span v-for="(value,key) in buffList" style="display:inline-block;position:relative;top:0px;text-align:center;height:200px;padding-bottom:10px;">
        <input type="checkbox" v-bind:id="'checkbox_'+ key" name="buff" v-bind:value="key" style="position:relative;top:0px;display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label v-bind:for="'checkbox_'+ key" class="label" style="position:relative;top:0px;"> <img v-bind:src="'https://assets.epicsevendb.com/buff/' + value.icon + '.png'" style="postion:relative;top:0px;height:60px;width:60px;" /></label>
        <p>{{value}}</p>
      </span>
    </div>
    <br><br>
    <div id="advanced_debuff" class="box_advanced_settings" style="height:auto;width:100%;display:inline-block;padding-bottom: 25px;padding-top: 5px;">
      <center>Debuff:</center>
      <span v-for="(value,key) in debuffList" style="display:inline-block;text-align:center;padding-bottom:10px;">
        <input type="checkbox" v-bind:id="'checkbox_'+ key" name="debuff" v-bind:value="key" style="display:none" onclick="app.aggiornaImposatazioniAvanzate()">
        <label v-bind:for="'checkbox_'+ key" class="label" style="position:relative;top:0;"> <img v-bind:src="'https://assets.epicsevendb.com/buff/' + key + '.png'" style="position:relative;top:0;height:60px;width:60px;" /></label>
        <p style="position:relative;">{{value}}</p>
      </span>
    </div>
    <br><br><br><br><br> <!-- -->
  </div>
  <div id="calculate_window" class="center" style="display:none;">
        <h2>Risultati</h2>
        <table>
          <tbody>
            <th></th>
            <th colspan="4">Team</th>
            <th>Topics</th>
            <th>Morale</th>
          </tbody>
          <tbody>
            <tr v-for="(item, index) in risultati">
              <td width="4%" style="padding-top: 30px;padding-bottom: 30px;">{{index+1}}</td>
              <td><img v-bind:src="'https://cdn.glitch.com/97cf5510-4561-4fba-a2bd-849e3aed02ba%2F' + heroId(item.team[0]) + '_s.png'" style="width:55px;height:55px;" v-bind:alt="item.team[0]" v-bind:titolo="item.team[0]"/></td>
              <td><img v-bind:src="'https://cdn.glitch.com/97cf5510-4561-4fba-a2bd-849e3aed02ba%2F' + heroId(item.team[1]) + '_s.png'" style="width:55px;height:55px;" v-bind:alt="item.team[1]" v-bind:titolo="item.team[1]"/></td>
              <td><img v-bind:src="'https://cdn.glitch.com/97cf5510-4561-4fba-a2bd-849e3aed02ba%2F' + heroId(item.team[2]) + '_s.png'" style="width:55px;height:55px;" v-bind:alt="item.team[2]" v-bind:titolo="item.team[2]"/></td>
              <td><img v-bind:src="'https://cdn.glitch.com/97cf5510-4561-4fba-a2bd-849e3aed02ba%2F' + heroId(item.team[3]) + '_s.png'" style="width:55px;height:55px;" v-bind:alt="item.team[3]" v-bind:titolo="item.team[3]"/></td>
              <td class="topics"><b>{{item.migliorPG1}}</b>: <i>{{capitalize(item.opzioneMigliore1)}}</i><br><b>{{item.migliorPG2}}</b>: <i>{{capitalize(item.opzioneMigliore2)}}</i></td>
              <td style="text-align:center; font-family:sans-serif;font-size:17px" width="3%">{{item.morale}}</td>
            </tr>
          </tbody>
        </table>
	<br><br><br><br> <!-- -->
    </div>
    <div id="settings_window" style="display:none;">
      <h2>Impostazioni</h2><br>
      <span style="position:relative;top:8px;">Night mode: </span>
                                <label class="switch" style="position: relative">
                                  <input type="checkbox" id="darkModeCheck" name="darkModeCheck" onchange="toggleCheck()">
                                  <span class="slider round"></span>
                                </label>
    </div>
    <div id="toolbar" class="icon-bar"> <!-- nascondi toolbar durante il calcolo -->
      <span id="icon-bar_add_window" onclick="setWindow('add_window')"><!--&#43;--><i class="fa fa-plus" aria-hidden="true"></i></span>
      <span id="icon-bar_manage_window" onclick="setWindow('manage_window')"><!--&#9998;--><i class="fa fa-pencil" aria-hidden="true"></i></span>
      <span id="icon-bar_advanced_window" onclick="setWindow('advanced_window')"><!--&#9876;--><i class="fa fa-book" aria-hidden="true"></i></span>
      <span id="icon-bar_calculate_window" v-on:click="calcolaRisultati; setWindow('calculate_window');" style="height:100%;font-size:36px;max-height:65.5px;">
        <!--Calcola-->
        <img src="https://cdn.glitch.com/5c21c869-ea9a-48ba-b019-90cd493f45cd%2Fcamp-fire-icon%20small.png?v=1585067234171" style="position:relative;top:-5px;margin-bottom:-10px;height:40px;" />
      </span>
      <span id="icon-bar_settings_window" onclick="setWindow('settings_window')"><!--&#9881;--><i class="fa fa-cog"></i></span>
    </div>
     <!-- Mostra durante il calcolo -->
      <div  v-show="isLoadingResults" id="loading_camp_results">
        <div class="center_img box_advanced_settings" style="height:200px;width:200px">
          <div class="center_img" style="text-align:center;"> 
            <img src="https://cdn.glitch.com/5c21c869-ea9a-48ba-b019-90cd493f45cd%2Fangienobg.gif?v=1585008523656" style="height:100px"/>
            <!--<i class="fa fa-cog fa-spin" style="font-size:30px"></i><br> -->
            Combinazioni possibili: <br><b>{{numeroCombinazioniPossibili}}</b>
          </div>
        </div>
      </div>
    <div id="caricamentoIniziale" v-if="inizializzazione" class="center_img box_advanced_settings" style="height:100%;width:100%"> <!-- non è neccessario settare inizializzaione = true -->
      <div class="center_img" style="text-align:center;"> 
        <i class="fa fa-cog fa-spin" style="font-size:70px"></i>
        <div>
          Loading...
        </div>
      </div>
    </div>
  </div><!-- div id = app -->


  <script>

    function toggleCheck() {
        if (document.getElementById("darkModeCheck").checked === true) {
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark'); // salva preferenza per future visite
        }
        else {
            document.documentElement.setAttribute('data-theme', 'light');
            localStorage.setItem('theme', 'light'); // salva preferenza per future visite
        }    
    };
    const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;

    if (currentTheme) {
        document.documentElement.setAttribute('data-theme', currentTheme);

        if (currentTheme === 'dark') {
            var checkBoxes = $("input[name=darkModeCheck]");
            checkBoxes.attr('checked', true);
        }
    }
    
    
    
    function setWindow(current) {
      document.getElementById('welcome').style.display='none';
      document.getElementById('add_window').style.display='none';
      document.getElementById('manage_window').style.display='none';
      document.getElementById('advanced_window').style.display='none';
      document.getElementById('calculate_window').style.display='none';
      document.getElementById('settings_window').style.display='none';
      //toolbar
      document.getElementById("icon-bar_add_window").className = "";
      document.getElementById("icon-bar_manage_window").className = "";
      document.getElementById("icon-bar_advanced_window").className = "";
      document.getElementById("icon-bar_calculate_window").className = "";
      document.getElementById("icon-bar_settings_window").className = "";
                              
      switch (current) {
        case 'add_window':
          document.getElementById('add_window').style.display='block';
          document.getElementById("icon-bar_add_window").className = "active-icon-bar";
          break;
        case 'manage_window':
          document.getElementById('manage_window').style.display='block';
          document.getElementById("icon-bar_manage_window").className = "active-icon-bar";
          break;
        case 'advanced_window':
          document.getElementById('advanced_window').style.display='block';
          document.getElementById("icon-bar_advanced_window").className = "active-icon-bar";
          break;
        case 'calculate_window':
          document.getElementById('calculate_window').style.display='block';
          document.getElementById("icon-bar_calculate_window").className = "active-icon-bar";
          break;
        case 'settings_window':
          document.getElementById('settings_window').style.display='block';
          document.getElementById("icon-bar_settings_window").className = "active-icon-bar";
          break;
      };  
    };


    function logout() {
        $.ajax({
          type: 'POST',
          contentType: 'application/json',
          url: "logout",
          data: "",
          success: function(html) {
            window.location.href='/'
          },
          error: function(html) {
            // in caso di errore
          }
        });
        event.preventDefault();
    };


    var Debuff_buff = {"1":{"_id":"1","id":"1","icon":"stic_att_up","type":"buff","name":"stic_att_up_skeffnm","effect":"stic_att_up_de"},"2":{"_id":"2","id":"2","icon":"stic_def_up","type":"buff","name":"stic_def_up_skeffnm","effect":"stic_def_up_de"},"3":{"_id":"3","id":"3","icon":"stic_speed_up","type":"buff","name":"stic_speed_up_skeffnm","effect":"stic_speed_up_de"},"4":{"_id":"4","id":"4","icon":"stic_cri_up","type":"buff","name":"stic_cri_up_skeffnm","effect":"stic_cri_up_de"},"5":{"_id":"5","id":"5","icon":"stic_protect","type":"buff","name":"stic_protect_skeffnm","effect":"stic_protect_de"},"6":{"_id":"6","id":"6","icon":"stic_invincible","type":"buff","name":"stic_invincible_skeffnm","effect":"stic_invincible_de"},"7":{"_id":"7","id":"7","icon":"stic_counter","type":"buff","name":"stic_counter_skeffnm","effect":"stic_counter_de"},"8":{"_id":"8","id":"8","icon":"stic_bless","type":"buff","name":"stic_bless_skeffnm","effect":"stic_bless_de"},"9":{"_id":"9","id":"9","icon":"stic_cridmg_up","type":"buff","name":"stic_cridmg_up_skeffnm","effect":"stic_cridmg_up_de"},"10":{"_id":"10","id":"10","icon":"stic_dodge_up","type":"buff","name":"stic_dodge_up_skeffnm","effect":"stic_dodge_up_de"},"11":{"_id":"11","id":"11","icon":"stic_heal","type":"buff","name":"stic_heal_skeffnm","effect":"stic_heal_de"},"12":{"_id":"12","id":"12","icon":"stic_debuf_impossible","type":"buff","name":"stic_res_up_skeffnm","effect":"stic_res_up_de"},"13":{"_id":"13","id":"13","icon":"stic_reflect","type":"buff","name":"stic_reflect_skeffnm","effect":"stic_reflect_de"},"14":{"_id":"14","id":"14","icon":"stic_immortality","type":"buff","name":"stic_immortality_skeffnm","effect":"stic_immortality_de"},"15":{"_id":"15","id":"15","icon":"stic_hide","type":"buff","name":"stic_hide_skeffnm","effect":"stic_hide_de"},"16":{"_id":"16","id":"16","icon":"stic_bless","type":"buff","name":"stic_revival_skeffnm","effect":"stic_revival_de"},"17":{"_id":"17","id":"17","icon":"stic_att_dn","type":"debuff","name":"stic_att_dn_skeffnm","effect":"stic_att_dn_de"},"18":{"_id":"18","id":"18","icon":"stic_def_dn","type":"debuff","name":"stic_def_dn_skeffnm","effect":"stic_def_dn_de"},"19":{"_id":"19","id":"19","icon":"stic_speed_dn","type":"debuff","name":"stic_speed_dn_skeffnm","effect":"stic_speed_dn_de"},"20":{"_id":"20","id":"20","icon":"stic_stun","type":"debuff","name":"stic_stun_skeffnm","effect":"stic_stun_de"},"21":{"_id":"21","id":"21","icon":"stic_sleep","type":"debuff","name":"stic_sleep_skeffnm","effect":"stic_sleep_de"},"22":{"_id":"22","id":"22","icon":"stic_blind","type":"debuff","name":"stic_blind_skeffnm","effect":"stic_blind_de"},"23":{"_id":"23","id":"23","icon":"stic_vampire","type":"debuff","name":"stic_vampire_skeffnm","effect":"stic_vampire_de"},"24":{"_id":"24","id":"24","icon":"stic_dot","type":"debuff","name":"stic_dot_skeffnm","effect":"stic_dot_de"},"25":{"_id":"25","id":"25","icon":"stic_provoke","type":"debuff","name":"stic_provoke_skeffnm","effect":"stic_provoke_de"},"26":{"_id":"26","id":"26","icon":"stic_target","type":"debuff","name":"stic_sign_skeffnm","effect":"stic_sign_de"},"27":{"_id":"27","id":"27","icon":"stic_heal_impossible","type":"debuff","name":"stic_heal_impossible_skeffnm","effect":"stic_heal_impossible_de"},"28":{"_id":"28","id":"28","icon":"stic_silence","type":"debuff","name":"stic_silence_skeffnm","effect":"stic_silence_de"},"29":{"_id":"29","id":"29","icon":"stic_buf_impossible","type":"debuff","name":"stic_buf_impossible_skeffnm","effect":"stic_buf_impossible_de"},"30":{"_id":"30","id":"30","icon":"stic_nail","type":"debuff","name":"stic_nail_skeffnm","effect":"stic_nail_de"},"31":{"_id":"31","id":"31","icon":"stic_blaze","type":"debuff","name":"stic_blaze_skeffnm","effect":"stic_blaze_de"},"32":{"_id":"32","id":"32","icon":"stic_blood","type":"debuff","name":"stic_blood_skeffnm","effect":"stic_blood_de"},"33":{"_id":"33","id":"33","icon":null,"type":"common","name":"stic_coop_skeffnm","effect":"stic_coop_de"},"34":{"_id":"34","id":"34","icon":null,"type":"common","name":"stic_piercing_skeffnm","effect":"stic_piercing_de"},"35":{"_id":"35","id":"35","icon":null,"type":"common","name":"stic_addturn_skeffnm","effect":"stic_addturn_de"},"36":{"_id":"36","id":"36","icon":null,"type":"common","name":"stic_transfer_skeffnm","effect":"stic_transtransfer_de"},"37":{"_id":"37","id":"37","icon":null,"type":"common","name":"stic_guard_skeffnm","effect":"stic_guard_de"},"38":{"_id":"38","id":"38","icon":"stic_madness","type":"buff","name":"stic_madness_skeffnm","effect":"stic_madness_de"},"39":{"_id":"39","id":"39","icon":"stic_force_arka","type":"buff","name":"stic_force_arka_skeffnm","effect":"stic_force_arka_de"},"40":{"_id":"40","id":"40","icon":"stic_crires_up","type":"buff","name":"stic_crires_up_skeffnm","effect":"stic_crires_up_de"},"41":{"_id":"41","id":"41","icon":"stic_haki","type":"buff","name":"stic_haki_skeffnm","effect":"stic_haki_de"},"42":{"_id":"42","id":"42","icon":"stic_lovely","type":"buff","name":"stic_lovely_skeffnm","effect":"stic_lovely_de"},"43":{"_id":"43","id":"43","icon":"stic_showtime","type":"buff","name":"stic_showtime_skeffnm","effect":"stic_showtime_de"},"44":{"_id":"44","id":"44","icon":"stic_att_up2","type":"buff","name":"stic_att_up2_skeffnm","effect":"stic_att_up2_de"},"45":{"_id":"45","id":"45","icon":"stic_speed_up2","type":"buff","name":"stic_speed_up2_skeffnm","effect":"stic_speed_up2_de"},"46":{"_id":"46","id":"46","icon":"stic_endure","type":"buff","name":"stic_endure_skeffnm","effect":"stic_endure_de"},"47":{"_id":"47","id":"47","icon":"stic_rage_1","type":"buff","name":"stic_rage_1_skeffnm","effect":"stic_rage_1_de"},"48":{"_id":"48","id":"48","icon":"stic_rage_2","type":"buff","name":"stic_rage_2_skeffnm","effect":"stic_rage_2_de"},"49":{"_id":"49","id":"49","icon":"stic_rage_3","type":"buff","name":"stic_rage_3_skeffnm","effect":"stic_rage_3_de"},"50":{"_id":"50","id":"50","icon":"stic_rage_4","type":"buff","name":"stic_rage_4_skeffnm","effect":"stic_rage_4_de"},"51":{"_id":"51","id":"51","icon":null,"type":"common","name":"stic_explosion_skeffnm","effect":"stic_explosion_de"},"52":{"_id":"52","id":"52","icon":null,"type":"common","name":"stic_reviveblock_skeffnm","effect":"stic_reviveblock_de"},"53":{"_id":"53","id":"53","icon":"stic_bomb","type":"debuff","name":"stic_bomb_skeffnm","effect":"stic_bomb_de"},"54":{"_id":"54","id":"54","icon":"stic_curse2","type":"debuff","name":"stic_curse2_skeffnm","effect":"stic_curse2_de"},"55":{"_id":"55","id":"55","icon":"stic_madness","type":"buff","name":"stic_fury_skeffnm","effect":"stic_fury_de"},"56":{"_id":"56","id":"56","icon":null,"type":"common","name":"stic_soul_down_skeffnm","effect":"stic_soul_down_de"},"57":{"_id":"57","id":"57","icon":"stic_res_inc","type":"buff","name":"stic_res_inc_skeffnm","effect":"stic_res_inc_de"},"58":{"_id":"58","id":"58","icon":"stic_curse","type":"debuff","name":"stic_curse_skeffnm","effect":"stic_curse_de"},"59":{"_id":"59","id":"59","icon":"stic_wildeye","type":"buff","name":"stic_wildeye_skeffnm","effect":"stic_wildeye_de"},"60":{"_id":"60","id":"60","icon":"stic_acc_up","type":"buff","name":"stic_acc_up_skeffnm","effect":"stic_acc_up_de"},"61":{"_id":"61","id":"61","icon":"stic_ab_up_block","type":"debuff","name":"stic_ab_up_block_skeffnm","effect":"stic_ab_up_block_de"},"10k":{"_id":"10k","id":"10k","icon":"stic_dodge_up_keep","type":"buff","name":"stic_dodge_up_skeffnm","effect":"stic_dodge_up_keep_de"},"11k":{"_id":"11k","id":"11k","icon":"stic_heal_keep","type":"buff","name":"stic_heal_skeffnm","effect":"stic_heal_keep_de"},"12k":{"_id":"12k","id":"12k","icon":"stic_debuf_impossible_keep","type":"buff","name":"stic_res_up_skeffnm","effect":"stic_res_up_keep_de"},"13k":{"_id":"13k","id":"13k","icon":"stic_reflect_keep","type":"buff","name":"stic_reflect_skeffnm","effect":"stic_reflect_keep_de"},"14k":{"_id":"14k","id":"14k","icon":"stic_immortality_keep","type":"buff","name":"stic_immortality_skeffnm","effect":"stic_immortality_keep_de"},"15k":{"_id":"15k","id":"15k","icon":"stic_hide_keep","type":"buff","name":"stic_hide_skeffnm","effect":"stic_hide_keep_de"},"16k":{"_id":"16k","id":"16k","icon":"stic_bless_keep","type":"buff","name":"stic_revival_skeffnm","effect":"stic_revival_keep_de"},"17k":{"_id":"17k","id":"17k","icon":"stic_att_dn_keep","type":"debuff","name":"stic_att_dn_skeffnm","effect":"stic_att_dn_keep_de"},"18k":{"_id":"18k","id":"18k","icon":"stic_def_dn_keep","type":"debuff","name":"stic_def_dn_skeffnm","effect":"stic_keep_def_dn_keep_de"},"19k":{"_id":"19k","id":"19k","icon":"stic_speed_dn_keep","type":"debuff","name":"stic_speed_dn_skeffnm","effect":"stic_speed_dn_keep_de"},"1k":{"_id":"1k","id":"1k","icon":"stic_att_up_keep","type":"buff","name":"stic_att_up_skeffnm","effect":"stic_att_up_keep_de"},"20k":{"_id":"20k","id":"20k","icon":"stic_stun_keep","type":"debuff","name":"stic_stun_skeffnm","effect":"stic_stun_keep_de"},"21k":{"_id":"21k","id":"21k","icon":"stic_sleep_keep","type":"debuff","name":"stic_sleep_skeffnm","effect":"stic_sleep_keep_de"},"22k":{"_id":"22k","id":"22k","icon":"stic_blind_keep","type":"debuff","name":"stic_blind_skeffnm","effect":"stic_blind_keep_de"},"23k":{"_id":"23k","id":"23k","icon":"stic_vampire_keep","type":"debuff","name":"stic_vampire_skeffnm","effect":"stic_vampire_keep_de"},"24k":{"_id":"24k","id":"24k","icon":"stic_dot_keep","type":"debuff","name":"stic_dot_skeffnm","effect":"stic_dot_keep_de"},"25k":{"_id":"25k","id":"25k","icon":"stic_provoke_keep","type":"debuff","name":"stic_provoke_skeffnm","effect":"stic_provoke_keep_de"},"26k":{"_id":"26k","id":"26k","icon":"stic_target_keep","type":"debuff","name":"stic_sign_skeffnm","effect":"stic_sign_keep_de"},"27k":{"_id":"27k","id":"27k","icon":"stic_heal_impossible_keep","type":"debuff","name":"stic_heal_impossible_skeffnm","effect":"stic_heal_impossible_keep_de"},"28k":{"_id":"28k","id":"28k","icon":"stic_silence_keep","type":"debuff","name":"stic_silence_skeffnm","effect":"stic_silence_keep_de"},"29k":{"_id":"29k","id":"29k","icon":"stic_buf_impossible_keep","type":"debuff","name":"stic_buf_impossible_skeffnm","effect":"stic_buf_impossible_keep_de"},"2k":{"_id":"2k","id":"2k","icon":"stic_def_up_keep","type":"buff","name":"stic_def_up_skeffnm","effect":"stic_keep_def_up_keep_de"},"30k":{"_id":"30k","id":"30k","icon":"stic_nail_keep","type":"debuff","name":"stic_nail_skeffnm","effect":"stic_nail_keep_de"},"31k":{"_id":"31k","id":"31k","icon":"stic_blaze_keep","type":"debuff","name":"stic_blaze_skeffnm","effect":"stic_blaze_keep_de"},"32k":{"_id":"32k","id":"32k","icon":"stic_blood_keep","type":"debuff","name":"stic_blood_skeffnm","effect":"stic_blood_keep_de"},"3k":{"_id":"3k","id":"3k","icon":"stic_speed_up_keep","type":"buff","name":"stic_speed_up_skeffnm","effect":"stic_speed_up_keep_de"},"40k":{"_id":"40k","id":"40k","icon":"stic_crires_up_keep","type":"buff","name":"stic_crires_up_skeffnm","effect":"stic_crires_up_keep_de"},"44k":{"_id":"44k","id":"44k","icon":"stic_att_up2_keep","type":"buff","name":"stic_att_up2_skeffnm","effect":"stic_att_up2_keep_de"},"45k":{"_id":"45k","id":"45k","icon":"stic_speed_up2_keep","type":"buff","name":"stic_speed_up2_skeffnm","effect":"stic_speed_up2_keep_de"},"46k":{"_id":"46k","id":"46k","icon":"stic_endure_keep","type":"buff","name":"stic_endure_skeffnm","effect":"stic_endure_keep_de"},"4k":{"_id":"4k","id":"4k","icon":"stic_cri_up_keep","type":"buff","name":"stic_cri_up_skeffnm","effect":"stic_cri_up_keep_de"},"53k":{"_id":"53k","id":"53k","icon":"stic_bomb_keep","type":"debuff","name":"stic_bomb_skeffnm","effect":"stic_bomb_keep_de"},"54k":{"_id":"54k","id":"54k","icon":"stic_curse2_keep","type":"debuff","name":"stic_curse2_skeffnm","effect":"stic_curse2_keep_de"},"57k":{"_id":"57k","id":"57k","icon":"stic_res_inc_keep","type":"buff","name":"stic_res_inc_skeffnm","effect":"stic_res_inc_keep_de"},"5k":{"_id":"5k","id":"5k","icon":"stic_protect_keep","type":"buff","name":"stic_protect_skeffnm","effect":"stic_protect_keep_de"},"60k":{"_id":"60k","id":"60k","icon":"stic_acc_up_keep","type":"buff","name":"stic_acc_up_skeffnm","effect":"stic_acc_up_keep_de"},"61k":{"_id":"61k","id":"61k","icon":"stic_ab_up_block_keep","type":"debuff","name":"stic_ab_up_block_skeffnm","effect":"stic_ab_up_block_keep_de"},"62k":{"_id":"62k","id":"62k","icon":"stic_def_up2_keep","type":"buff","name":"stic_def_up2_skeffnm","effect":"stic_def_up2_keep_de"},"6k":{"_id":"6k","id":"6k","icon":"stic_invincible_keep","type":"buff","name":"stic_invincible_skeffnm","effect":"stic_invincible_keep_de"},"7k":{"_id":"7k","id":"7k","icon":"stic_counter_keep","type":"buff","name":"stic_counter_skeffnm","effect":"stic_counter_keep_de"},"8k":{"_id":"8k","id":"8k","icon":"stic_bless_keep","type":"buff","name":"stic_bless_skeffnm","effect":"stic_bless_keep_de"},"9k":{"_id":"9k","id":"9k","icon":"stic_cridmg_up_keep","type":"buff","name":"stic_cridmg_up_skeffnm","effect":"stic_cridmg_up_keep_de"},"aby091_5":{"_id":"aby091_5","id":"aby091_5","type":"buff","name":"c2017_r_skeffnm","effect":"aby091_5_de"},"aby098_4":{"_id":"aby098_4","id":"aby098_4","type":"debuff","name":"aby098_4_csnm","effect":"aby098_4_de"},"automt101":{"_id":"automt101","id":"automt101","icon":null,"type":"debuff","name":"automt101_skeffnm","effect":"automt101_de"},"c1053_r":{"_id":"c1053_r","id":"c1053_r","type":"debuff","name":"c1053_r_skeffnm","effect":"c1053_r_de"},"c1054_r":{"_id":"c1054_r","id":"c1054_r","type":"buff","name":"c1054_r_skeffnm","effect":"c1054_r_de"},"c2017_r":{"_id":"c2017_r","id":"c2017_r","type":"buff","name":"c2017_r_skeffnm","effect":"c2017_r_de"},"c2036_r":{"_id":"c2036_r","id":"c2036_r","type":"buff","name":"c2036_r_skeffnm","effect":"c2036_r_de"},"con016_rage":{"_id":"con016_rage","id":"con016_rage","type":"buff","name":"con016_rage_skeffnm","effect":"con016_rage_de"},"death_stigma":{"_id":"death_stigma","id":"death_stigma","type":"debuff","name":"death_stigma_skeffnm","effect":"death_stigma_de"},"notdead_stun":{"_id":"notdead_stun","id":"notdead_stun","type":"debuff","name":"notdead_stun_skeffnm","effect":"notdead_stun_de"}};

    var HeroDB = {};

    var EveryHeroArray = {};

    var heroesArray = localStorage.getItem('Heroes') ? localStorage.getItem('Heroes') : "[]";
    var AoEHeroes = ["Kawerik","Cerise","Specter Tenebria","Tempest Surin","Pavel","Ambitious Tywin","Alencia","Benevolent Romann","Elena","Cecilia","Vildred","Charlotte","Baal & Sezan","Yufine","Ravi","Kayron","Charles","Yuna","Sez","Haste","Tywin","Lidica","Aramintha","Tenebria","Basar","Tamarinne","Ludwig","Bellona","Luluca","Zeno","Vivian","Lilias","Dizzy","Faithless Lididca","Fallen Cecilia","Judge Kise","Arbiter Vildred","Sage Baal & Sezan","Specimen Sez","Martial Artist Ken","Silver Blade Aramintha","Desert Jewel Basar","Seaside Bellona","Silk","Mercedes","Armin","Zerato","Corvus","Cartuja","Schuri","Dingo","Clarissa","Leo","Purrgis","Crozet","Dominiel","Romann","Khawana","Shadow Rose","Celestial Mercedes","Champion Zerato","Blood Blade Karin","Watcher Schuri","Blaze Dingo","Kitty Clariss","Roaming Warrior Leo","Auxiliary Lots","General Purrgis","Ras","Sven","Church of Ilryos Axe","Rikoris","Adlay","Carrot","Jena","Jecht","Elson","Hurado","Kiris","Celeste","Pearlhorizon","Gloomyrain","Kikirat v2","Chaos Sect Axe","Captain Rikoris","Researcher Carrot","Lena"];
    var app = new Vue({
        el: '#app',
        data: function () {
            return {
              heroList: HeroDB,
              buffList: Debuff_buff,
              debuffList: {"stic_def_dn":"Def down","stic_speed_dn":"Speed down","stic_att_dn":"Attack down","stic_blind":"Blind","stic_dodge_dn":"Evasion down","stic_sign":"Target","stic_buf_impossible":"Unbuffable","stic_heal_impossible":"Unhealable","stic_stun":"Stun","stic_provoke":"Provoke","stic_nail":"Magic Nail","stic_silence":"Silence","stic_sleep":"Sleep","stic_blood":"Bleed","stic_dot":"Poison","stic_blaze":"Burn","stic_vampire":"Vampire","stic_bomb":"Bomb"},
              displayList: [],
              myHeroesList: JSON.parse(heroesArray),
              displayMyHeroes: JSON.parse(heroesArray),
              locked: [],
              classe: [],
              elemento: [],
              debuffs: [],
              buffs: [],
              AoE: false,
              noS1debuffs: false,
              noDebuffs:  false,
              risultati: [],
              displayStyle: "grid",
              isLoadingResults: false,
              inizializzazione: true, //nascondi tutto durante il caricamento iniziale di vue
              numeroCombinazioniPossibili: "/"
            }
        },
        methods: {
          getHeroDB: function() {
             var xmlHttp = new XMLHttpRequest();
             xmlHttp.open( "GET", "https://api.epicsevendb.com/hero", false ); // false for synchronous request
             xmlHttp.send( null );
             var response = JSON.parse(xmlHttp.responseText).results;
             for (var i = 0; i < response.length; i++) {
                var xmlHttpHero = new XMLHttpRequest();
                xmlHttpHero.open( "GET", "https://api.epicsevendb.com/hero/" + response[i]._id, false ); // false for synchronous request
                xmlHttpHero.send( null );
                var responseHero = JSON.parse(xmlHttpHero.responseText).results;
                 //console.log(response[i]);
                if (responseHero && responseHero[0].id) HeroDB[responseHero[0].id] = responseHero[0];
             };
             EveryHeroArray = Object.keys(HeroDB).sort(function (a,b) {return ((a < b) ? -1 : ((a == b) ? 0: 1))});
             this.inizializzazione = false;
          },
          heroId: function (hero) {
            return this.HeroDB[hero].id;
          },
          thisHeroData: function(hero) {
            return this.heroList[hero]
          },
          capitalize: function(string) {
              return string[0].toUpperCase() + string.slice(1).replace(/-/gi," "); 
          },
          updateUserData: function() { // aggiorna i dati sul server
            localStorage.setItem('Heroes', JSON.stringify(this.myHeroesList) );
          },
          addHero: function (hero) {
            if (!this.myHeroesList.includes(hero)) {
              this.myHeroesList.push(hero);
              this.filtroTuttiGliEroi({className: "search_hero_filter", name: "", value: ""}); // aggiorna i filtri per evitare bug se l'opzione nascondi eroi già in team è attiva
              this.filtroTuttiGliEroi({className: "search_hero_filter", name: "", value: ""}, "MyHeroes"); // aggiorna i filtri per evitare bug se l'opzione nascondi eroi già in team è attiva
                    app.updateUserData();
                  }
                },
          removeHero: function (hero) {
            this.myHeroesList.splice(this.myHeroesList.indexOf(hero), 1);
            if (this.locked.includes(hero)) { // lock
               this.locked.splice(this.locked.indexOf(hero), 1)
            };
            this.filtroTuttiGliEroi({className: "search_hero_filter", name: "", value: ""}); // aggiorna i filtri per evitare bug se l'opzione nascondi eroi già in team è attiva
            this.displayMyHeroes.splice(this.displayMyHeroes.indexOf(hero), 1); // rimuovi dalla display list dei miei eroi se presente (sempre presente)
            app.updateUserData();
          },
          isInTeam: function(hero) {
                if (this.myHeroesList.includes(hero)) {
                  return ''
                } else return "none";
          },
          isLocked: function(hero) {
                if (this.locked.includes(hero)) {
                  return ""
                } else return "none";
          },
          lockHero: function(hero) {
             if (!this.locked.includes(hero)) { // lock
               if (this.locked.length < 4) {
                this.locked.push(hero);
               } else {}
            } else { // già locked -> sblocca
              this.locked.splice(this.locked.indexOf(hero), 1)
            };
                },
                setDisplayStyle: function(layout, sezione) {
                  var add_window = document.getElementById("pulsanti_display_add_window").getElementsByClassName("search_hero_filter");
                  add_window[0].className = "search_hero_filter";
                  add_window[1].className = "search_hero_filter";
                  var manage_window = document.getElementById("pulsanti_display_manage_window").getElementsByClassName("search_hero_filter");
                  manage_window[0].className = "search_hero_filter";
                  manage_window[1].className = "search_hero_filter";
                  if (layout.value == "grid") {
                     add_window[0].className += " active";
                     manage_window[0].className += " active";
                  } else if (layout.value == "list") {
                     add_window[1].className += " active";
                     manage_window[1].className += " active";
                  };
                  this.displayStyle = layout.value;
                },
          filtroTuttiGliEroi: function (button, listToModify) { 
            var tmpArray, pulsantiIn, filtro = {};
                       if (listToModify === "AllHeroes" || listToModify == undefined)  { 
                            tmpArray = EveryHeroArray.slice(); // slice per creare una copia e non modificare l'originale
                            pulsantiIn = document.getElementById("add_window"); // determina in che sezione sono i pulsanti
                            if (button.className == "search_hero_filter") filtro["ricerca"] = document.getElementById("inputInTuttiGliEroi").value; // ottieni il testo digitato nella casella
                        } else if (listToModify === "MyHeroes")  { 
                            tmpArray = this.myHeroesList.slice();
                            if (button.className == "search_hero_filter") filtro["ricerca"] =  document.getElementById("inputInMyHeroes").value; // ottieni il testo digitato nella casella
                            pulsantiIn = document.getElementById("manage_window"); // determina in che sezione sono i pulsanti
                        };
            if (filtro.ricerca == undefined) filtro.ricerca = "";
            var pulsanti = pulsantiIn.getElementsByClassName(button.className);
            for (var i = 0; i < pulsanti.length; i++) {
              if (pulsanti[i].className.indexOf("active") != -1) {
                filtro[pulsanti[i].name] = pulsanti[i].value;
                if (pulsanti[i].name == button.name) pulsanti[i].className = button.className; // rimuove la class "active"
              };
            };
            button.className += " active"; // attiva questo pulsante
            filtro[button.name] = button.value; // attualizza il filtro
            //imposta la nuova array da visualizzare
            for (var i = 0; i < tmpArray.length;i++) {
              if ((HeroDB[tmpArray[i]].role != filtro.filter_class && filtro.filter_class != "*") || 
                  (HeroDB[tmpArray[i]].attribute != filtro.filter_element && filtro.filter_element != "*") || 
                  (HeroDB[tmpArray[i]].rarity != filtro.filter_rarity && filtro.filter_rarity != "*") ||
                  (filtro.filter_gia_aggiunti == "true" && this.myHeroesList.includes(tmpArray[i])) ||
                  (tmpArray[i].toLowerCase().indexOf(filtro.ricerca.toLowerCase()) == -1)
              ) {
                 tmpArray.splice(tmpArray.indexOf(tmpArray[i]), 1);
                 i--
              };
            };
            if (listToModify === "AllHeroes" || listToModify == undefined)  { 
                            this.displayList = tmpArray;
                            //tmpArray.length = 0;
                        } else if (listToModify === "MyHeroes")  { 
                            if (filtro["filter_locked_only"] == "true") tmpArray = this.locked;
                            this.displayMyHeroes = tmpArray;
                            //tmpArray.length = 0;
                        };

          },
          aggiornaImposatazioniAvanzate: function () {
                this.classe = [];
                this.elemento = [];
                this.debuffs = [];
                this.buffs = [];

                //Raccogli le impostazioni avanzate
                var classi = document.getElementsByName("classe");
                var elemento_checkbox = document.getElementsByName("elemento");
                var debuffs_checkbox = document.getElementsByName("debuff");
                var buffs_checkbox = document.getElementsByName("buff");
                for(var i = 0; i < classi.length; i++)  
                {  
                    if (classi[i].checked) this.classe.push(classi[i].value);
                }; 
                for(var i = 0; i < elemento_checkbox.length; i++)  
                {  
                    if (elemento_checkbox[i].checked) this.elemento.push(elemento_checkbox[i].value);
                }; 
                for(var i = 0; i < debuffs_checkbox.length; i++)  
                {  
                    if (debuffs_checkbox[i].checked) this.debuffs.push(debuffs_checkbox[i].value);
                }; 
                for(var i = 0; i < buffs_checkbox.length; i++)  
                {  
                    if (buffs_checkbox[i].checked) this.buffs.push(buffs_checkbox[i].value);
                }; 

                if ($('#AoE').is(":checked"))
                {
                this.AoE = true;
                } else this.AoE = false;

                if ($('#noS1debuffs').is(":checked"))
                {
                this.noS1debuffs = true;
                } else this.noS1debuffs = false;

                if ($('#noDebuffs').is(":checked"))
                {
                this.noDebuffs = true;
                } else this.noDebuffs = false;
            },
            nuovoCampSimulatorTeam2: function(inputTeam) {
              let pg1 = inputTeam[0];
              let pg2 = inputTeam[1];
              let pg3 = inputTeam[2];
              let pg4 = inputTeam[3];

              var tabConTagNome = [
                    {personaggio: HeroDB[pg1].name, opzione: HeroDB[pg1].camping.options[0],risultato: HeroDB[pg2].camping.reactions[HeroDB[pg1].camping.options[0]]+HeroDB[pg3].camping.reactions[HeroDB[pg1].camping.options[0]]+HeroDB[pg4].camping.reactions[HeroDB[pg1].camping.options[0]]},
                    {personaggio: HeroDB[pg1].name, opzione: HeroDB[pg1].camping.options[1],risultato: HeroDB[pg2].camping.reactions[HeroDB[pg1].camping.options[1]]+HeroDB[pg3].camping.reactions[HeroDB[pg1].camping.options[1]]+HeroDB[pg4].camping.reactions[HeroDB[pg1].camping.options[1]]},
                    {personaggio: HeroDB[pg2].name, opzione: HeroDB[pg2].camping.options[0],risultato: HeroDB[pg1].camping.reactions[HeroDB[pg2].camping.options[0]]+HeroDB[pg3].camping.reactions[HeroDB[pg2].camping.options[0]]+HeroDB[pg4].camping.reactions[HeroDB[pg2].camping.options[0]]},
                    {personaggio: HeroDB[pg2].name, opzione: HeroDB[pg2].camping.options[1],risultato: HeroDB[pg1].camping.reactions[HeroDB[pg2].camping.options[1]]+HeroDB[pg3].camping.reactions[HeroDB[pg2].camping.options[1]]+HeroDB[pg4].camping.reactions[HeroDB[pg2].camping.options[1]]},
                    {personaggio: HeroDB[pg3].name, opzione: HeroDB[pg3].camping.options[0],risultato: HeroDB[pg1].camping.reactions[HeroDB[pg3].camping.options[0]]+HeroDB[pg2].camping.reactions[HeroDB[pg3].camping.options[0]]+HeroDB[pg4].camping.reactions[HeroDB[pg3].camping.options[0]]},
                    {personaggio: HeroDB[pg3].name, opzione: HeroDB[pg3].camping.options[1],risultato: HeroDB[pg1].camping.reactions[HeroDB[pg3].camping.options[1]]+HeroDB[pg2].camping.reactions[HeroDB[pg3].camping.options[1]]+HeroDB[pg4].camping.reactions[HeroDB[pg3].camping.options[1]]},
                    {personaggio: HeroDB[pg4].name, opzione: HeroDB[pg4].camping.options[0],risultato: HeroDB[pg1].camping.reactions[HeroDB[pg4].camping.options[0]]+HeroDB[pg2].camping.reactions[HeroDB[pg4].camping.options[0]]+HeroDB[pg3].camping.reactions[HeroDB[pg4].camping.options[0]]},
                    {personaggio: HeroDB[pg4].name, opzione: HeroDB[pg4].camping.options[1],risultato: HeroDB[pg1].camping.reactions[HeroDB[pg4].camping.options[1]]+HeroDB[pg2].camping.reactions[HeroDB[pg4].camping.options[1]]+HeroDB[pg3].camping.reactions[HeroDB[pg4].camping.options[1]]}
              ];


              //Ordina per risultato				   
              tabConTagNome.sort(function(a, b) {
                  return ((a.risultato > b.risultato) ? -1 : ((a.risultato == b.risultato) ? 0 : 1));
              });   

               while (tabConTagNome[0].opzione === tabConTagNome[1].opzione) {
                  tabConTagNome.splice(1, 1);
               };
                var campMiglioreRisultato1 = tabConTagNome[0].risultato;
                var campNomeMigliorScelta1 = tabConTagNome[0].opzione;
                var campMigliorePG1 = tabConTagNome[0].personaggio;

                var campMiglioreRisultato2 = tabConTagNome[1].risultato;
                var campNomeMigliorScelta2 = tabConTagNome[1].opzione;
                var campMigliorePG2 = tabConTagNome[1].personaggio;

                 var moraleTotaleGuadagnato = campMiglioreRisultato1 + campMiglioreRisultato2;

              let soluzioni = {}; 
                  soluzioni.morale = moraleTotaleGuadagnato;
                  soluzioni.opzioneMigliore1 = campNomeMigliorScelta1;
                  soluzioni.risultatoScelta1 = campMiglioreRisultato1;
                  soluzioni.opzioneMigliore2 = campNomeMigliorScelta2;
                  soluzioni.risultatoScelta2 = campMiglioreRisultato2;
                  soluzioni.migliorPG1 = campMigliorePG1;
                  soluzioni.migliorPG2 = campMigliorePG2;
                  soluzioni.team = [HeroDB[pg1].name,HeroDB[pg2].name,HeroDB[pg3].name,HeroDB[pg4].name];
              return soluzioni;
            }, 
    },
    computed: {
          calcolaRisultati: function () { // in computed per evitare di calcolare 2 volte il risultato se non si è cambiato niente
            this.isLoadingResults = true; // mostra animazione di caricamento
            //resetta per un nuovo calcolo
            this.risultati = [];
            //Richiama questi valori per far capire a vue di ricalcolare se sono cambiati
            this.classe;
            this.elemento;
            this.debuffs;
            this.buffs;
            this.AoE;
            this.noS1debuffs;
            this.noDebuffs;
            
            var campList = this.myHeroesList.slice();
                        if (this.locked.length > 0 ) {
                          for (var i = 0; i< this.locked.length; i++){
                              campList.splice( campList.indexOf(this.locked[i]),1);
                            };
                        };

            this.numeroCombinazioniPossibili = Combinatorics.bigCombination(campList,4-this.locked.length).length;
            setTimeout(() => {
                            Combinatorics.bigCombination(campList,4-this.locked.length).forEach(teamComb => {
                            if (teamComb.length>4) teamComb = []; // Se locked = 4 allora team deve riportare array vuota
                            var team = [].concat(teamComb, this.locked);
                            let elementoFiltro = teamComb;
                            let elementoRisultati = elementoFiltro.map(function (hero, i) { return HeroDB[hero].element }).flat();
                            let buffsRisultati = elementoFiltro.map(function (hero, i) { return HeroDB[hero].buffs }).flat();
                            let debuffsRisultati = elementoFiltro.map(function (hero, i) { return HeroDB[hero].debuffs }).flat();
                            let S1debuffsRisultati = elementoFiltro.map(function (hero, i) { return HeroDB[hero].skills[0].debuffs }).flat();
                            let classeRisultati = elementoFiltro.map(function (hero, i) { return HeroDB[hero].classType }).flat();
                            let AoE_inTeam = AoEHeroes.some(i => elementoFiltro.includes(i));
                            if (this.locked.every(i => team.includes(i)) &&
                                this.classe.every(i => classeRisultati.includes(i)) && 
                                this.elemento.every(i => elementoRisultati.includes(i)) &&
                                this.debuffs.every(i => debuffsRisultati.includes(i)) &&
                                this.buffs.every(i => buffsRisultati.includes(i)) &&
                                (this.AoE === false || (this.AoE === true && AoE_inTeam )) &&
                                (this.noS1debuffs === false || (this.noS1debuffs === true &&  S1debuffsRisultati.filter(function (team) {return team != "stic_stun" && team != "stic_provoke" && team != "stic_sleep"}).length === 0)) &&
                                (this.noDebuffs === false || (this.noDebuffs === true && debuffsRisultati.filter(function (team) {return team != "stic_stun" && team != "stic_provoke" && team != "stic_sleep"}).length === 0)  )
                            ){
                                if (this.risultati.length < 200) {
                                  this.risultati.push(app.nuovoCampSimulatorTeam2(team));
                                  this.risultati.sort(function(a, b)  {return ((a.morale > b.morale) ? -1 : ((a.morale == b.morale) ? 0 : 1));});
                                } else {
                                      let risultatoDiQuestoTeam = app.nuovoCampSimulatorTeam2(team)
                                      this.risultati.sort(function(a, b) {return ((a.morale > b.morale) ? -1 : ((a.morale == b.morale) ? 0 : 1));});	 
                                      if  (risultatoDiQuestoTeam.morale > this.risultati[this.risultati.length-1].morale) this.risultati.unshift(risultatoDiQuestoTeam),this.risultati.splice(200);
                                };
                             };
            });
            this.risultati.sort(function (a,b) {return ((a.morale > b.morale) ? -1 : ((a.morale == b.morale) ? 0: 1))}); // riordina l'ultimo elemento aggiunto

            this.isLoadingResults = false;
          }, 10); // attendi 10 ms prima di iniziare l'operazione
      }
  }, // computed
  watcher: {
    }
});
              
  </script>
</body>
</html>