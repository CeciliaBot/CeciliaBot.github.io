(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[1670,2279],{8242:function(){},1501:function(e,t,l){"use strict";var a=l(6774);function i(e,t){return e<t?t:e}function o(e){return void 0===e?-1:e.height}var s=function(){function e(e,t){this.intervalTree=e,this.records=[],this.height=0,this.key=t.low,this.max=t.high,this.records.push(t)}return e.prototype.getNodeHigh=function(){for(var e=this.records[0].high,t=1;t<this.records.length;t++)this.records[t].high>e&&(e=this.records[t].high);return e},e.prototype.updateHeight=function(){this.height=i(o(this.left),o(this.right))+1},e.prototype.updateMaxOfParents=function(){if(void 0!==this){var e=this.getNodeHigh();void 0!==this.left&&void 0!==this.right?this.max=i(i(this.left.max,this.right.max),e):void 0!==this.left&&void 0===this.right?this.max=i(this.left.max,e):void 0===this.left&&void 0!==this.right?this.max=i(this.right.max,e):this.max=e,this.parent&&this.parent.updateMaxOfParents()}},e.prototype._updateMaxAfterRightRotate=function(){var e=this.parent,t=e.left,l=t.getNodeHigh();void 0===t.left&&void 0!==t.right?t.max=i(l,t.right.max):void 0!==t.left&&void 0===t.right?t.max=i(l,t.left.max):void 0===t.left&&void 0===t.right?t.max=l:t.max=i(i(t.left.max,t.right.max),l);var a=this.getNodeHigh();void 0===this.left&&void 0!==this.right?this.max=i(a,this.right.max):void 0!==this.left&&void 0===this.right?this.max=i(a,this.left.max):void 0===this.left&&void 0===this.right?this.max=a:this.max=i(i(this.left.max,this.right.max),a),e.max=i(i(e.left.max,e.right.max),e.getNodeHigh())},e.prototype._updateMaxAfterLeftRotate=function(){var e=this.parent,t=e.right,l=t.getNodeHigh();void 0===t.left&&void 0!==t.right?t.max=i(l,t.right.max):void 0!==t.left&&void 0===t.right?t.max=i(l,t.left.max):void 0===t.left&&void 0===t.right?t.max=l:t.max=i(i(t.left.max,t.right.max),l);var a=this.getNodeHigh();void 0===this.left&&void 0!==this.right?this.max=i(a,this.right.max):void 0!==this.left&&void 0===this.right?this.max=i(a,this.left.max):void 0===this.left&&void 0===this.right?this.max=a:this.max=i(i(this.left.max,this.right.max),a),e.max=i(i(e.left.max,t.max),e.getNodeHigh())},e.prototype._leftRotate=function(){var e=this.right;e.parent=this.parent,void 0===e.parent?this.intervalTree.root=e:e.parent.left===this?e.parent.left=e:e.parent.right===this&&(e.parent.right=e),this.right=e.left,void 0!==this.right&&(this.right.parent=this),e.left=this,this.parent=e,this.updateHeight(),e.updateHeight()},e.prototype._rightRotate=function(){var e=this.left;e.parent=this.parent,void 0===e.parent?this.intervalTree.root=e:e.parent.left===this?e.parent.left=e:e.parent.right===this&&(e.parent.right=e),this.left=e.right,void 0!==this.left&&(this.left.parent=this),e.right=this,this.parent=e,this.updateHeight(),e.updateHeight()},e.prototype._rebalance=function(){if(o(this.left)>=2+o(this.right)){var e=this.left;o(e.left)>=o(e.right)?(this._rightRotate(),this._updateMaxAfterRightRotate()):(e._leftRotate(),this._rightRotate(),this._updateMaxAfterRightRotate())}else if(o(this.right)>=2+o(this.left)){var t=this.right;o(t.right)>=o(t.left)?(this._leftRotate(),this._updateMaxAfterLeftRotate()):(t._rightRotate(),this._leftRotate(),this._updateMaxAfterLeftRotate())}},e.prototype.insert=function(t){t.low<this.key?void 0===this.left?(this.left=new e(this.intervalTree,t),this.left.parent=this):this.left.insert(t):void 0===this.right?(this.right=new e(this.intervalTree,t),this.right.parent=this):this.right.insert(t),this.max<t.high&&(this.max=t.high),this.updateHeight(),this._rebalance()},e.prototype._getOverlappingRecords=function(e,t,l){if(e.key<=l&&t<=e.getNodeHigh()){for(var a=[],i=0;i<e.records.length;i++)e.records[i].high>=t&&a.push(e.records[i]);return a}return[]},e.prototype.search=function(e,t){if(void 0===this)return[];var l=[],a=[],i=[];return e>this.max?[]:(void 0!==this.left&&this.left.max>=e&&(l=this.left.search(e,t)),a=this._getOverlappingRecords(this,e,t),t<this.key?l.concat(a):(void 0!==this.right&&(i=this.right.search(e,t)),l.concat(a,i)))},e.prototype.searchExisting=function(e){if(void 0!==this){if(this.key===e)return this;if(e<this.key){if(void 0!==this.left)return this.left.searchExisting(e)}else if(void 0!==this.right)return this.right.searchExisting(e)}},e.prototype._minValue=function(){return void 0===this.left?this:this.left._minValue()},e.prototype.remove=function(e){var t=this.parent;if(e.key<this.key)return void 0!==this.left?this.left.remove(e):void 0;if(e.key>this.key)return void 0!==this.right?this.right.remove(e):void 0;if(void 0!==this.left&&void 0!==this.right){var l=this.right._minValue();return this.key=l.key,this.records=l.records,this.right.remove(this)}return t.left===this?(void 0!==this.right?(t.left=this.right,this.right.parent=t):(t.left=this.left,void 0!==this.left&&(this.left.parent=t)),t.updateMaxOfParents(),t.updateHeight(),t._rebalance(),this):t.right===this?(void 0!==this.right?(t.right=this.right,this.right.parent=t):(t.right=this.left,void 0!==this.left&&(this.left.parent=t)),t.updateMaxOfParents(),t.updateHeight(),t._rebalance(),this):void 0},e}();var n=function(){function e(){this.count=0}return e.prototype.insert=function(e){if(e.low>e.high)throw new Error("`low` value must be lower or equal to `high` value");if(void 0===this.root)return this.root=new s(this,e),this.count++,!0;var t=this.root.searchExisting(e.low);if(void 0!==t){for(var l=0;l<t.records.length;l++)if(a(t.records[l],e))return!1;return t.records.push(e),e.high>t.max&&(t.max=e.high,t.parent&&t.parent.updateMaxOfParents()),this.count++,!0}return this.root.insert(e),this.count++,!0},e.prototype.search=function(e,t){return void 0===this.root?[]:this.root.search(e,t)},e.prototype.remove=function(e){if(void 0===this.root)return!1;var t=this.root.searchExisting(e.low);if(void 0===t)return!1;if(t.records.length>1){for(var l=void 0,o=0;o<t.records.length;o++)if(a(t.records[o],e)){l=t.records[o],t.records.splice(o,1);break}if(l){if(l=void 0,e.high===t.max){var n=t.getNodeHigh();void 0!==t.left&&void 0!==t.right?t.max=i(i(t.left.max,t.right.max),n):void 0!==t.left&&void 0===t.right?t.max=i(t.left.max,n):void 0===t.left&&void 0!==t.right?t.max=i(t.right.max,n):t.max=n,t.parent&&t.parent.updateMaxOfParents()}return this.count--,!0}return!1}if(1===t.records.length){if(a(t.records[0],e)){if(this.root.key===t.key){var r=new s(this,{low:e.low,high:e.low});r.left=this.root,this.root.parent=r;var c=this.root.remove(t);return this.root=r.left,void 0!==this.root&&(this.root.parent=void 0),!!c&&(c=void 0,this.count--,!0)}c=this.root.remove(t);return!!c&&(c=void 0,this.count--,!0)}return!1}return!1},e.prototype.inOrder=function(){return new c(this.root)},e.prototype.reverseInOrder=function(){return new d(this.root)},e.prototype.preOrder=function(){return new u(this.root)},e}();var r=function(){function e(){this.tree=new n}return e.prototype.insert=function(e,t,l){return this.tree.insert({low:e,high:t,data:l})},e.prototype.remove=function(e,t,l){return this.tree.remove({low:e,high:t,data:l})},e.prototype.search=function(e,t){return this.tree.search(e,t).map((function(e){return e.data}))},e.prototype.inOrder=function(){return this.tree.inOrder()},e.prototype.reverseInOrder=function(){return this.tree.reverseInOrder()},e.prototype.preOrder=function(){return this.tree.preOrder()},Object.defineProperty(e.prototype,"count",{get:function(){return this.tree.count},enumerable:!1,configurable:!0}),e}();t.ZP=r;var c=function(){function e(e){this.stack=[],void 0!==e&&this.push(e)}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){return void 0===this.currentNode?{done:!0,value:void 0}:this.i<this.currentNode.records.length?{done:!1,value:this.currentNode.records[this.i++]}:(void 0!==this.currentNode.right?this.push(this.currentNode.right):this.pop(),this.next())},e.prototype.push=function(e){this.currentNode=e,this.i=0;while(void 0!==this.currentNode.left)this.stack.push(this.currentNode),this.currentNode=this.currentNode.left},e.prototype.pop=function(){this.currentNode=this.stack.pop(),this.i=0},e}();var d=function(){function e(e){this.stack=[],void 0!==e&&this.push(e)}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){return void 0===this.currentNode?{done:!0,value:void 0}:this.currentNode.records.length&&this.i>=0?{done:!1,value:this.currentNode.records[this.i--]}:(void 0!==this.currentNode.left?this.push(this.currentNode.left):this.pop(),this.next())},e.prototype.push=function(e){var t,l,a,i;this.currentNode=e,this.i=(null!==(l=null===(t=this.currentNode)||void 0===t?void 0:t.records.length)&&void 0!==l?l:0)-1;while(void 0!==this.currentNode.right)this.stack.push(this.currentNode),this.currentNode=this.currentNode.right,this.i=(null!==(i=null===(a=this.currentNode)||void 0===a?void 0:a.records.length)&&void 0!==i?i:0)-1},e.prototype.pop=function(){var e,t;this.currentNode=this.stack.pop(),this.i=(null!==(t=null===(e=this.currentNode)||void 0===e?void 0:e.records.length)&&void 0!==t?t:0)-1},e}();var u=function(){function e(e){this.stack=[],this.i=0,this.currentNode=e}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){return void 0===this.currentNode?{done:!0,value:void 0}:this.i<this.currentNode.records.length?{done:!1,value:this.currentNode.records[this.i++]}:(void 0!==this.currentNode.right&&this.push(this.currentNode.right),void 0!==this.currentNode.left&&this.push(this.currentNode.left),this.pop(),this.next())},e.prototype.push=function(e){this.stack.push(e)},e.prototype.pop=function(){this.currentNode=this.stack.pop(),this.i=0},e}()},6774:function(e){e.exports=function(e,t,l,a){var i=l?l.call(a,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var n=Object.prototype.hasOwnProperty.bind(t),r=0;r<o.length;r++){var c=o[r];if(!n(c))return!1;var d=e[c],u=t[c];if(i=l?l.call(a,d,u,c):void 0,!1===i||void 0===i&&d!==u)return!1}return!0}},7673:function(e,t){"use strict";t.Z={emits:["update:modelValue"],inheritAttrs:!1,props:{modelValue:[String,Number],placeholder:String,label:String,required:Boolean,type:{default:"text"}},data(){return{bindingAttrs:{}}},created(){var e={listeners:{},attrs:{}};for(var t in this.$attrs)/^on/.test(t)?e.listeners[t]=this.$attrs[t]:e.attrs[t]=this.$attrs[t];this.bindingAttrs=e},methods:{focus(){this.$el.querySelector("input").focus()},error(){this.$el.classList.add("error")},checkIfFilled(e){this.required&&(e.target.value?e.target.parentNode.classList.remove("error"):e.target.parentNode.classList.add("error"))}}}},5425:function(e,t,l){"use strict";l.d(t,{s:function(){return r}});var a=l(6252),i=l(3577);const o=["type","required","value"],s={class:"label"},n=(0,a._)("span",{class:"focus-bg"},null,-1);function r(e,t,l,r,c,d){const u=(0,a.Q2)("ripple-effect");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",(0,a.dG)({class:"input-field"},c.bindingAttrs.attrs),[(0,a._)("input",(0,a.dG)({type:l.type,placeholder:" ",required:l.required,value:l.modelValue},c.bindingAttrs.listeners,{onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),onBlur:t[1]||(t[1]=(...e)=>d.checkIfFilled&&d.checkIfFilled(...e))}),null,16,o),(0,a._)("label",s,(0,i.zw)(l.placeholder||l.label),1),n],16)),[[u]])}},2878:function(e,t,l){"use strict";var a=l(5509),i=l(4553),o=(l(9206),l(3744));const s=(0,o.Z)(i.Z,[["render",a.s]]);t.Z=s},1343:function(e,t,l){"use strict";l.d(t,{Z:function(){return h}});var a=l(6252),i=l(3577);const o={style:{"border-bottom":"solid 2px #614828"}},s=["onClick"],n={class:"noselect"};function r(e,t,l,r,c,d){return(0,a.wg)(),(0,a.iD)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.tabs,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:(0,i.C_)(["tab",{active:l.tab===e.id,disabled:e.disabled}]),onClick:t=>d.click(e)},[(0,a._)("span",n,(0,i.zw)(e.name||e.title||e),1)],10,s)))),128))])}var c={name:"E7Tabs",emits:["change"],props:{tabs:{type:Array,default:function(){return[]}},tab:{default:""}},methods:{click(e){e.disabled||this.$emit("change",e)}}},d=l(3744);const u=(0,d.Z)(c,[["render",r]]);var h=u},4710:function(e,t,l){"use strict";l.d(t,{Z:function(){return g}});var a=l(6252),i=l(3577);const o={key:0,style:{display:"inline-block","min-width":"2em"}},s=["data-src"],n={style:{"margin-left":"5px"}},r={style:{"font-size":"1.4rem","font-weight":"400"}},c=(0,a._)("br",null,null,-1),d={style:{"font-size":"1.2rem","font-weight":"300"}};function u(e,t,l,u,h,p){const m=(0,a.up)("Multiselect",!0),f=(0,a.Q2)("lazyloader");return(0,a.wg)(),(0,a.j4)(m,{class:"multisel",tabindex:"-1",mode:this.mode,trackBy:"name",valueProp:"id",label:"name",placeholder:"",searchable:!0,clearOnBlur:!1,options:l.options,ref:"multiselect"},{option:(0,a.w5)((e=>[e.option.src?((0,a.wg)(),(0,a.iD)("span",o,[(0,a.wy)((0,a._)("img",{"data-src":e.option.src},null,8,s),[[f]])])):(0,a.kq)("",!0),(0,a._)("div",n,[(0,a._)("span",r,(0,i.zw)(e.option.name||e.option.id),1),c,(0,a._)("span",d,(0,i.zw)(e.option.description),1)])])),_:1},8,["mode","options"])}var h=l(5135),p={name:"MultiSelect",components:{Multiselect:h.Z},props:{mode:{type:String,default:"tags"},options:{default:()=>[]}},data(){return{isFocused:!1,focusTimer:null,timer:null,closeOnSelect:!1,openDirection:"bottom"}},mounted(){},watch:{isFocused(e){if(e){this.openDirection="top",this.closeOnSelect=!1,this.$el.style.fontSize="20px",this.$el.style.setProperty("--ms-max-height",window.innerHeight/2+"px"),this.$el.style.position="fixed",this.$el.style.zIndex=10;var{top:t,left:l}=this.$el.getBoundingClientRect();this.$el.style.bottom=window.innerHeight-t+"px",this.$el.style.left=l+"px",this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((()=>{this.$el.style.bottom=0,this.$el.style.left=0}),100)}else this.$el.style.position="",this.$el.style.bottom="",this.$el.style.left="",this.$el.style.zIndex=""}},methods:{openDropdown(){this.$refs.multiselect.open()},focusSelect(){if(window.innerWidth>700)return this.isFocused=!1;this.focusTimer&&(clearTimeout(this.focusTimer),this.focusTimer=null),this.isFocused=!0},blurSelect(){this.isFocused&&(this.focusTimer=setTimeout((()=>{this.isFocused=!1}),20))}}},m=l(3744);const f=(0,m.Z)(p,[["render",u]]);var g=f},6607:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return Po}});var a=l(6252),i=l(3577),o=l(9963);const s={class:"flex full-h full-w"},n={ref:"side-nav",class:"editor-navigation flex flex-col noselect",tabindex:"-1"},r={class:"mobile-only-view",stlye:"height: 40px;"},c={class:"nav-bar-group overflow-auto hide-scrollbar"},d={class:"nav-bar-group overflow-auto hide-scrollbar"},u={class:"nav-bar-group overflow-auto hide-scrollbar"},h={class:"main-content-viewer overflow-hidden flex-fill flex flex-col"},p={class:"flex overflow-auto hide-scrollbar noselect",style:{height:"40px","white-space":"nowrap"}},m=(0,a._)("span",null," Menu ",-1),f=(0,a._)("i",{class:"fa fa-angle-right"},null,-1),g=[m,f],v=(0,a._)("i",{class:"fa fa-plus"},null,-1),y=(0,a._)("span",null," New ",-1),b=[v,y],_=(0,a._)("i",{class:"fa fa-trash"},null,-1),V=(0,a._)("span",null," Delete ",-1),w=[_,V],k=(0,a._)("span",null," View JSON ",-1),x=[k],S=(0,a._)("span",null," Preview ",-1),D=[S],E=(0,a._)("i",{class:"fa fa-save"},null,-1),O=(0,a._)("span",null," Save ",-1),N=[E,O],C={class:"tabs-container overflow-auto hide-scrollbar noselect"},M=["onClick"],L={class:"name text-ellipsis"},U=["onClick"],W={class:"flex-fill editor-main-container overflow-auto hide-scrollbar"};function I(e,t,l,m,f,v){const y=(0,a.up)("FileTree"),_=(0,a.up)("FileSearch"),V=(0,a.up)("OpenEditorCompoennt"),k=(0,a.up)("E7Error"),S=(0,a.Q2)("ripple-effect"),E=(0,a.Q2)("tooltip");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",n,[(0,a._)("div",r,[(0,a._)("span",{class:"pointer pad-5",style:{float:"right","font-size":"30px"},onClick:t[0]||(t[0]=(...e)=>v.closeMobileNav&&v.closeMobileNav(...e))},"✖")]),(0,a._)("div",c,[(0,a._)("h2",{class:"pointer",onClick:t[1]||(t[1]=(...e)=>v.toggleCollpaseGroup&&v.toggleCollpaseGroup(...e))}," Open Editors "),(0,a.Wm)(y,{files:f.openFiles,onOpen:v.switchTab},null,8,["files","onOpen"])]),(0,a._)("div",d,[(0,a._)("h2",{class:"pointer",onClick:t[2]||(t[2]=(...e)=>v.toggleCollpaseGroup&&v.toggleCollpaseGroup(...e))}," File List "),(0,a.Wm)(y,{files:v.files,onOpen:v.openFile},null,8,["files","onOpen"])]),(0,a._)("div",u,[(0,a._)("h2",{class:"pointer",onClick:t[3]||(t[3]=(...e)=>v.toggleCollpaseGroup&&v.toggleCollpaseGroup(...e))}," Search "),(0,a.Wm)(_,{files:v.files,onOpen:v.openFile},null,8,["files","onOpen"])])],512),(0,a._)("div",h,[(0,a._)("div",p,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{class:"mobile-only-view no-flex-shrink material-button basic primary",onClick:t[4]||(t[4]=t=>e.$refs["side-nav"].focus())},g)),[[S]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{class:"no-flex-shrink material-button basic primary",onClick:t[5]||(t[5]=(...e)=>v.createNewFileButton&&v.createNewFileButton(...e))},b)),[[S]]),f.active?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{class:"no-flex-shrink material-button basic warn",onClick:t[6]||(t[6]=(...e)=>v.deleteItem&&v.deleteItem(...e))},w)),[[S],[E,"Send a request to the server and delete<br>current document."]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{class:"no-flex-shrink material-button basic primary",onClick:t[7]||(t[7]=(...e)=>v.previewJSON&&v.previewJSON(...e))},x)),[[S]]),f.active.previewComponent?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{key:0,class:"no-flex-shrink material-button flat primary",onClick:t[8]||(t[8]=e=>f.active.viewPreview=!0)},D)),[[S]]):(0,a.kq)("",!0),(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{class:"no-flex-shrink material-button flat primary",onClick:t[9]||(t[9]=(...e)=>v.saveItem&&v.saveItem(...e)),style:{"margin-left":"auto"}},N)),[[E,"CTRL + S"],[S]])],64)):(0,a.kq)("",!0)]),(0,a._)("div",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.openFiles,(e=>((0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["file-open-tab",{active:e.active}]),key:"tab"+e.name,onClick:t=>v.switchTab(e)},[(0,a._)("span",L,(0,i.zw)(e.name),1),(0,a._)("span",{class:"close overflow-hidden relative mat-hover",onClick:(0,o.iM)((t=>v.closeFile(e)),["stop"])},"✖",8,U)],10,M)))),128))]),(0,a._)("div",W,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.openFiles,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(V,{key:"editor"+e.name,dataProp:e},null,8,["dataProp"])),[[o.F8,e.active]]))),128)),f.openFiles.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(k,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)(" No file selected ")])),_:1}))])])])}l(7658);var T=l(2262),P=l(2784),R=l(8439),F=l(3479),$={emits:["close"],props:{dataProp:{type:Object,default:()=>({})}},computed:{wid(){return Date.now()}},render(){return(0,a.h)(F.Z,{onClose:()=>this.$emit("close"),wid:this.wid},(()=>(0,a.h)(this.dataProp.previewComponent||"div",{heroProp:this.dataProp.data,artiProp:this.dataProp.data})))}};const Z=$;var H=Z,j={emits:["update:modelValue"],props:{dataProp:{type:Object,default:()=>({component:"div"})}},computed:{localData:{get(){return this.dataProp},set(e){return this.$emit("update:modelValue",e)}}},render(){return(0,a.h)("div",[(0,a.h)(this.dataProp.component||"div",{dataProp:this.localData.data,style:"padding-bottom: 110px;"}),this.localData.viewPreview?(0,a.h)(H,{dataProp:this.localData,onClose:()=>this.localData.viewPreview=!1}):null])}};const A=j;var q=A,G={props:{files:{type:Array,default:()=>[]},flatten:{type:Boolean,default:!1}},methods:{emitOpenFile(e,t){this.$emit("open",e,t)},recursiveNestedList(){var e=(t,l)=>t.map((t=>t.children?(0,a.h)("li",{},[this.flatten?null:(0,a.h)("span",{class:"caret tree-selectable pointer overflow-hidden text-ellipsis",onClick:this.toggleTree},[t.refresh?(0,a.h)("i",{class:"fa fa-sync pad-5",style:"float: right; z-index: 2; position: relative;",onClick:e=>{e.stopPropagation(),t.refresh()}}):null,(0,a.h)("span",{class:"label"},t.name)]),(0,a.h)("ul",{class:this.flatten?"":"nested"},e(t.children,t.type||l))]):(0,a.h)("li",{class:"tree-selectable pointer overflow-hidden text-ellipsis "+(t.active?"active":""),onClick:()=>this.emitOpenFile(t,l)},[(0,a.h)("span",{class:"label"},t.name)])));return(0,a.h)("ul",{class:"relative",style:"z-index: 0;"},e(this.files,null))},toggleTree(e){e.currentTarget.parentElement.querySelector(".nested").classList.toggle("active"),e.currentTarget.classList.toggle("caret-down")}},render(){return this.recursiveNestedList()}};const B=G;var K=B,z={props:{files:{type:Array,default:()=>[]}},data(){return{query:""}},computed:{searchResult(){return this.query.trim()?this.recursiveNameFilter(this.files,[],this.query.toLowerCase()):[]}},methods:{emitOpenFile(e,t){this.$emit("open",e,t)},updateQuery(e){this.query=e.target.value},recursiveNameFilter(e,t,l){for(var a in e){let n=e[a];if(n.children){var i=this.recursiveNameFilter(n.children,[],l),o={};for(var s in n)"children"!==s&&(o[s]=n[s]);o.children=i,t.push(o)}else-1!==n.name.toLowerCase().indexOf(l)&&t.push(n)}return t}},render(){return(0,a.h)("div",{},[(0,a.h)("div",{class:"nsearchbar",style:"display: inline-block; display: flex; flex: 1; overflow: hidden; position: relative;"},[(0,a.h)("input",{placeholder:"Search",value:this.query,onInput:this.updateQuery,autocomplete:"off",type:"text"}),(0,a.h)("div",{class:"go",onClick:e=>{this.query="",e.currentTarget.previousSibling.focus()}},[(0,a.h)("i",{class:"fa "+(this.query.trim()?"fa-times":"fa-search")})])]),(0,a.h)(K,{files:this.searchResult,flatten:!0,onOpen:this.emitOpenFile})])}};const J=z;var Y=J;const Q={class:"flex flex-col full-h full-w items-center justify-center"},X=(0,a._)("div",{style:{"font-size":"3em"}},[(0,a._)("i",{class:"fa fa-exclamation-circle"})],-1);function ee(e,t){return(0,a.wg)(),(0,a.iD)("div",Q,[X,(0,a._)("div",null,[(0,a.WI)(e.$slots,"default")])])}var te=l(3744);const le={},ae=(0,te.Z)(le,[["render",ee]]);var ie=ae,oe=l(8977),se=l(2022);function ne(e,t,l,i,s,n){const r=(0,a.up)("Tabs"),c=(0,a.up)("GeneralTab"),d=(0,a.up)("SkillsTab"),u=(0,a.up)("ExclusiveEquipment"),h=(0,a.up)("SkinComponent");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{tabs:[{id:"general",name:"General"},{id:"skill",name:"Skills"},{id:"sc",name:"Specialty Change"},{id:"ees",name:"Exclusive Equip"},{id:"skin",name:"Skins"},{id:"changelog",name:"Changelog"}],tab:s.currentTab,onChange:t[0]||(t[0]=e=>s.currentTab=e.id)},null,8,["tab"]),(0,a.wy)((0,a.Wm)(c,{dataProp:l.dataProp},null,8,["dataProp"]),[[o.F8,"general"===s.currentTab]]),(0,a.wy)((0,a.Wm)(d,{"prop-data":l.dataProp.skills,hero:l.dataProp},null,8,["prop-data","hero"]),[[o.F8,"skill"===s.currentTab]]),(0,a.wy)((0,a.Wm)(u,{modelValue:l.dataProp.ex_equip,hero:l.dataProp},null,8,["modelValue","hero"]),[[o.F8,"ees"===s.currentTab]]),(0,a.wy)((0,a.Wm)(h,{modelValue:l.dataProp.skin,hero:l.dataProp},null,8,["modelValue","hero"]),[[o.F8,"skin"===s.currentTab]])])}var re=l(1343);const ce={class:"editor-variable-group"},de=(0,a._)("h2",null,"General",-1),ue={class:"flex",style:{"flex-wrap":"wrap"}},he={class:"col-1 col-lg-3"},pe={class:"col-1 col-lg-3"},me={class:"col-1 col-lg-3"},fe={class:"flex flex-wrap"},ge={class:"col-1 col-lg-2 pad-5"},ve={class:"col-1 col-lg-4 pad-5"},ye={class:"col-1 col-lg-4 pad-5"},be={class:"col-1 col-lg-4 pad-5"},_e={class:"flex flex-wrap"},Ve={class:"col-2 col-lg-4 pad-5"},we={class:"col-2 col-lg-4 pad-5"},ke={class:"col-2 col-lg-4 pad-5"},xe={class:"col-2 col-lg-4 pad-5"},Se={class:"editor-variable-group"},De=(0,a._)("h2",null,"Imprint",-1),Ee={class:"flex flex-wrap"},Oe={class:"col-1 col-lg-3 pad-5"},Ne=(0,a._)("i",null,"Imprint Concentration",-1),Ce=(0,a._)("br",null,null,-1),Me={class:"col-1 col-lg-3 pad-5"},Le=(0,a._)("i",null,"Imprint Release",-1),Ue=(0,a._)("br",null,null,-1),We={class:"col-1 col-lg-3 pad-5"},Ie=(0,a._)("i",null,"Slots",-1),Te=(0,a._)("br",null,null,-1),Pe={class:"editor-variable-group"},Re=(0,a._)("h2",null,"Stats",-1),Fe={class:"flex flex-wrap"},$e={class:"col-2 col-lg-4"},Ze={class:"col-2 col-lg-4"},He={class:"col-2 col-lg-4"},je={class:"col-2 col-lg-4"},Ae={class:"editor-variable-group"},qe=(0,a._)("h2",null,"Nicknames",-1),Ge={class:"pad-5"},Be={class:"editor-variable-group"},Ke=(0,a._)("h2",null,"Gacha Get Line",-1),ze={class:"pad-5"},Je={class:"editor-variable-group"},Ye=(0,a._)("h2",null,"One line",-1),Qe={class:"pad-5"},Xe={class:"editor-variable-group"},et=(0,a._)("h2",null,"Story",-1),tt={class:"pad-5"},lt={class:"editor-variable-group"},at=(0,a._)("h2",null,"Voice acting",-1),it={class:"flex",style:{"flex-wrap":"wrap"}},ot={class:"col-1 col-lg-3"},st={class:"col-1 col-lg-3"};function nt(e,t,l,i,s,n){const r=(0,a.up)("MaterialInput"),c=(0,a.up)("Multiselect"),d=(0,a.up)("NicknamesComponent");return(0,a.wg)(),(0,a.iD)("div",ce,[de,(0,a._)("div",ue,[(0,a._)("div",he,[(0,a.Wm)(r,{modelValue:n.localData.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.localData.name=e),type:"string",placeholder:"Name"},null,8,["modelValue"])]),(0,a._)("div",pe,[(0,a.Wm)(r,{modelValue:n.localData._id,"onUpdate:modelValue":t[1]||(t[1]=e=>n.localData._id=e),type:"string",placeholder:"_id"},null,8,["modelValue"])]),(0,a._)("div",me,[(0,a.Wm)(r,{modelValue:n.localData.id,"onUpdate:modelValue":t[2]||(t[2]=e=>n.localData.id=e),type:"string",placeholder:"InGame ID"},null,8,["modelValue"])])]),(0,a._)("div",fe,[(0,a._)("div",ge,[(0,a.Wm)(c,{modelValue:n.localData.tags,"onUpdate:modelValue":t[3]||(t[3]=e=>n.localData.tags=e),placeholder:"Tags",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.tags},null,8,["modelValue","options"])]),(0,a.wy)((0,a._)("div",ve,[(0,a.Wm)(r,{modelValue:n.localData.collaboration_ip,"onUpdate:modelValue":t[4]||(t[4]=e=>n.localData.collaboration_ip=e),type:"string",placeholder:"Collab IP name",style:{margin:"0","margin-top":"-10px"}},null,8,["modelValue"])],512),[[o.F8,n.localData.tags.includes(2)]]),(0,a._)("div",ye,[(0,a.Wm)(c,{modelValue:n.localData.sex,"onUpdate:modelValue":t[5]||(t[5]=e=>n.localData.sex=e),mode:"single",removable:!1,placeholder:"Gender",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.gender},null,8,["modelValue","options"])]),(0,a._)("div",be,[(0,a.Wm)(c,{modelValue:n.localData.related_artifact,"onUpdate:modelValue":t[6]||(t[6]=e=>n.localData.related_artifact=e),mode:"single",removable:!1,placeholder:"Related Artifact (Rate up / Exclusive)",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.artifactList},null,8,["modelValue","options"])])]),(0,a._)("div",_e,[(0,a._)("div",Ve,[(0,a.Wm)(c,{modelValue:n.localData.rarity,"onUpdate:modelValue":t[7]||(t[7]=e=>n.localData.rarity=e),mode:"single",placeholder:"Rarity",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.rarity},null,8,["modelValue","options"])]),(0,a._)("div",we,[(0,a.Wm)(c,{modelValue:n.localData.attribute,"onUpdate:modelValue":t[8]||(t[8]=e=>n.localData.attribute=e),mode:"single",placeholder:"Attribute",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.attribute},null,8,["modelValue","options"])]),(0,a._)("div",ke,[(0,a.Wm)(c,{modelValue:n.localData.role,"onUpdate:modelValue":t[9]||(t[9]=e=>n.localData.role=e),mode:"single",placeholder:"Role",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.role},null,8,["modelValue","options"])]),(0,a._)("div",xe,[(0,a.Wm)(c,{modelValue:n.localData.zodiac,"onUpdate:modelValue":t[10]||(t[10]=e=>n.localData.zodiac=e),mode:"single",placeholder:"Zodiac",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.zodiac},null,8,["modelValue","options"])])]),(0,a._)("div",Se,[De,(0,a._)("div",Ee,[(0,a._)("div",Oe,[Ne,Ce,(0,a.Wm)(c,{modelValue:n.localData.self_devotion.type,"onUpdate:modelValue":t[11]||(t[11]=e=>n.localData.self_devotion.type=e),modelModifiers:{number:!0},mode:"single",placeholder:"Imprint Concentration",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.stats},null,8,["modelValue","options"])]),(0,a._)("div",Me,[Le,Ue,(0,a.Wm)(c,{modelValue:n.localData.devotion.type,"onUpdate:modelValue":t[12]||(t[12]=e=>n.localData.devotion.type=e),modelModifiers:{number:!0},mode:"single",placeholder:"Imprint Release",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.stats},null,8,["modelValue","options"])]),(0,a._)("div",We,[Ie,Te,(0,a.Wm)(c,{value:n.localData.devotion.slots.join(","),mode:"single",placeholder:"Slots",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.devotionSlots,onChange:n.slotsChange},null,8,["value","options","onChange"])])])]),(0,a._)("div",Pe,[Re,(0,a._)("div",Fe,[(0,a._)("div",$e,[(0,a.Wm)(r,{modelValue:n.localData.stats.bra,"onUpdate:modelValue":t[13]||(t[13]=e=>n.localData.stats.bra=e),modelModifiers:{number:!0},type:"number",placeholder:"bra"},null,8,["modelValue"])]),(0,a._)("div",Ze,[(0,a.Wm)(r,{modelValue:n.localData.stats.int,"onUpdate:modelValue":t[14]||(t[14]=e=>n.localData.stats.int=e),modelModifiers:{number:!0},type:"number",placeholder:"int"},null,8,["modelValue"])]),(0,a._)("div",He,[(0,a.Wm)(r,{modelValue:n.localData.stats.fai,"onUpdate:modelValue":t[15]||(t[15]=e=>n.localData.stats.fai=e),modelModifiers:{number:!0},type:"number",placeholder:"fai"},null,8,["modelValue"])]),(0,a._)("div",je,[(0,a.Wm)(r,{modelValue:n.localData.stats.des,"onUpdate:modelValue":t[16]||(t[16]=e=>n.localData.stats.des=e),modelModifiers:{number:!0},type:"number",placeholder:"des"},null,8,["modelValue"])])])]),(0,a._)("div",Ae,[qe,(0,a._)("div",Ge,[(0,a.Wm)(d,{modelValue:n.localData.nicknames,"onUpdate:modelValue":t[17]||(t[17]=e=>n.localData.nicknames=e)},null,8,["modelValue"])])]),(0,a._)("div",Be,[Ke,(0,a._)("div",ze,[(0,a.wy)((0,a._)("textarea",{class:"nice-input","onUpdate:modelValue":t[18]||(t[18]=e=>n.localData.get_line=e)},null,512),[[o.nr,n.localData.get_line]])])]),(0,a._)("div",Je,[Ye,(0,a._)("div",Qe,[(0,a.wy)((0,a._)("textarea",{class:"nice-input","onUpdate:modelValue":t[19]||(t[19]=e=>n.localData.description=e)},null,512),[[o.nr,n.localData.description]])])]),(0,a._)("div",Xe,[et,(0,a._)("div",tt,[(0,a.wy)((0,a._)("textarea",{class:"nice-input","onUpdate:modelValue":t[20]||(t[20]=e=>n.localData.story=e)},null,512),[[o.nr,n.localData.story]])])]),(0,a._)("div",lt,[at,(0,a._)("div",it,[(0,a._)("div",ot,[(0,a.Wm)(r,{modelValue:n.localData.voice_acting.en,"onUpdate:modelValue":t[21]||(t[21]=e=>n.localData.voice_acting.en=e),type:"string",placeholder:"EN VA"},null,8,["modelValue"])]),(0,a._)("div",st,[(0,a.Wm)(r,{modelValue:n.localData.voice_acting.ja,"onUpdate:modelValue":t[22]||(t[22]=e=>n.localData.voice_acting.ja=e),type:"string",placeholder:"JP VA"},null,8,["modelValue"])])])])])}var rt=l(2878),ct=l(4710);const dt={style:{gap:"10px"}},ut={class:"flex-fill"},ht=["onUpdate:modelValue"],pt={class:"no-flex-shrink"},mt=["onClick"],ft=(0,a._)("i",{class:"fa fa-minus"},null,-1),gt=[ft],vt=(0,a._)("span",null,"Add new nickname",-1),yt=[vt];function bt(e,t,l,i,s,n){const r=(0,a.Q2)("ripple-effect");return(0,a.wg)(),(0,a.iD)("div",dt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.value,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,style:{width:"100%","max-width":"250px",display:"inline-flex"}},[(0,a._)("div",ut,[(0,a.wy)((0,a._)("input",{class:"nice-input",placeholder:"Enter nickname","onUpdate:modelValue":e=>n.value[t]=e},null,8,ht),[[o.nr,n.value[t]]])]),(0,a._)("div",pt,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{onClick:e=>n.removeNickname(t),class:"material-button flat warn"},gt,8,mt)),[[r]])])])))),128)),(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{onClick:t[0]||(t[0]=(...e)=>n.addNewNickname&&n.addNewNickname(...e)),class:"material-button basic primary"},yt)),[[r]])])}var _t={emits:["update:modelValue"],props:{modelValue:{}},computed:{value:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}}},methods:{addNewNickname(){this.value.push("")},removeNickname(e){this.value.splice(e,1)}}};const Vt=(0,te.Z)(_t,[["render",bt]]);var wt=Vt,kt=l(8753),xt=l(9426);const St=Object.keys(R.pJ).map((e=>({id:Number(e),name:R.pJ[e]}))),Dt=[{id:0,name:"Unknown"},{id:1,name:"Male"},{id:2,name:"Female"}],Et=[5,4,3,2,1].map((e=>({id:e,name:e}))),Ot=[{id:"fire",name:"Fire",src:kt.cK+"/img/cm_icon_promfire.png"},{id:"ice",name:"Ice",src:kt.cK+"/img/cm_icon_promice.png"},{id:"wind",name:"Grass",src:kt.cK+"/img/cm_icon_promwind.png"},{id:"light",name:"Light",src:kt.cK+"/img/cm_icon_promlight.png"},{id:"dark",name:"Dark",src:kt.cK+"/img/cm_icon_promdark.png"}],Nt=[{id:"common",name:"Common (Artifacts)"},{id:"warrior",name:"Warrior",src:kt.cK+"/img/cm_icon_role_warrior.png"},{id:"knight",name:"Knight",src:kt.cK+"/img/cm_icon_role_knight.png"},{id:"assassin",name:"Thief",src:kt.cK+"/img/cm_icon_role_assassin.png"},{id:"ranger",name:"Ranger",src:kt.cK+"/img/cm_icon_role_ranger.png"},{id:"mage",name:"Mage",src:kt.cK+"/img/cm_icon_role_mage.png"},{id:"manauser",name:"Soul-weaver",src:kt.cK+"/img/cm_icon_role_manauser.png"}],Ct=[{id:"ram",name:"Aries"},{id:"bull",name:"Taurus"},{id:"twins",name:"Gemini"},{id:"crab",name:"Cancer"},{id:"lion",name:"Leo"},{id:"maiden",name:"Virgo"},{id:"scales",name:"Libra"},{id:"scorpion",name:"Scorpio"},{id:"archer",name:"Sagittarius"},{id:"goat",name:"Capricorn"},{id:"waterbearer",name:"Aquarius"},{id:"fish",name:"Pisces"}].map((e=>({id:e.id,name:e.name,src:(0,R.OR)(e.id)}))),Mt=kt.ot.map((e=>({id:e,name:(0,xt.Z)(e)+(-1!==e.indexOf("rate")?" %":""),src:kt.cK+"/img/cm_icon_stat_"+e.replace("_rate","")+".png"}))),Lt=[{id:[1,1,1,1],name:"All"},{id:[1,1,0,0],name:"Bottom Right"},{id:[1,0,1,0],name:"Top Right"},{id:[1,0,0,1],name:"Left Right"},{id:[0,1,1,0],name:"Top Bottom"},{id:[0,1,0,1],name:"Bottom Left"},{id:[0,0,1,1],name:"Top Left"}].map((e=>{const t=e.id;var l="";return l=t?t.map(((e,t)=>e?t+1:null)).filter((e=>e)).join("")||"0":0,{src:kt.cK+"/img/hero_dedi_p_"+l+".png",name:e.name,id:t.join(",")}}));var Ut={components:{MaterialInput:rt.Z,Multiselect:ct.Z,NicknamesComponent:wt},props:{dataProp:{type:Object,default:()=>({})}},inject:["artifactList"],computed:{localData:{get(){return this.dataProp},set(e){return this.$emit("update:modelValue",e)}},multiselectOptions(){return{tags:St,gender:Dt,rarity:Et,role:Nt,attribute:Ot,zodiac:Ct,stats:Mt,devotionSlots:Lt}}},watch:{"localData.name":function(){this.localData._id=(this.localData.name||"").trim().replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"-").toLowerCase()},"localData.tags":function(){this.localData.tags.includes(2)||(this.localData.collaboration_ip={})}},created(){console.log(this.localData)},methods:{slotsChange(e){if(!e)return this.localData.devotion.slots=[];this.localData.devotion.slots=e.split(",").map(Number)}}};const Wt=(0,te.Z)(Ut,[["render",nt]]);var It=Wt;function Tt(e,t,l,i,s,n){const r=(0,a.up)("Tabs"),c=(0,a.up)("Skill");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r,{tabs:n.skillTabs,tab:s.currentSkill,onChange:t[0]||(t[0]=e=>n.changeTab(e.id))},null,8,["tabs","tab"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.localData,((e,t)=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{key:t,skill:e,hero:l.hero,onDelete:n.deleteSkill},null,8,["skill","hero","onDelete"])),[[o.F8,t===s.currentSkill]]))),128))])}const Pt=(0,a._)("i",{class:"fa fa-trash"},null,-1),Rt=(0,a._)("span",null," Delete Skill ",-1),Ft=[Pt,Rt],$t={class:"editor-variable-group"},Zt=(0,a._)("h2",null,"General",-1),Ht={class:"flex flex-wrap"},jt=["src"],At={class:"col-1 col-lg-3"},qt={class:"col-1 col-lg-3"},Gt={class:"flex flex-wrap"},Bt={class:"col-1 col-lg-4"},Kt={class:"col-2 col-lg-4"},zt={class:"col-2 col-lg-4"},Jt={class:"flex flex-wrap items-center pad-5"},Yt={class:"col-2 col-lg-4"},Qt={class:"col-2 col-lg-4"},Xt={class:"col-2 col-lg-4"},el={key:0,class:"col-2 col-lg-4"},tl={class:"editor-variable-group"},ll=(0,a._)("h2",null,"Skill Enhancements",-1),al={key:0,class:"editor-subgroup"},il=(0,a._)("h1",null," Awakened ",-1);function ol(e,t,l,i,o,s){const n=(0,a.up)("MaterialInput"),r=(0,a.up)("MaterialCheckbox"),c=(0,a.up)("GenericSkillDescription"),d=(0,a.up)("SkillEnhancements"),u=(0,a.up)("SkillEditor",!0);return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("button",{class:"material-button flat warn",style:{float:"right"},onClick:t[0]||(t[0]=(...e)=>s.deleteSkill&&s.deleteSkill(...e))},Ft),(0,a._)("div",$t,[Zt,(0,a._)("div",Ht,[(0,a._)("div",null,[(0,a._)("img",{src:s.skillIcon,alt:"skill-icon"},null,8,jt)]),(0,a._)("div",At,[(0,a.Wm)(n,{modelValue:s.localSkill.name,"onUpdate:modelValue":t[1]||(t[1]=e=>s.localSkill.name=e),type:"string",placeholder:"Name"},null,8,["modelValue"])]),(0,a._)("div",qt,[(0,a.Wm)(n,{modelValue:s.localSkill.icon,"onUpdate:modelValue":t[2]||(t[2]=e=>s.localSkill.icon=e),type:"string",placeholder:"Skill icon (If special hero)"},null,8,["modelValue"])])]),(0,a._)("div",Gt,[(0,a._)("div",Bt,[(0,a.Wm)(n,{modelValue:s.localSkill.skill,"onUpdate:modelValue":t[3]||(t[3]=e=>s.localSkill.skill=e),modelModifiers:{number:!0},type:"number",placeholder:"Skill Number"},null,8,["modelValue"])]),(0,a._)("div",Kt,[(0,a.Wm)(n,{modelValue:s.localSkill.cooldown,"onUpdate:modelValue":t[4]||(t[4]=e=>s.localSkill.cooldown=e),modelModifiers:{number:!0},type:"number",placeholder:"Cooldown"},null,8,["modelValue"])]),(0,a._)("div",zt,[(0,a.Wm)(n,{modelValue:s.localSkill.soul_gain,"onUpdate:modelValue":t[5]||(t[5]=e=>s.localSkill.soul_gain=e),modelModifiers:{number:!0},type:"number",placeholder:"Soul gain"},null,8,["modelValue"])])]),(0,a._)("div",Jt,[(0,a._)("div",Yt,[(0,a.Wm)(r,{modelValue:s.localSkill.can_enhance,"onUpdate:modelValue":t[6]||(t[6]=e=>s.localSkill.can_enhance=e),type:"string"},{default:(0,a.w5)((()=>[(0,a.Uk)("Has Awakening")])),_:1},8,["modelValue"])]),(0,a._)("div",Qt,[(0,a.Wm)(r,{modelValue:s.localSkill.passive,"onUpdate:modelValue":t[7]||(t[7]=e=>s.localSkill.passive=e),type:"string"},{default:(0,a.w5)((()=>[(0,a.Uk)("Passive skill")])),_:1},8,["modelValue"])]),(0,a._)("div",Xt,[(0,a.Wm)(r,{modelValue:s.localSkill.soulburn,"onUpdate:modelValue":t[8]||(t[8]=e=>s.localSkill.soulburn=e),type:"string"},{default:(0,a.w5)((()=>[(0,a.Uk)("Soulburn")])),_:1},8,["modelValue"])]),s.localSkill.soulburn?((0,a.wg)(),(0,a.iD)("div",el,[(0,a.Wm)(n,{modelValue:s.localSkill.soul_requirement,"onUpdate:modelValue":t[9]||(t[9]=e=>s.localSkill.soul_requirement=e),modelModifiers:{number:!0},type:"number",placeholder:"Soul requirement"},null,8,["modelValue"])])):(0,a.kq)("",!0)])]),(0,a.Wm)(c,{modelValue:s.localSkill,"onUpdate:modelValue":t[10]||(t[10]=e=>s.localSkill=e)},null,8,["modelValue"]),(0,a._)("div",tl,[ll,(0,a.Wm)(d,{modelValue:s.localSkill.enhancements,"onUpdate:modelValue":t[11]||(t[11]=e=>s.localSkill.enhancements=e),"show-stats-increase":l.skill.stats.length>0},null,8,["modelValue","show-stats-increase"])]),s.localSkill.can_enhance?((0,a.wg)(),(0,a.iD)("div",al,[il,(0,a.Wm)(u,{skill:s.localSkill.awakened,hero:l.hero,onDelete:t[12]||(t[12]=e=>s.localSkill.can_enhance=!1)},null,8,["skill","hero"])])):(0,a.kq)("",!0)])}var sl=l(4618);const nl={class:"editor-variable-group"},rl=(0,a._)("h2",null,"Skill",-1),cl={class:"flex flex-wrap",style:{"align-items":"end"}},dl={class:"col-1 col-lg-2 pad-5"},ul={key:0,class:"col-1 col-lg-2 pad-5"},hl=(0,a._)("div",null,[(0,a._)("i",{class:"text-small"},"Soulburn")],-1),pl={key:0},ml=(0,a._)("h3",null,"Stat increase",-1),fl=(0,a._)("span",null,"New Stat",-1),gl=[fl],vl={class:"editor-variable-group"},yl=(0,a._)("h2",null,"Buff / Debuff",-1),bl={class:"flex",style:{"flex-wrap":"wrap"}},_l={class:"col-1 col-lg-3 pad-5"},Vl={class:"col-1 col-lg-3 pad-5"},wl={class:"col-1 col-lg-3 pad-5"},kl=(0,a._)("i",{style:{"font-size":"0.8em"}},"For heroes specify single attack/multi target/AoE/non attack skill",-1);function xl(e,t,l,i,o,s){const n=(0,a.up)("HighlightInput"),r=(0,a.up)("SkillStats"),c=(0,a.up)("Multiselect"),d=(0,a.Q2)("ripple-effect");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",nl,[rl,(0,a._)("div",cl,[(0,a._)("div",dl,[(0,a.Wm)(n,{highlight:o.rules,modelValue:o.visibleSkill,"onUpdate:modelValue":t[0]||(t[0]=e=>o.visibleSkill=e),class:"nice-input skill",onBlur:s.updateRealSkill},null,8,["highlight","modelValue","onBlur"])]),l.modelValue.soulburn?((0,a.wg)(),(0,a.iD)("div",ul,[hl,(0,a.Wm)(n,{highlight:o.rules,modelValue:s.localData.soul_description,"onUpdate:modelValue":t[1]||(t[1]=e=>s.localData.soul_description=e),class:"nice-input skill"},null,8,["highlight","modelValue"])])):(0,a.kq)("",!0)]),l.bonusStats?((0,a.wg)(),(0,a.iD)("div",pl,[ml,(0,a.Wm)(r,{modelValue:s.localData.stats,"onUpdate:modelValue":t[2]||(t[2]=e=>s.localData.stats=e),"can-remove":!0},null,8,["modelValue"]),(0,a._)("div",null,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{class:"material-button flat primary",onClick:t[3]||(t[3]=(...e)=>s.addStatIncrease&&s.addStatIncrease(...e))},gl)),[[d]])])])):(0,a.kq)("",!0)]),(0,a._)("div",vl,[yl,(0,a._)("div",bl,[(0,a._)("div",_l,[(0,a.Wm)(c,{modelValue:s.localData.buff,"onUpdate:modelValue":t[4]||(t[4]=e=>s.localData.buff=e),placeholder:"Buffs",style:{"--ms-tag-bg":"var(--font-color-primary)"},options:s.buffList},null,8,["modelValue","options"])]),(0,a._)("div",Vl,[(0,a.Wm)(c,{modelValue:s.localData.debuff,"onUpdate:modelValue":t[5]||(t[5]=e=>s.localData.debuff=e),placeholder:"Debuffs",style:{"--ms-tag-bg":"var(--font-color-warn)"},options:s.debuffList},null,8,["modelValue","options"])]),(0,a._)("div",wl,[(0,a.Wm)(c,{modelValue:s.localData.common,"onUpdate:modelValue":t[6]||(t[6]=e=>s.localData.common=e),placeholder:"Common effects",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:s.commonList},null,8,["modelValue","options"]),kl])])])])}const Sl={contenteditable:"true"};function Dl(e,t,l,i,o,s){return(0,a.wg)(),(0,a.iD)("div",Sl)}var El=l(1501),Ol=l(6163),Nl={"&":"&amp;","<":"&lt;",">":"&gt;"};function Cl(e){return void 0===e}var Ml={emits:["update:modelValue"],props:{highlight:{type:Array,default:()=>[]},modelValue:{type:String,default:""},highlightStyle:{type:[String,Object],default:"background-color:yellow"},highlightEnabled:{type:Boolean,default:!0},highlightDelay:{type:Number,default:500},caseSensitive:{type:Boolean,default:!1},fireOn:{type:String,default:"keydown"},fireOnEnabled:{type:Boolean,default:!0}},data(){return{internalValue:"",htmlOutput:"",debouncedHandler:null}},mounted(){this.fireOnEnabled&&this.$el.addEventListener(this.fireOn,this.handleChange),this.internalValue=this.modelValue,this.processHighlights()},watch:{highlightStyle(){this.processHighlights()},highlight(){this.processHighlights()},modelValue(){this.internalValue!=this.modelValue&&(this.internalValue=this.modelValue,this.processHighlights())},highlightEnabled(){this.processHighlights()},caseSensitive(){this.processHighlights()},htmlOutput(){var e=this.saveSelection(this.$el);this.$el.innerHTML=this.htmlOutput,this.restoreSelection(this.$el,e)}},computed:{sortedHighlights(){return this.normalizedHighlights(this.highlight)}},methods:{getCleanText(){function e(t,l){if(3===t.nodeType)l.push(t.nodeValue);else for(let a of t.childNodes){const t=a.getAttribute?a.getAttribute("data-text"):null;t?l.push(t):e(a,l)}}var t=[];return e(this.$el,t),t.join("")},handleChange(){this.debouncedHandler=(0,Ol.Ds)((function(){const e=this.$el.textContent;this.internalValue!==e&&(this.internalValue=e,this.processHighlights())}),this.highlightDelay),this.debouncedHandler()},processHighlights(){if(!this.highlightEnabled)return this.htmlOutput=this.internalValue,void this.$emit("input",this.internalValue);var e=new El.ZP,t=[],l=this.sortedHighlights;if(l){for(var a=0;a<l.length;a++){var i=l[a],o=[];if(i.text&&("string"==typeof i.text&&(o=this.getIndicesOf(i.text,this.internalValue,Cl(i.caseSensitive)?this.caseSensitive:i.caseSensitive),o.forEach((t=>{var l=t+i.text.length-1;this.insertRange(t,l,i,e)}))),"[object RegExp]"===Object.prototype.toString.call(i.text)&&(o=this.getRegexIndices(i.text,this.internalValue),o.forEach((t=>{this.insertRange(t.start,t.end,i,e)})))),void 0!=i.start&&void 0!=i.end&&i.start<i.end){var s=i.start,n=i.end-1;this.insertRange(s,n,i,e)}}t=e.search(0,this.internalValue.length),t=t.sort(((e,t)=>e.start-t.start));for(var r="",c=0,d=0;d<t.length;d++){var u=t[d];r+=this.safe_tags_replace(this.internalValue.substring(c,u.start)),t[d].create?r+=t[d].create(this.safe_tags_replace(this.internalValue.substring(u.start,u.end+1))):r+="<span style='"+(t[d].style||"")+"' class='"+(t[d].class||"")+"'>"+this.safe_tags_replace(this.internalValue.substring(u.start,u.end+1))+"</span>",c=u.end+1}c<this.internalValue.length&&(r+=this.safe_tags_replace(this.internalValue.substring(c,this.internalValue.length)))," "==r[r.length-1]&&(r=r.substring(0,r.length-1),r+="&nbsp;"),this.htmlOutput=r,this.$emit("update:modelValue",this.internalValue)}},insertRange(e,t,l,a){var i=a.search(e,t),o=i.reduce(((e,t)=>Math.max(t.end-t.start,e)),0);0==i.length?a.insert(e,t,{start:e,end:t,style:l.style,class:l.class,create:l.create}):t-e>o&&(i.forEach((e=>{a.remove(e.start,e.end,e)})),a.insert(e,t,{start:e,end:t,style:l.style,class:l.class,create:l.create}))},normalizedHighlights(){if(null==this.highlight)return null;if("[object RegExp]"===Object.prototype.toString.call(this.highlight)||"string"==typeof this.highlight)return[{text:this.highlight}];if("[object Array]"===Object.prototype.toString.call(this.highlight)&&this.highlight.length>0){var e="string"==typeof this.highlightStyle?this.highlightStyle:Object.keys(this.highlightStyle).map((e=>e+":"+this.highlightStyle[e])).join(";")+";",t=this.highlight.filter((e=>e==Object.prototype.toString.call(e)==="[object RegExp]")),l=this.highlight.filter((e=>e==Object.prototype.toString.call(e)!=="[object RegExp]"));return l.map((t=>t.text||"string"==typeof t?{text:t.text||t,style:t.style||(t.class?"":e),class:t.class||"",create:t.create||null,caseSensitive:t.caseSensitive}:void 0!=t.start&&void 0!=t.end?{style:t.style||(t.class?"":e),start:t.start,end:t.end,class:t.class||"",create:t.create||null,caseSensitive:t.caseSensitive}:void console.error("Please provide a valid highlight object or string"))).sort(((e,t)=>e.text&&t.text?e.text>t.text:e.start==t.start?e.end<t.end:e.start<t.start)).concat(t)}return console.error("Expected a string or an array of strings"),null},safe_tags_replace(e){return e.replace(/[&<>]/g,this.replaceTag)},replaceTag(e){return Nl[e]||e},getRegexIndices(e,t){if(!e.global)return console.error("Expected "+e+" to be global"),[];e=RegExp(e);var l=[],a=null;while(null!=(a=e.exec(t)))l.push({start:a.index,end:a.index+a[0].length-1});return l},getIndicesOf(e,t,l){var a=e.length;if(0==a)return[];var i,o=0,s=[];l||(t=t.toLowerCase(),e=e.toLowerCase());while((i=t.indexOf(e,o))>-1)s.push(i),o=i+a;return s},saveSelection(e){var t;if(window.getSelection&&document.createRange){var l=window.getSelection();if(!l||0==l.rangeCount)return;var a=l.getRangeAt(0),i=a.cloneRange();return i.selectNodeContents(e),i.setEnd(a.startContainer,a.startOffset),t=i.toString().length,{start:t,end:t+a.toString().length}}if(document.selection){var o=document.selection.createRange(),s=document.body.createTextRange();return s.moveToElementText(e),s.setEndPoint("EndToStart",o),t=s.text.length,{start:t,end:t+o.text.length}}},restoreSelection(e,t){if(t)if(window.getSelection&&document.createRange){var l=0,a=document.createRange();a.setStart(e,0),a.collapse(!0);var i,o=[e],s=!1,n=!1;while(!n&&(i=o.pop()))if(3==i.nodeType){var r=l+i.length;!s&&t.start>=l&&t.start<=r&&(a.setStart(i,t.start-l),s=!0),s&&t.end>=l&&t.end<=r&&(a.setEnd(i,t.end-l),n=!0),l=r}else{var c=i.childNodes.length;while(c--)o.push(i.childNodes[c])}var d=window.getSelection();d.removeAllRanges(),d.addRange(a)}else if(document.selection){var u=document.body.createTextRange();u.moveToElementText(e),u.collapse(!0),u.moveEnd("character",t.end),u.moveStart("character",t.start),u.select()}}}};const Ll=(0,te.Z)(Ml,[["render",Dl],["__scopeId","data-v-abb36ebe"]]);var Ul=Ll;function Wl(e,t,l,i,o,s){const n=(0,a.up)("SkillStats",!0);return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.localModel,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"flex flex-wrap",style:{"max-width":"600px"},key:t},[(0,a.Wm)(n,{modelValue:s.localModel[t],"onUpdate:modelValue":e=>s.localModel[t]=e,"can-remove":l.canRemove,onDelete:s.removeStat},null,8,["modelValue","onUpdate:modelValue","can-remove","onDelete"])])))),128)}const Il={class:"col-5 pad-5"},Tl={class:"flex-fill pad-5"},Pl={class:"no-flex-shrink pad-5"},Rl=(0,a._)("i",{class:"fa fa-minus"},null,-1),Fl=[Rl];function $l(e,t,l,i,s,n){const r=(0,a.up)("PercentageInput"),c=(0,a.up)("Multiselect");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Il,[(0,a.Wm)(r,{class:"nice-input",modelValue:n.localModel.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.localModel.value=e)},null,8,["modelValue"])]),(0,a._)("div",Tl,[(0,a.Wm)(c,{options:n.stats,mode:"single",modelValue:n.localModel.type,"onUpdate:modelValue":t[1]||(t[1]=e=>n.localModel.type=e)},null,8,["options","modelValue"])]),(0,a._)("div",Pl,[(0,a.wy)((0,a._)("button",{class:"material-button flat warn",onClick:t[2]||(t[2]=(...e)=>n.emitDelete&&n.emitDelete(...e))},Fl,512),[[o.F8,l.canRemove]])])],64)}function Zl(e,t,l,i,s,n){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.localValue=e)},null,512)),[[o.nr,n.localValue,void 0,{lazy:!0}]])}var Hl={emits:["update:modelValue"],props:{modelValue:{type:Number,default:0}},computed:{localValue:{get(){return Math.abs(this.modelValue)<1?Math.round(100*this.modelValue*100)/100+"%":this.modelValue},set(e){e||(e="0"),e=-1!==e.indexOf("%")?parseFloat(e.replace("%"))/100:parseFloat(e),this.$emit("update:modelValue",e)}}}};const jl=(0,te.Z)(Hl,[["render",Zl]]);var Al=jl,ql={emits:["update:modelValue","delete"],components:{Multiselect:ct.Z,PercentageInput:Al},props:{modelValue:{type:Object,default:()=>({})},canRemove:{type:Boolean,default:!0}},computed:{localModel:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}},stats(){return Mt}},methods:{emitDelete(){this.$emit("delete",this.localModel)}}};const Gl=(0,te.Z)(ql,[["render",$l]]);var Bl=Gl,Kl={emits:["update:modelValue"],components:{SkillStats:Bl},props:{modelValue:{type:Array,default:()=>[]},canRemove:{type:Boolean,default:!0}},computed:{localModel:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}}},methods:{removeStat(e){var t=this.localModel.indexOf(e);-1!==t&&this.localModel.splice(t,1)}}};const zl=(0,te.Z)(Kl,[["render",Wl]]);var Jl=zl,Yl={emits:["update:modelValue"],components:{Multiselect:ct.Z,HighlightInput:Ul,SkillStats:Jl},inject:["buffList","debuffList","commonList"],props:{modelValue:{type:Object,default:()=>({})},bonusStats:{type:Boolean,default:!0}},computed:{localData:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}}},watch:{"modelValue.description":{immediate:!0,handler(e){this.$nextTick((()=>{var t=JSON.parse(JSON.stringify(this.modelValue.values));this.visibleSkill=e.replace(/\{\{\s*variable\s*\}\}/gi,(e=>{var l=t.splice(0,1)[0];return l?(l.map||(l=[l]),"{{ "+l.map((e=>Math.abs(e)<1?Math.round(1e3*e*100)/100+"%":e)).join(" / ")+" }}"):e}))}))}}},data(){return{visibleSkill:"",rules:[{text:new RegExp("--(.+?)--","g"),class:"debuff",create:e=>'<span style="opacity: 0.5;">--</span><span class="debuff">'+e.replace(/--/g,"")+'</span><span style="opacity: 0.5;">--</span>'},{text:new RegExp(/\{\{([0-9/% .,-]+?)\}\}/,"g"),class:"variable",create:e=>'<span style="opacity: 0.5;">{{</span><span class="variable">'+e.replace(/\{\{|\}\}/g,"")+'</span><span style="opacity: 0.5;">}}</span>'},{text:new RegExp(/\*\*(.+?)\*\*/,"g"),class:"common",create:e=>'<span style="opacity: 0.5;">**</span><span class="common">'+e.replace(/\*\*/g,"")+'</span><span style="opacity: 0.5;">**</span>'},{text:new RegExp(/\+\+(.+?)\+\+/,"g"),class:"buff",create:e=>'<span style="opacity: 0.5;">++</span><span class="buff">'+e.replace(/\+\+/g,"")+'</span><span style="opacity: 0.5;">++</span>'}]}},methods:{addStatIncrease(){this.localData.stats||(this.localData.stats=[]),this.localData.stats.push({type:"",value:0})},updateRealSkill(){const e=[];var t=this.visibleSkill.replace(/\{\{([0-9/% .,-]+?)\}\}/g,((t,l)=>{let a=l;if(!a)return"{{ }}";let i=a.split(/\s*\/\s*/).map((e=>-1!==e.indexOf("%")?parseFloat(e)/1e3:parseFloat(e)));return i.length<2&&i.push(2*i[0]),e.push(i),"{{variable}}"}));this.localData.values=e,this.localData.description=t.replace(/\s+/g," ")}}};const Ql=(0,te.Z)(Yl,[["render",xl]]);var Xl=Ql;const ea={class:"pad-5"},ta={class:"col-5 pad-5"},la={class:"flex-fill pad-5"},aa={class:"no-flex-shrink pad-5"},ia=["onClick"],oa=(0,a._)("i",{class:"fa fa-minus"},null,-1),sa=[oa],na={class:"col-1 pad-5",style:{padding:"0 0 20px 33px"}},ra={style:{"border-left":"solid 1px","padding-left":"10px"}},ca=(0,a._)("h4",null," Hero stats increase ",-1),da=["onClick"],ua=(0,a._)("i",{class:"fa fa-plus"},null,-1),ha=(0,a._)("span",null,"New Stat",-1),pa=[ua,ha],ma=(0,a._)("span",null," New Enhancement ",-1),fa=[ma];function ga(e,t,l,s,n,r){const c=(0,a.up)("PercentageInput"),d=(0,a.up)("Multiselect"),u=(0,a.up)("SkillStats");return(0,a.wg)(),(0,a.iD)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.localModel,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"flex flex-wrap items-center",key:t,style:{"max-width":"600px"}},[(0,a._)("div",ea,[(0,a._)("span",null," +"+(0,i.zw)(t+1),1)]),(0,a._)("div",ta,[(0,a.Wm)(c,{class:"nice-input",modelValue:r.localModel[t].value,"onUpdate:modelValue":e=>r.localModel[t].value=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,a._)("div",la,[(0,a.Wm)(d,{options:r.enhancementsList,mode:"single",modelValue:r.localModel[t].string,"onUpdate:modelValue":e=>r.localModel[t].string=e},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,a._)("div",aa,[(0,a._)("button",{class:"material-button flat warn",onClick:e=>r.deleteEnhancement(t)},sa,8,ia)]),(0,a.wy)((0,a._)("div",na,[(0,a._)("div",ra,[ca,(0,a.Wm)(u,{modelValue:r.localModel[t].stats,"onUpdate:modelValue":e=>r.localModel[t].stats=e,"can-remove":!0},null,8,["modelValue","onUpdate:modelValue"]),(0,a._)("button",{class:"material-button flat primary",onClick:e=>r.newStatIncrease(t)},pa,8,da)])],512),[[o.F8,l.showStatsIncrease]])])))),128)),(0,a._)("button",{class:"material-button flat primary",onClick:t[0]||(t[0]=(...e)=>r.newEnhacement&&r.newEnhacement(...e))},fa)])}var va={name:"SkillEnhancements",emits:["update:modelValue"],components:{Multiselect:ct.Z,PercentageInput:Al,SkillStats:Jl},inject:["enhancementsList"],props:{modelValue:{type:Object,default:()=>({})},showStatsIncrease:{type:Boolean,default:!0}},computed:{localModel:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}},stats(){return Mt}},methods:{newEnhacement(){this.localModel.length<15&&this.localModel.push({value:0,string:"",stats:[]})},deleteEnhancement(e){this.localModel.splice(e,1)},newStatIncrease(e){this.localModel[e].stats.push({type:"",value:0})},deleteStatIncrease(e,t){this.localModel[e].stats.splice(t,1)}}};const ya=(0,te.Z)(va,[["render",ga]]);var ba=ya,_a={name:"SkillEditor",emits:["update:modalValue","delete"],components:{MaterialInput:rt.Z,MaterialCheckbox:sl.Z,GenericSkillDescription:Xl,SkillEnhancements:ba},inject:["cdn"],props:{skill:{type:Object,default:()=>({})},hero:{type:Object,default:()=>({})}},computed:{localSkill:{get(){return this.skill},set(e){return this.$emit("update:modelValue",e)}},skillIcon(){return this.cdn+"/skill/sk_"+this.hero.id+"_"+this.localSkill.skill+".png"}},watch:{"localSkill.can_enhance":function(e){e?this.localSkill.awakened=this.copySkill():delete this.localSkill.awakened},"localSkill.soulburn":function(e){e?(this.localSkill.soul_requirement=10,this.localSkill.soul_description=""):(delete this.localSkill.soul_requirement,delete this.localSkill.soul_description)}},methods:{deleteSkill(){this.$emit("delete",this.skill)},copySkill(){let e=JSON.parse(JSON.stringify(this.localSkill));return delete e.can_enhance,e}}};const Va=(0,te.Z)(_a,[["render",ol]]);var wa=Va;function ka(e,t,l){void 0===e[t]&&(e[t]=l)}function xa(e,t){return[["_id","ex"+t.id+"0"+((t.ex_equip||[]).length+1)],["id","ex"+t.id+"0"+((t.ex_equip||[]).length+1)],["name",""],["release_dt",{}],["unit",t._id],["role",t.role],["rarity",t.rarity],["stat",{type:"",value:0}],["skills",[{},{},{}]]].forEach((t=>{ka(e,t[0],t[1])})),e.skills.forEach(((e,t)=>{Sa(e,t)})),e}function Sa(e,t){return[["_id",t],["skill",1],["description",""],["skill_description",""],["values",[]],["stats",[]],["buff",[]],["debuff",[]],["common",[]]].forEach((t=>{ka(e,t[0],t[1])})),e}function Da(e,t,l){return[["_id",""],["id",l.id+"_s0"+(t+1)],["type",""],["release_dt",{}],["name",""],["description",""],["tags",[]]].forEach((t=>{ka(e,t[0],t[1])})),e}function Ea(e){return[["id",""],["_id",""],["name",""],["base_id",null],["specialty_id",null],["rarity",0],["attribute",""],["role",""],["zodiac",""],["stats",{bra:0,int:0,fai:0,des:0}],["sex",0],["release_dt",{}],["tags",[]],["collaboration_ip",""],["nicknames",[]],["related_artifact",""],["get_line",""],["story",""],["description",""],["voice_acting",{}],["relationships",{}],["camping",{}],["devotion",{type:"",slots:[1,1,1,1]}],["self_devotion",{type:""}],["skills",[]],["ex_equip",[]],["skin",[]],["buff",[]],["debuff",[]],["common",[]],["changelog",[]]].forEach((t=>{ka(e,t[0],t[1])})),e.skills.forEach((t=>{Oa(t,e)})),e.skin.forEach(((t,l)=>{Da(t,l,e)})),e.ex_equip.forEach((t=>{xa(t,e)})),Na(e.stats),e}function Oa(e){return[["name",""],["description",""],["values",[]],["stats",[]],["passive",!1],["can_enhance",!1],["cooldown",0],["soul_gain",1],["buff",[]],["debuff",[]],["common",[]],["enhancements",[]]].forEach((t=>{ka(e,t[0],t[1])})),e}function Na(e){return[["bra",0],["int",0],["fai",0],["des",0],["skills",[]],["ex_equip",[]]].forEach((t=>{ka(e,t[0],t[1])})),e}var Ca={name:"SkillsTab",emits:["update:modelValue"],components:{Tabs:re.Z,Skill:wa},props:{propData:{type:Object,default:()=>({})},hero:{type:Object,default:()=>({})}},data(){return{currentSkill:this.propData.length-1}},computed:{localData:{get(){return this.propData},set(e){return this.$emit("update:modelValue",e)}},skillTabs(){return this.localData.map(((e,t)=>({id:t,name:"Skill "+(e.skill||t+1)}))).concat([{id:"new",name:"New Skill",disabled:3==this.localData.length}])}},methods:{changeTab(e){if("new"!==e)return this.currentSkill=e;this.newSkill()},newSkill(){const e=Oa({});e.skill=this.localData.length+1,this.localData.push(e),this.currentSkill=this.localData.length-1},deleteSkill(e){const t=this.localData.indexOf(e);-1!==t&&this.localData.splice(t,1)}}};const Ma=(0,te.Z)(Ca,[["render",Tt]]);var La=Ma;const Ua=(0,a._)("span",null," New EE ",-1),Wa=[Ua];function Ia(e,t,l,i,o,s){const n=(0,a.up)("ExclusiveEquipment");return(0,a.wg)(),(0,a.iD)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.localValue,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a.Wm)(n,{modelValue:s.localValue[t],"onUpdate:modelValue":e=>s.localValue[t]=e,hero:l.hero,onDelete:s.deleteEE},null,8,["modelValue","onUpdate:modelValue","hero","onDelete"])])))),128)),(0,a._)("div",null,[(0,a._)("button",{class:"material-button flat primary",onClick:t[0]||(t[0]=(...e)=>s.newEE&&s.newEE(...e))},Wa)])])}const Ta={class:"editor-subgroup"},Pa={class:"flex flex-wrap items-center"},Ra=(0,a._)("i",{class:"fa fa-trash"},null,-1),Fa=(0,a._)("span",null," Delete EE ",-1),$a=[Ra,Fa],Za={class:"col-1 col-lg-3"},Ha={class:"col-2 col-lg-4"},ja={class:"col-2 col-lg-4"},Aa={class:"editor-variable-group"},qa=(0,a._)("h2",null,"Main EE Stat",-1),Ga={class:"flex flex-wrap"},Ba=(0,a._)("div",{class:"editor-variable-group"},[(0,a._)("h2",null,"Description (Story)"),(0,a._)("div",{class:"pad-5"},[(0,a._)("textarea",{class:"nice-input"})])],-1);function Ka(e,t,l,i,s,n){const r=(0,a.up)("MaterialInput"),c=(0,a.up)("SkillStats"),d=(0,a.up)("Tabs"),u=(0,a.up)("ExEquipOption");return(0,a.wg)(),(0,a.iD)("div",Ta,[(0,a._)("div",Pa,[(0,a._)("div",null,[(0,a._)("button",{class:"material-button flat warn",onClick:t[0]||(t[0]=(...e)=>n.deleteEE&&n.deleteEE(...e))},$a)]),(0,a._)("div",Za,[(0,a.Wm)(r,{modelValue:n.localValue.name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.localValue.name=e),placeholder:"name"},null,8,["modelValue"])]),(0,a._)("div",Ha,[(0,a.Wm)(r,{modelValue:n.localValue._id,"onUpdate:modelValue":t[2]||(t[2]=e=>n.localValue._id=e),placeholder:"_id"},null,8,["modelValue"])]),(0,a._)("div",ja,[(0,a.Wm)(r,{modelValue:n.localValue.id,"onUpdate:modelValue":t[3]||(t[3]=e=>n.localValue.id=e),placeholder:"id (Same as _id)"},null,8,["modelValue"])])]),(0,a._)("div",Aa,[qa,(0,a._)("div",Ga,[(0,a.Wm)(c,{modelValue:n.localValue.stat,"onUpdate:modelValue":t[4]||(t[4]=e=>n.localValue.stat=e),"can-remove":!1},null,8,["modelValue"])])]),Ba,(0,a.Wm)(d,{tabs:[{id:0,name:"Option 1"},{id:1,name:"Option 2"},{id:2,name:"Option 3"}],tab:s.currentTab,onChange:t[5]||(t[5]=e=>s.currentTab=e.id)},null,8,["tab"]),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.localValue.skills,((e,t)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a.Wm)(u,{modelValue:n.localValue.skills[t],"onUpdate:modelValue":e=>n.localValue.skills[t]=e,hero:l.hero},null,8,["modelValue","onUpdate:modelValue","hero"])])),[[o.F8,t===s.currentTab]]))),128))])])}const za={style:{"max-width":"650px",width:"100%",padding:"15px 5px"}};function Ja(e,t,l,i,o,s){const n=(0,a.up)("Multiselect"),r=(0,a.up)("GenericSkillDescription");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",za,[(0,a.Wm)(n,{modelValue:s.localValue.skill,"onUpdate:modelValue":t[0]||(t[0]=e=>s.localValue.skill=e),modelModifiers:{number:!0},mode:"single",placeholder:"Skill",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:s.skillsMultiselect},null,8,["modelValue","options"])]),(0,a.Wm)(r,{modelValue:s.localValue,"onUpdate:modelValue":t[1]||(t[1]=e=>s.localValue=e)},null,8,["modelValue"])])}var Ya={emits:["update:modelValue","delete"],components:{GenericSkillDescription:Xl,Multiselect:ct.Z},props:{modelValue:{type:Object,default:()=>({})},hero:{type:Object,default:()=>({})}},computed:{localValue:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}},skillsMultiselect(){return(this.hero.skills||[]).map(((e,t)=>{const l=e.skill||t;return{id:l,name:"[ Skill "+l+" ] "+e.name,description:(e.description||"").length>100?e.description.slice(0,100)+"...":e.description}}))}}};const Qa=(0,te.Z)(Ya,[["render",Ja]]);var Xa=Qa,ei={emits:["update:modelValue","delete"],components:{MaterialInput:rt.Z,Tabs:re.Z,SkillStats:Bl,ExEquipOption:Xa},props:{modelValue:{type:Object,default:()=>({})},hero:{type:Object,default:()=>({})}},computed:{localValue:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}}},data(){return{currentTab:0}},methods:{deleteEE(){this.$emit("delete",this.modelValue)}}};const ti=(0,te.Z)(ei,[["render",Ka]]);var li=ti,ai={name:"ExclusiveEquipments",emits:["update:modelValue"],components:{ExclusiveEquipment:li},props:{modelValue:{type:Array,default:()=>[]},hero:{type:Object,default:()=>({})}},computed:{localValue:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}}},methods:{newEE(){this.localValue.push(xa({},this.hero))},deleteEE(e){var t=this.localValue.indexOf(e);-1!==t&&this.localValue.splice(t,1)}}};const ii=(0,te.Z)(ai,[["render",Ia]]);var oi=ii;const si=(0,a._)("span",null," New Skin ",-1),ni=[si];function ri(e,t,l,i,o,s){const n=(0,a.up)("Skin");return(0,a.wg)(),(0,a.iD)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.localValue,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"editor-subgroup"},[(0,a.Wm)(n,{modelValue:s.localValue[t],"onUpdate:modelValue":e=>s.localValue[t]=e,hero:l.hero,onDelete:s.deleteSkin},null,8,["modelValue","onUpdate:modelValue","hero","onDelete"])])))),128)),(0,a._)("div",null,[(0,a._)("button",{class:"material-button flat primary",onClick:t[0]||(t[0]=(...e)=>s.newSkin&&s.newSkin(...e))},ni)])])}const ci={class:"flex",style:{overflow:"hidden"}},di={style:{width:"200px",height:"200px","align-self":"center"}},ui=["src"],hi={class:"flex-fill overflow-hidden"},pi={class:"flex flex-wrap"},mi={class:"col-1 col-lg-3"},fi={class:"col-2 col-lg-3"},gi={class:"col-2 col-lg-3"},vi={class:"col-1 col-lg-2 pad-5"},yi={class:"col-1 col-lg-3 pad-5"},bi={class:"col-1 pad-5"};function _i(e,t,l,i,s,n){const r=(0,a.up)("MaterialInput"),c=(0,a.up)("Multiselect"),d=(0,a.Q2)("lazyloader");return(0,a.wg)(),(0,a.iD)("div",ci,[(0,a._)("div",di,[(0,a.wy)((0,a._)("img",{style:{"margin-left":"-20px"},src:n.imageSrc,alt:"Skin Image"},null,8,ui),[[d]])]),(0,a._)("div",hi,[(0,a._)("div",pi,[(0,a._)("div",mi,[(0,a.Wm)(r,{modelValue:n.localValue.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.localValue.name=e),type:"text",placeholder:"Name"},null,8,["modelValue"])]),(0,a._)("div",fi,[(0,a.Wm)(r,{modelValue:n.localValue._id,"onUpdate:modelValue":t[1]||(t[1]=e=>n.localValue._id=e),type:"text",placeholder:"_id"},null,8,["modelValue"])]),(0,a._)("div",gi,[(0,a.Wm)(r,{modelValue:n.localValue.id,"onUpdate:modelValue":t[2]||(t[2]=e=>n.localValue.id=e),type:"text",placeholder:"InGame ID (unit id + _s01,_s02...)"},null,8,["modelValue"])]),(0,a._)("div",vi,[(0,a.Wm)(c,{modelValue:n.localValue.tags,"onUpdate:modelValue":t[3]||(t[3]=e=>n.localValue.tags=e),placeholder:"Tags",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.tags},null,8,["modelValue","options"])]),(0,a._)("div",yi,[(0,a.Wm)(c,{modelValue:n.localValue.rarity,"onUpdate:modelValue":t[4]||(t[4]=e=>n.localValue.rarity=e),placeholder:"Rarity",mode:"single",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:[{id:"common",name:"Common"},{id:"rare",name:"Rare"},{id:"heroic",name:"Heroic"},{id:"epic",name:"Epic"}]},null,8,["modelValue"])]),(0,a._)("div",bi,[(0,a.wy)((0,a._)("textarea",{class:"nice-input",placeholder:"Story","onUpdate:modelValue":t[5]||(t[5]=e=>n.localValue.description=e)},null,512),[[o.nr,n.localValue.description]])])])])])}var Vi={components:{MaterialInput:rt.Z,Multiselect:ct.Z},props:{modelValue:{type:Array,default:()=>[]},hero:{type:Object,default:()=>({})}},computed:{localValue:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}},imageSrc(){return kt.cK+"/face/"+this.localValue.id+"_su.png"},multiselectOptions(){return{tags:St}}},watch:{"localValue.name":function(){return this.localValue._id=this.localValue.name.trim().toLowerCase().replace(/[^a-z0-9 ]/g,"").replace(/\s+/g,"-")+"-"+this.hero._id}}};const wi=(0,te.Z)(Vi,[["render",_i]]);var ki=wi,xi={name:"SkinListComponent",emits:["update:modelValue"],components:{Skin:ki},props:{modelValue:{type:Array,default:()=>[]},hero:{type:Object,default:()=>({})}},computed:{localValue:{get(){return this.modelValue},set(e){return this.$emit("update:modelValue",e)}}},methods:{newSkin(){this.localValue.push(Da({},this.hero.skin.length,this.hero))},deleteSkin(e){var t=this.localValue.indexOf(e);-1!==t&&this.localValue.splice(t,1)}}};const Si=(0,te.Z)(xi,[["render",ri]]);var Di=Si;function Ei(e,t,l){"hero"===t&&(e.stats.skills=e.skills.map((e=>{var t=[];return e.awakened&&(e=e.awakened),t.push(e.stats),t.push(e.enhancements.map((e=>e.stats||[])).filter((e=>e.length>0))),t})),e.stats.ex_equip=e.ex_equip.map((e=>{var t=[];return t.push([e.stat]),e.skills.forEach((e=>{var l=[];e.stats.forEach((e=>{l.push(e)})),t.push(l)})),t})))}var Oi={name:"HeroEditor",components:{Tabs:re.Z,GeneralTab:It,SkillsTab:La,ExclusiveEquipment:oi,SkinComponent:Di},props:{dataProp:{type:Object,default:()=>({})}},data(){return{currentTab:"general"}},watch:{"dataProp.ex_equip":{deep:!0,handler(){Ei(this.dataProp,"hero")}},"dataProp.skills":{deep:!0,immediate:!0,handler(){Ei(this.dataProp,"hero")}}}};const Ni=(0,te.Z)(Oi,[["render",ne]]);var Ci=Ni;const Mi={class:"editor-variable-group"},Li=(0,a._)("h2",null,"General",-1),Ui={class:"flex flex-wrap"},Wi={class:"col-1 col-lg-4"},Ii={class:"col-1 col-lg-4"},Ti={class:"col-1 col-lg-4"},Pi={class:"col-1 col-lg-4"},Ri={class:"flex flex-wrap items-center"},Fi={class:"col-2 col-lg-4 pad-5"},$i={class:"col-2 col-lg-4 pad-5"},Zi={class:"col-2 col-lg-4"},Hi={class:"col-2 col-lg-4"},ji={class:"flex flex-wrap"},Ai={class:"col-1 col-lg-2 pad-5"},qi={class:"editor-variable-group"},Gi=(0,a._)("h2",null,"Nicknames",-1),Bi={class:"editor-variable-group"},Ki=(0,a._)("h2",null,"Base Stats",-1),zi={class:"flex flex-wrap"},Ji={class:"col-2 col-lg-4"},Yi={class:"col-2 col-lg-4"},Qi={class:"editor-variable-group"},Xi={class:"editor-variable-group"},eo=(0,a._)("h2",null,"Comment",-1),to=(0,a._)("i",null,"(Optional) Add a comment for example effects not listed in the artifact's description",-1),lo={class:"pad-5"},ao={class:"editor-variable-group"},io=(0,a._)("h2",null,"Story",-1),oo={class:"pad-5"};function so(e,t,l,i,s,n){const r=(0,a.up)("MaterialInput"),c=(0,a.up)("Multiselect"),d=(0,a.up)("MaterialCheckbox"),u=(0,a.up)("NicknamesComponent"),h=(0,a.up)("GenericSkill");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",Mi,[Li,(0,a._)("div",Ui,[(0,a._)("div",Wi,[(0,a.Wm)(r,{modelValue:n.localData.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.localData.name=e),type:"string",placeholder:"Name"},null,8,["modelValue"])]),(0,a._)("div",Ii,[(0,a.Wm)(r,{modelValue:n.localData._id,"onUpdate:modelValue":t[1]||(t[1]=e=>n.localData._id=e),type:"string",placeholder:"_id"},null,8,["modelValue"])]),(0,a._)("div",Ti,[(0,a.Wm)(r,{modelValue:n.localData.id,"onUpdate:modelValue":t[2]||(t[2]=e=>n.localData.id=e),type:"string",placeholder:"Image ID"},null,8,["modelValue"])]),(0,a._)("div",Pi,[(0,a.Wm)(r,{modelValue:n.localData.identifier,"onUpdate:modelValue":t[3]||(t[3]=e=>n.localData.identifier=e),type:"string",placeholder:"Identifier (Optional)"},null,8,["modelValue"])])]),(0,a._)("div",Ri,[(0,a._)("div",Fi,[(0,a.Wm)(c,{modelValue:n.localData.rarity,"onUpdate:modelValue":t[4]||(t[4]=e=>n.localData.rarity=e),mode:"single",placeholder:"Rarity",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.rarity},null,8,["modelValue","options"])]),(0,a._)("div",$i,[(0,a.Wm)(c,{modelValue:n.localData.role,"onUpdate:modelValue":t[5]||(t[5]=e=>n.localData.role=e),mode:"single",placeholder:"Role",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.role},null,8,["modelValue","options"])]),(0,a._)("div",Zi,[(0,a.Wm)(r,{modelValue:n.localData.hero,"onUpdate:modelValue":t[6]||(t[6]=e=>n.localData.hero=e),type:"string",placeholder:"Related hero (_id)"},null,8,["modelValue"])]),(0,a._)("div",Hi,[(0,a.Wm)(d,{modelValue:n.localData.hero_exclusive,"onUpdate:modelValue":t[7]||(t[7]=e=>n.localData.hero_exclusive=e),type:"string"},{default:(0,a.w5)((()=>[(0,a.Uk)("Exclusive to this hero")])),_:1},8,["modelValue"])])]),(0,a._)("div",ji,[(0,a._)("div",Ai,[(0,a.Wm)(c,{modelValue:n.localData.tags,"onUpdate:modelValue":t[8]||(t[8]=e=>n.localData.tags=e),placeholder:"Tags",style:{"--ms-tag-bg":"var(--font-color-confirm)"},options:n.multiselectOptions.tags},null,8,["modelValue","options"])])])]),(0,a._)("div",qi,[Gi,(0,a._)("div",null,[(0,a.Wm)(u,{class:"pad-5",modelValue:n.localData.nicknames,"onUpdate:modelValue":t[9]||(t[9]=e=>n.localData.nicknames=e)},null,8,["modelValue"])])]),(0,a._)("div",Bi,[Ki,(0,a._)("div",zi,[(0,a._)("div",Ji,[(0,a.Wm)(r,{modelValue:n.localData.stats.atk,"onUpdate:modelValue":t[10]||(t[10]=e=>n.localData.stats.atk=e),type:"string",placeholder:"ATK"},null,8,["modelValue"])]),(0,a._)("div",Yi,[(0,a.Wm)(r,{modelValue:n.localData.stats.hp,"onUpdate:modelValue":t[11]||(t[11]=e=>n.localData.stats.hp=e),type:"string",placeholder:"HP"},null,8,["modelValue"])])])]),(0,a._)("div",Qi,[(0,a.Wm)(h,{modelValue:n.localData,"onUpdate:modelValue":t[12]||(t[12]=e=>n.localData=e),"bonus-stats":!1},null,8,["modelValue"])]),(0,a._)("div",Xi,[eo,to,(0,a._)("div",lo,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[13]||(t[13]=e=>n.localData.comment=e),class:"nice-input",spellcheck:"false"},null,512),[[o.nr,n.localData.comment]])])]),(0,a._)("div",ao,[io,(0,a._)("div",oo,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[14]||(t[14]=e=>n.localData.story=e),class:"nice-input",spellcheck:"false"},null,512),[[o.nr,n.localData.story]])])])])}var no={name:"ArtifactEditor",emits:["update:modelValue"],components:{MaterialInput:rt.Z,MaterialCheckbox:sl.Z,Multiselect:ct.Z,GenericSkill:Xl,NicknamesComponent:wt},inject:["buffList","debuffList","commonList"],props:{dataProp:{type:Object,default:()=>({})}},data(){return{rules:[{text:new RegExp("--(.+?)--","g"),class:"debuff"},{text:new RegExp(/\{\{.+?\}\}/,"g"),class:"variable"},{text:new RegExp(/\*\*(.+?)\*\*/,"g"),class:"common"},{text:new RegExp(/\+\+(.+?)\+\+/,"g"),class:"buff"},{text:new RegExp(/:\w+?:/,"g"),create:e=>'<img style="height: 1em;" src="https://static-00.iconduck.com/assets.00/google-icon-2048x2048-czn3g8x8.png" data-text="'+e+'" />'}]}},computed:{localData:{get(){return this.dataProp},set(e){return this.$emit("update:modelValue",e)}},multiselectOptions(){return{tags:St,gender:Dt,rarity:Et,role:Nt,attribute:Ot,zodiac:Ct,stats:Mt,devotionSlots:Lt}}},watch:{"localData.name":function(){this.localData._id=(this.localData.name||"").trim().replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"-").toLowerCase()}}};const ro=(0,te.Z)(no,[["render",so]]);var co=ro;const uo={class:"editor-variable-group"},ho=(0,a._)("h2",null,"General",-1),po={class:"flex",style:{"flex-wrap":"wrap"}},mo={class:"col-1 col-lg-4"},fo={class:"col-1 col-lg-4"},go={class:"col-1 col-lg-4"},vo={class:"col-1 col-lg-4"},yo={class:"pad-5"};function bo(e,t,l,i,s,n){const r=(0,a.up)("MaterialInput");return(0,a.wg)(),(0,a.iD)("div",uo,[ho,(0,a._)("div",po,[(0,a._)("div",mo,[(0,a.Wm)(r,{modelValue:n.localData.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.localData.name=e),type:"string",placeholder:"Name"},null,8,["modelValue"])]),(0,a._)("div",fo,[(0,a.Wm)(r,{modelValue:n.localData._id,"onUpdate:modelValue":t[1]||(t[1]=e=>n.localData._id=e),type:"string",placeholder:"_id"},null,8,["modelValue"])]),(0,a._)("div",go,[(0,a.Wm)(r,{modelValue:n.localData.id,"onUpdate:modelValue":t[2]||(t[2]=e=>n.localData.id=e),type:"string",placeholder:"id"},null,8,["modelValue"])]),(0,a._)("div",vo,[(0,a.Wm)(r,{modelValue:n.localData.src,"onUpdate:modelValue":t[3]||(t[3]=e=>n.localData.src=e),type:"string",placeholder:"Image name (if different from _id)"},null,8,["modelValue"])])]),(0,a._)("div",yo,[(0,a.wy)((0,a._)("textarea",{class:"full-w nice-input","onUpdate:modelValue":t[4]||(t[4]=e=>n.localData.description=e)},null,512),[[o.nr,n.localData.description]])])])}var _o={name:"EffectEditor",emits:["update:modelValue"],components:{MaterialInput:rt.Z},props:{dataProp:{type:Object,default:()=>({})}},computed:{localData:{get(){return this.dataProp},set(e){return this.$emit("update:modelValue",e)}},multiselectOptions(){return{tags:St,gender:Dt,rarity:Et,role:Nt,attribute:Ot,zodiac:Ct,stats:Mt,devotionSlots:Lt}}}};const Vo=(0,te.Z)(_o,[["render",bo]]);var wo=Vo;const ko={class:"flex flex-wrap"},xo={class:"col-3 pad-5"},So={class:"col-2 pad-5"};function Do(e,t,l,i,s,n){return(0,a.wg)(),(0,a.iD)("div",ko,[(0,a._)("div",xo,[(0,a.wy)((0,a._)("input",{class:"nice-input",placeholder:"_id","onUpdate:modelValue":t[0]||(t[0]=e=>n.localValue._id=e)},null,512),[[o.nr,n.localValue._id]])]),(0,a._)("div",So,[(0,a.wy)((0,a._)("input",{class:"nice-input",placeholder:"Name","onUpdate:modelValue":t[1]||(t[1]=e=>n.localValue.name=e)},null,512),[[o.nr,n.localValue.name]])])])}function Eo(e){return[["_id",""],["name",""]].forEach((t=>{ka(e,t[0],t[1])})),e}var Oo={name:"EnhancementsEditor",props:{dataProp:{type:Object,default:()=>({})}},created(){Eo(this.localValue)},computed:{localValue:{get(){return this.dataProp},set(e){this.$emit("update:dataProp",e)}}}};const No=(0,te.Z)(Oo,[["render",Do]]);var Co=No;function Mo(e){return[["_id",""],["id",""],["identifier",""],["name",""],["role",""],["rarity",5],["stats",{hp:0,atk:0}],["nicknames",[]],["story",""],["description",""],["values",[]],["comment",""],["buff",[]],["debuff",[]],["common",[]],["hero",""],["hero_exclusive",null],["tags",[]],["changelog",[]]].forEach((t=>{ka(e,t[0],t[1])})),e}function Lo(e){return[["_id",""],["id",0],["icon",""],["name",""],["description",""]].forEach((t=>{ka(e,t[0],t[1])})),e}var Uo="https://cecilia-bot-api.vercel.app/api/mongo";const Wo={hero:(0,T.XI)(Ci),heroPreview:(0,T.XI)(oe["default"]),artifact:(0,T.XI)(co),artifactPreview:(0,T.XI)(se["default"]),buff:(0,T.XI)(wo),enhancements:(0,T.XI)(Co)};var Io={name:"CeciliaDatabaseEditor",components:{OpenEditorCompoennt:q,FileTree:K,FileSearch:Y,E7Error:ie},provide(){return{EIDTOR_API:Uo,heroList:(0,a.Fl)((()=>this.heroList)),artifactList:(0,a.Fl)((()=>this.artifactList)),buffList:(0,a.Fl)((()=>this.buffList)),debuffList:(0,a.Fl)((()=>this.debuffList)),commonList:(0,a.Fl)((()=>this.commonList)),enhancementsList:(0,a.Fl)((()=>this.enhancementsList))}},data(){return{openFiles:[],active:null,heroList:[],artifactList:[],buffList:[],debuffList:[],commonList:[],enhancementsList:[]}},computed:{files(){return[{name:"Heroes",refresh:this.refreshHeroList,type:"Hero",children:this.heroList},{name:"Artifacts",refresh:this.refreshArtifactList,type:"Artifact",children:this.artifactList},{name:"Buffs",refresh:this.refreshBuffList,type:"Buff",children:this.buffList},{name:"Debuffs",refresh:this.refreshDebuffList,type:"Debuff",children:this.debuffList},{name:"Common",refresh:this.refreshCommonList,type:"Common",children:this.commonList},{name:"Skill Enhancemenets",refresh:this.refreshEnhancementsList,type:"Enhancement",children:this.enhancementsList}]}},created(){document.addEventListener("keydown",this.saveFileKeyboard),Promise.all([this.refreshHeroList(),this.refreshArtifactList(),this.refreshBuffList(),this.refreshDebuffList(),this.refreshCommonList(),this.refreshEnhancementsList()]).catch(console.error)},beforeUnmount(){document.removeEventListener("keydown",this.saveFileKeyboard)},methods:{toggleCollpaseGroup(e){e.target.parentElement.classList.toggle("collapse")},closeMobileNav(){document.activeElement.blur()},previewJSON(){this.$promiseAlert("JSON",'<div style="white-space: pre; text-align: left;">'+JSON.stringify(this.active.data||{},null,4)+"</div>").then().catch((()=>{}))},saveFileKeyboard(e){if(e.ctrlKey)if(83===e.keyCode){if(e.preventDefault(),!this.active)return;this.saveItem()}else 78===e.keyCode&&(e.preventDefault(),this.createNewFileButton())},async openFile(e,t){this.closeMobileNav();var l=-1;if(this.openFiles.forEach(((t,a)=>e.name===t.name&&t.id===e.id?l=a:null)),-1===l){var a=e.data;if(!e.isNew)try{a=await this.fetchElement(e.id,t)}catch(o){return this.$snackbar.error({description:"Could not load document"}),void await this["refresh"+t+"List"]()}var i={type:t,edited:!1,active:!1,isNew:e.isNew,name:e.name,id:e.id,data:a||{}};switch(t){case"Hero":i.component=Wo.hero,i.previewComponent=Wo.heroPreview,i.data=Ea(a);break;case"Artifact":i.component=Wo.artifact,i.previewComponent=Wo.artifactPreview,i.data=Mo(a);break;case"Buff":case"Debuff":case"Common":i.component=Wo.buff,i.data=Lo(a);break;case"Enhancement":i.component=Wo.enhancements;break}this.openFiles.push(i),this.switchTab(i)}else this.switchTab(this.openFiles[l])},switchTab(e){this.openFiles.forEach((e=>e.active=!1)),this.active=e,e.active=!0},closeFile(e){const t=this.openFiles.indexOf(e),l=e.active;-1!=t&&this.openFiles.splice(t,1);const a=Math.max(t-1,0);l&&this.openFiles[a]?(this.openFiles[a].active=!0,this.active=this.openFiles[a]):l&&!this.openFiles[a]&&(this.active=null)},createNewFileButton(){const e=["Hero","Artifact","Buff","Debuff","Common","Enhancement","Cancel"];this.$promiseAlert("New","What do you want to create?",e).then((t=>{const l=t[0];if(l!==e.length-1){var a={name:"New "+e[l],id:"item-"+Date.now(),isNew:!0,type:e[l],data:{}};this.openFile(a,e[l])}})).catch(console.error)},async fetchElement(e,t){return JSON.parse(await(0,P.Z)(Uo+"/getItem?list="+t.toLowerCase()+"&id="+e))},refreshHeroList(){return new Promise((e=>{(0,P.Z)(Uo+"/getList?list=hero").then((t=>{var l=JSON.parse(t).map((e=>({name:e.name||"MISSING NAME",id:e._id})));this.heroList=l,e(l)})).catch((t=>{this.$snackbar.error({title:"error",description:"Could not update hero list"}),console.error(t),e([])}))}))},refreshArtifactList(){return new Promise((e=>{(0,P.Z)(Uo+"/getList?list=artifact").then((t=>{var l=JSON.parse(t).map((e=>({name:e.name||"MISSING NAME",id:e._id})));this.artifactList=l,e(l)})).catch((t=>{this.$snackbar.error({title:"error",description:"Could not update artifact list"}),console.error(t),e([])}))}))},refreshBuffList(){return new Promise((e=>{(0,P.Z)(Uo+"/getList?list=buff&fields=_id,name,description,icon").then((t=>{var l=JSON.parse(t).map((e=>({name:e.name||"MISSING NAME",id:e._id,description:e.description,src:R.cK+(e.icon?e.icon:"/buff/"+e._id+".png")})));this.buffList=l,e(l)})).catch((t=>{this.$snackbar.error({title:"error",description:"Could not update buff list"}),console.error(t),e([])}))}))},refreshDebuffList(){return new Promise((e=>{(0,P.Z)(Uo+"/getList?list=debuff&fields=_id,name,description,icon").then((t=>{var l=JSON.parse(t).map((e=>({name:e.name||"MISSING NAME",id:e._id,description:e.description,src:R.cK+(e.icon?e.icon:"/buff/"+e._id+".png")})));this.debuffList=l,e(l)})).catch((t=>{this.$snackbar.error({title:"error",description:"Could not update debuff list"}),console.error(t),e([])}))}))},refreshCommonList(){return new Promise((e=>{(0,P.Z)(Uo+"/getList?list=common&fields=_id,name,description,icon").then((t=>{var l=JSON.parse(t).map((e=>({name:e.name||"MISSING NAME",id:e._id,description:e.description,src:R.cK+(e.icon?e.icon:"/buff/"+e._id+".png")})));this.commonList=l,e(l)})).catch((t=>{this.$snackbar.error({title:"error",description:"Could not update common list"}),console.error(t),e([])}))}))},refreshEnhancementsList(){return new Promise((e=>{(0,P.Z)(Uo+"/getList?list=enhancement&fields=_id,name").then((t=>{var l=JSON.parse(t).map((e=>({name:e.name||"MISSING NAME",id:e._id})));this.enhancementsList=l,e(l)})).catch((t=>{this.$snackbar.error({title:"error",description:"Could not update enhancements list"}),console.error(t),e([])}))}))},saveItem(){const e=this.active;if(!e.data._id||!e.data._id.trim())return this.$snackbar.error({title:"Error",description:"_id is required!"});(0,P.Z)(Uo+"/save?list="+this.active.type.toLowerCase(),"POST",JSON.stringify({isNew:e.isNew,old:e.original,data:e.data})).then((()=>{this.active.isNew=!1,this.active.name=e.data.name,this.active.id=e.data._id,this.active.old=JSON.parse(JSON.stringify(e.data)),this.$snackbar.log({title:"OK",description:"MongoDB updated!"})})).catch((e=>{409===e.status?this.$snackbar.error({title:"error",description:"This _id is already in use!"}):this.$snackbar.error({title:"error",description:"MongoDB update failed!"})})).finally((()=>{try{this["refresh"+this.active.type+"List"]()}catch(e){}}))},deleteItem(){this.active&&this.$promiseAlert("Are you sure you want to delete "+this.active.name+"?","This will send a request to the server and permanently delete the current document for all users",[{name:"Delete",class:"material-button basic warn"},{name:"Cancel",class:"material-button basic primary"}]).then((e=>{try{const t=e[0];if(1===t)return;if(this.active.isNew)return this.closeFile(this.active);this.sendDeleteRequest(this.active)}catch(t){console.error(t),this.$snackbar.error({title:"Ooops",description:"Something went wrong"})}}))},sendDeleteRequest(e){const t=e.type.toLowerCase();(0,P.Z)(Uo+"/delete?list="+t+"&id="+e.data._id,"POST",JSON.stringify({})).then((()=>{this.closeFile(this.active)})).catch(console.error).finally((()=>{try{this["refresh"+e.cat+"List"]()}catch(t){}}))}}};const To=(0,te.Z)(Io,[["render",I]]);var Po=To},9206:function(e,t,l){"use strict";l(8242)},4553:function(e,t,l){"use strict";l.d(t,{Z:function(){return a.Z}});var a=l(7673)},5509:function(e,t,l){"use strict";l.d(t,{s:function(){return a.s}});var a=l(5425)}}]);