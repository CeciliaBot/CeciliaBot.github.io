"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[8571],{6163:function(e,i,n){function o(e,i){var n=null;return function(){clearTimeout(n);var o=arguments,t=this;n=setTimeout((function(){e.apply(t,o)}),i)}}function t(e,i){var n=!1;return function(){n||(e.apply(this,arguments),n=!0,setTimeout((function(){n=!1}),i))}}function s(e=!1){let i=window.location.href.split("?")[0],n=i.split("#"),o=e&&"#"===e.href.charAt(0)?2:1;while(n.length>o)n.pop();return n.join("#")}n.d(i,{Ds:function(){return o},P2:function(){return t},fA:function(){return s}})},3479:function(e,i,n){n.d(i,{Z:function(){return S}});var o=n(6252),t=n(9963),s=n(3577);const r={class:"min-icon"},l={class:"min-title"},d={class:"floating-content"},u={class:"window-header"},a={class:"header-buttons"},h=(0,o._)("i",{class:"fas fa-window-minimize"},null,-1),w=[h],c=(0,o._)("i",{class:"fas fa-times"},null,-1),m=[c],p={class:"window-body hide-scrollbar"};function f(e,i,n,h,c,f){return(0,o.wg)(),(0,o.iD)(o.HY,null,[((0,o.wg)(),(0,o.j4)(o.lR,{to:c.teleport[1]},[(0,o._)("div",{onClick:i[0]||(i[0]=(...e)=>f.minimizedIconClick&&f.minimizedIconClick(...e)),class:"minimized"},[(0,o._)("div",r,[(0,o.WI)(e.$slots,"icon")]),(0,o._)("div",l,[(0,o.WI)(e.$slots,"title")])])],8,["to"])),((0,o.wg)(),(0,o.j4)(o.lR,{to:c.teleport[0]},[(0,o.wy)((0,o._)("div",(0,o.dG)({ref:"floating-window"},e.$attrs,{class:["floating-window",{"glass-container-2":n.glassWindow,"flat-window":!n.glassWindow,"full-screen":c.isFullScreen}],onFocusin:i[22]||(i[22]=(...e)=>f.onFocus&&f.onFocus(...e)),onBlur:i[23]||(i[23]=(...e)=>f.onBlur&&f.onBlur(...e)),tabindex:"0"}),[(0,o._)("div",d,[(0,o._)("div",u,[(0,o._)("div",{class:"window-title noselect",onMousedown:i[1]||(i[1]=(0,t.iM)(((...e)=>f.moveWindowMouseDown&&f.moveWindowMouseDown(...e)),["prevent"])),onTouchstart:i[2]||(i[2]=(0,t.iM)(((...e)=>f.moveWindowMouseDown&&f.moveWindowMouseDown(...e)),["prevent"]))},[(0,o.WI)(e.$slots,"icon"),(0,o.WI)(e.$slots,"title")],32),(0,o._)("div",a,[(0,o.WI)(e.$slots,"extra-button"),(0,o._)("button",{class:"header-button",onClick:i[3]||(i[3]=(...e)=>f.toggleMinimize&&f.toggleMinimize(...e))},w),(0,o._)("button",{class:"header-button",onClick:i[4]||(i[4]=(...e)=>f.toggleFullScreen&&f.toggleFullScreen(...e))},[(0,o._)("i",{class:(0,s.C_)(["fa",c.isFullScreen?"fa-window-restore":"fa-window-maximize"])},null,2)]),(0,o._)("button",{class:"header-button close",onClick:i[5]||(i[5]=(...e)=>f.close&&f.close(...e))},m)])]),(0,o._)("div",p,[(0,o.WI)(e.$slots,"default")])]),(0,o._)("div",{class:"resizer n",onMousedown:i[6]||(i[6]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e)),onTouchstart:i[7]||(i[7]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e))},null,32),(0,o._)("div",{class:"resizer e",onMousedown:i[8]||(i[8]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e)),onTouchstart:i[9]||(i[9]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e))},null,32),(0,o._)("div",{class:"resizer s",onMousedown:i[10]||(i[10]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e)),onTouchstart:i[11]||(i[11]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e))},null,32),(0,o._)("div",{class:"resizer w",onMousedown:i[12]||(i[12]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e)),onTouchstart:i[13]||(i[13]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e))},null,32),(0,o._)("div",{class:"resizer nw",onMousedown:i[14]||(i[14]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e)),onTouchstart:i[15]||(i[15]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e))},null,32),(0,o._)("div",{class:"resizer sw",onMousedown:i[16]||(i[16]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e)),onTouchstart:i[17]||(i[17]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e))},null,32),(0,o._)("div",{class:"resizer se",onMousedown:i[18]||(i[18]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e)),onTouchstart:i[19]||(i[19]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e))},null,32),(0,o._)("div",{class:"resizer ne",onMousedown:i[20]||(i[20]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e)),onTouchstart:i[21]||(i[21]=(...e)=>f.resizeMouseDown&&f.resizeMouseDown(...e))},null,32)],16),[[t.F8,!c.isMinimized]])],8,["to"]))],64)}n(560);function v(e){var i=e;return!i.clientX&&e.touches&&e.touches.length&&(i=e.touches[0]),{clientX:i.clientX,clientY:i.clientY}}function M(){y.forEach((e=>{e.minimize()}))}function z(){var e=document.getElementById("FloatingWindowsContainer");if(e){var i=document.getElementById("FloatingWindowsIconContainer");return[e,i]}var n=document.createElement("div");n.id="FloatingWindowsContainer",n.style="position: fixed; bottom: 20px; left: 0; z-index: 20;";var o=document.createElement("div");o.tabIndex=-1,o.className="windows-apps-icon",o.style.display="none";var t=document.createElement("div");t.className="minimized",t.innerHTML='<div class="min-icon"><i class="fa fa-th"></i></div>',o.appendChild(t);var s=document.createElement("div");s.id="FloatingWindowsIconContainer",s.className="popup-window-icon-container material-popup";var r=document.createElement("div");return r.className="minimized",r.onclick=M,r.innerHTML='<div class="min-icon"><i class="fa fa-eye-slash"></i></div><div class="min-title">Minimize all</div>',s.appendChild(r),o.appendChild(s),n.appendChild(o),document.body.appendChild(n),[n,s]}var g=z(),y=[],D={emits:["close","minimize","restore","resize"],props:{wid:{required:!0},minheight:{type:Number,required:!1,default:30},minwidth:{type:Number,required:!1,default:130},glassWindow:{type:Boolean,default:!0},openMaximized:{type:Boolean,default:!1},size:{type:Object,required:!1},position:{required:!1}},data(){return{teleport:g,isFullScreen:!1,isMinimized:!1,onMouseMove:[],onMouseUp:[],beforeSnapSize:null}},created(){window.addEventListener("mouseup",this.mouseUp),window.addEventListener("touchend",this.mouseUp),window.addEventListener("touchleave",this.mouseUp),this.openMaximized&&(this.isFullScreen=!0),this.position&&this.position},mounted(){let e=this.$refs["floating-window"],i=this.size&&this.size.width?this.size.width:Math.min(window.innerWidth-30,Math.max(.5*window.innerWidth,900))+"px",n=this.size&&this.size.height?this.size.height:Math.min(window.innerHeight,Math.max(.5*window.innerHeight,500))+"px";var o=i,t=n;("string"===typeof o||o instanceof String)&&(o="%"!==o.slice(-1)?parseFloat(o):parseFloat(o)*window.innerWidth),("string"===typeof t||t instanceof String)&&(t="%"!==t.slice(-1)?parseFloat(t):parseFloat(t)*window.innerHeight);let s=(window.innerWidth-o)/window.innerWidth*100/2+1*y.length+"%",r=(window.innerHeight-t)/window.innerHeight*100/2+1*y.length+"%";e.style.height=n,e.style.width=i;var l=this.position;if(l&&("string"===typeof l||l instanceof String)){var d={};-1!==l.indexOf("top")?d.top="1%":-1!==l.indexOf("bottom")&&(d.bottom="1%"),-1!==l.indexOf("left")?d.left="2%":-1!==l.indexOf("right")&&(d.right="2%"),l=d}l?(l.bottom?e.style.bottom=l.bottom:e.style.top=l.top||r,l.right?e.style.right=l.right:e.style.left=l.left||s):(e.style.top=r,e.style.left=s),y.push(this),g[1].parentNode.style.display="",g[1].parentNode.style.zIndex=y.length+1,e.style.zIndex=y.length},beforeUnmount(){window.removeEventListener("mouseup",this.mouseUp),window.removeEventListener("touchend",this.mouseUp),window.removeEventListener("touchleave",this.mouseUp),this.removeEvents(),y.splice(y.indexOf(this),1),y.length||(g[1].parentNode.style.display="none")},watch:{},methods:{resizeMouseDown(e){e.preventDefault(),e.stopPropagation(),this.removeEvents(),this.$refs["floating-window"].focus();var i=e.target.classList[1],n=this.$refs["floating-window"].getBoundingClientRect();e=v(e),this.beforeSnapSize=null,-1!==i.indexOf("n")?this.onMouseMove.push((i=>this.resize(i,n,1,e))):-1!==i.indexOf("s")&&this.onMouseMove.push((e=>this.resize(e,n,1,!1))),-1!==i.indexOf("w")?this.onMouseMove.push((i=>this.resize(i,n,0,e))):-1!==i.indexOf("e")&&this.onMouseMove.push((e=>this.resize(e,n,0,!1))),this.onMouseMove.forEach((e=>{window.addEventListener("mousemove",e),window.addEventListener("touchmove",e)})),this.$refs["floating-window"].style.boxShadow="#008eff 0px 0px 0px 2px",document.body.style.pointerEvents="none",this.onMouseUp.push((()=>{document.body.style.pointerEvents=null,this.$refs["floating-window"].style.boxShadow=null}))},resize(e,i,n,o){var t,s=["width","height"][n],r=["clientX","clientY"][n],l=["left","top"][n];if(e=v(e),o){if(t=i[s]-(e[r]-o[r]),this["min"+s]>=t)return;this.$refs["floating-window"].style[s]=t+"px",this.$refs["floating-window"].style[l]=Math.max(0,i[l]+(e[r]-o[r]))+"px"}else{if(t=e[r]-i[l]+1,this["min"+s]>=t)return;this.$refs["floating-window"].style[s]=t+"px"}},moveWindowMouseDown(e){this.$refs["floating-window"].focus(),e=v(e);var i=this.$refs["floating-window"].getBoundingClientRect(),n=this.beforeSnapSize?-this.beforeSnapSize.width/2:i.left-e.clientX,o=i.top-e.clientY;this.isFullScreen&&(n=-parseInt(this.$refs["floating-window"].style.width)/2),this.onMouseMove.push((e=>this.moveWindow(e,n,o))),this.onMouseMove.forEach((e=>{window.addEventListener("mousemove",e),window.addEventListener("touchmove",e)})),this.onMouseUp.push(this.snapWindow),document.body.style.pointerEvents="none",this.onMouseUp.push((()=>document.body.style.pointerEvents=null))},moveWindow(e,i,n){e=v(e),this.isFullScreen=!1;var o=this.$refs["floating-window"].style;this.beforeSnapSize&&(o.height=this.beforeSnapSize.height+"px",o.width=this.beforeSnapSize.width+"px",this.beforeSnapSize=null),o.top=Math.max(0,Math.min(window.innerHeight-30,e.clientY+n)/window.innerHeight*100)+"%",o.left=Math.max(0,Math.min(window.innerWidth-30,e.clientX+i)/window.innerWidth*100)+"%"},snapWindow(e){var i=this.$refs["floating-window"],n=e.clientX,o=e.clientY,t=!1,s="100%",r="100%",l=0,d=0;if(n<15?(s="50%",d=0,t=!0):n>window.innerWidth-60&&(s="50%",d="50%",t=!0),o<15?(r="50%",l=0,t=!0):o>window.innerHeight-60&&(r="50%",l="50%",t=!0),!0===t){var u=i.getBoundingClientRect();this.beforeSnapSize={height:u.height,width:u.width},i.style.width=s,i.style.height=r,i.style.top=l,i.style.left=d}},applyMouseUpEvents(e){this.onMouseUp.forEach((i=>{i(e)}))},mouseUp(e){this.applyMouseUpEvents(e),this.removeEvents()},removeEvents(){this.onMouseMove.forEach((e=>{window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",e)})),this.onMouseMove=[],this.onMouseUp=[]},moveToTheTop(){var e=y.indexOf(this);if(-1!==e){y.splice(e,1),y.push(this);for(var i=e;i<y.length;i++)y[i]&&(y[i].$refs["floating-window"].style.zIndex=i)}},onFocus(){this.moveToTheTop()},onBlur(){},toggleFullScreen(){this.isFullScreen=!this.isFullScreen},toggleMinimize(){this.isMinimized?this.resotreFromMinimized():this.minimize()},minimize(){this.$emit("minimize",this.wid),this.isMinimized=!0},resotreFromMinimized(){this.isMinimized=!1,this.moveToTheTop()},minimizedIconClick(){this.isMinimized?(this.$refs["floating-window"].focus(),this.toggleMinimize()):y.slice(-1)[0]!==this?this.$refs["floating-window"].focus():this.minimize()},outsideSetFocus(){this.$refs["floating-window"].focus(),this.isMinimized=!1},close(){this.$emit("close",this.wid)}}},b=n(3744);const x=(0,b.Z)(D,[["render",f]]);var S=x}}]);