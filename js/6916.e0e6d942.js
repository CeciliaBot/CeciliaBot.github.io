(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[6916],{3222:function(t){(function(e,r){t.exports=r()})("undefined"!==typeof self&&self,(function(){return function(){"use strict";var t={};!function(){t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}}(),function(){t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){t.p=""}();var e={};if(t.d(e,{default:function(){return p}}),"undefined"!==typeof window){var r=window.document.currentScript,n=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(t.p=n[1])}const i=["img","br","hr","vr"];function s(t,e,r){if(!t)return"";const n=i.includes(t)?"":`</${t}>`,s=e?Object.keys(e).map((t=>t+`="${e[t]}"`)).join(" ").trim():"";return r?Array.isArray(r)&&(r=r.join("")):r="",`<${t} ${s+(n?"":" /")}>`+r+n}function a(t,e,r){return[t,e,r]}function o(t,e,r,n=a){const i=r+"face/"+e.id,s=e.tags.includes(1),o=r+"img/cm_icon_prom"+e.attribute+".png",l=r+"img/cm_icon_role_"+e.role+".png",c=r+"img/cm_icon_zodiac_"+e.zodiac+".png",d=r+"img/cm_icon_star.png",h=r+"item/border/icon_border_base.png";return"icon"===t.type?n("inline-block",{class:"hero icon noselect"},[n("img",{src:i+"_s.png",class:"absolute center"}),n("img",{src:h,class:"icon-border"}),n("span",{class:"role-attribute"},[n("img",{src:l}),n("img",{src:o})]),s?n("span",{class:"limited-ribbon"},[n("img",{src:r+"img/hero_jodiac_label_orange.png"}),n("span",{},"Limited")]):null,t["show-name"]?n("span",{class:"label"},[n("span",{},e.name)]):null]):n("span",{class:"hero panel noselect"},[n("img",{src:i+"_l.png",class:"hero-icon noselect"}),n("span",{class:"top-row black-stroke noselect"},[n("img",{src:l}),n("span",{},e.name)]),n("span",{class:"bottom-row black-stroke noselect"},[n("img",{src:o}),n("img",{src:c}),...new Array(5).fill().map((()=>n("img",{src:d,class:"star"})))]),s?n("span",{class:"limited-ribbon"},[n("img",{src:r+"img/hero_jodiac_label_orange.png"}),n("span",{},"Limited")]):null])}function l(t,e,r,n=a){const i=r+"item_arti/",s=!(!e.role||"common"===e.role),o=r+"img/cm_icon_role_"+e.role+".png",l=r+"img/cm_icon_star.png";return"icon"===t.type?n("span",{class:"artifact icon noselect"},[n("img",{src:i+"icon_"+e.id+".png",class:"icon"}),n("span",{class:"role-attribute"},s?[n("img",{src:o})]:null)]):"banner"===t.type?n("span",{class:"artifact banner noselect"},[n("img",{src:i+e.id+"_l.jpg",class:"thumbnail"}),n("img",{src:r+"item_arti/arti_frame_small.png",class:"frame"}),n("img",{src:i+"icon_"+e.id+".png",class:"icon"}),n("span",{class:"labels"},[n("span",{},s?[n("img",{src:o})]:null),n("span",{},[...new Array(5).fill().map((()=>n("img",{src:l,class:"star"})))]),n("span",{class:"black-stroke"},e.name)])]):n("span",{class:"artifact full noselect"},[n("img",{src:i+e.id+"_fu.png",class:"image noselect"}),n("img",{src:r+"item_arti/arti_frame_deco_2.png",class:"bottom-frame"}),n("span",{class:"name black-stroke"},e.name)])}function c(t,e,r){return o(t,e,r,s)}function d(t,e,r){return l(t,e,r,s)}const h={artifact:d,hero:c,toHtml:s};var u=h,p=u;return e=e["default"],e}()}))},7688:function(t,e,r){"use strict";r.d(e,{J:function(){return l},Z:function(){return n}});r(560);class n{constructor(t={}){this.setData(t),this.startTimer()}setData(t){this.date=void 0!==t.date?t.date&&isNaN(t.date)?new Date(t.date).getTime():t.date:this.date,this.utc=void 0!==t.utc?t.utc:this.utc,this.onUpdate=void 0!==t.onUpdate?t.onUpdate:this.onUpdate||function(){},this.onZero=void 0!==t.onZero?t.onZero:function(){}||function(){},this.interval=void 0!==t.interval?t.interval:this.interval||1e3}startTimer(){this.date?this.countDown():this.clock(),this.w=setTimeout((()=>{this.onUpdate&&(this.date?this.t=setInterval((()=>this.countDown()),this.interval):this.t=setInterval((()=>this.clock()),this.interval))}),1e3-(new Date).getMilliseconds())}countDown(){var t=(this.date-Date.now())/1e3,e=[86400,3600,60,1].map((e=>{var r=Math.max(Math.floor(t/e),0);return t-=e*r,r}));this.onUpdate(e,t),this.date-Date.now()<=0&&this.onZero()}padNumber(t){return t<10?"0"+t:t}clock(){var t=new Date,e=this.utc?t.getUTCHours():t.getHours(),r=this.padNumber(this.utc?t.getUTCMinutes():t.getMinutes()),n=this.padNumber(this.utc?t.getUTCSeconds():t.getSeconds());this.onUpdate([e,r,n],e+":"+r+":"+n)}$update(t,e){e&&(clearInterval(this.t),clearTimeout(this.w)),this.setData(t),e&&this.startTimer()}$destroy(){clearInterval(this.t),clearTimeout(this.w),this.t=null,this.w=null,this.interval=null,this.onUpdate=null,this.onZero=null,this.date=null,this.utc=null}}const i=[];var s=null;function a(){null==s&&(s=setInterval((()=>{const t=Date.now();i.forEach((e=>{e&&e.countDown(t)}))}),1e3))}function o(){i.length||(clearInterval(s),s=null)}window.logActiveTimers=()=>console.log(i);class l{constructor(t={}){this.setData(t),this.startTimer()}setData(t){this.date=new Date(t.date||this.date||Date.now()).getTime(),this.utc=t.utc||this.utc,this.onUpdate=t.onUpdate||this.onUpdate||function(){},this.onZero=t.onZero||this.onZero||function(){this.$stop()},this.interval=t.interval||this.interval||1e3}startTimer(){if(this.date-Date.now()<=0)return this.handleZero();this.start(),this.countDown(Date.now())}countDown(t){if(this.date-t<=0)return this.stop(),this.handleZero();var e=(this.date-t)/1e3,r=[86400,3600,60,1].map((t=>{var r=Math.max(Math.floor(e/t),0);return e-=t*r,r}));this.onUpdate(r,e)}handleZero(){this.onZero&&this.onZero()}start(){var t=i.indexOf(this);-1===t&&i.push(this),a()}stop(){var t=i.indexOf(this);-1!==t&&i.splice(t,1),o()}$update(t){this.setData(t),this.startTimer()}$destroy(){this.stop(),this.onUpdate=null,this.onZero=null,this.date=null,this.utc=null,console.log("Destroy",this,i)}}},7868:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return N}});var n=r(6252),i=r(3577);const s={class:"flex justify-center flex-wrap full-h relative",style:{height:"auto","max-width":"1700px",margin:"auto"}},a={key:1},o={style:{flex:"0 1 1200px"}},l={class:"side-article flex-fill"};function c(t,e,r,c,d,h){const u=(0,n.up)("PagePath"),p=(0,n.up)("PageTitle"),m=(0,n.up)("LoadingComponent"),g=(0,n.up)("MarkdownArticle"),f=(0,n.up)("ToC");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",null,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u),(0,n._)("h1",null,(0,i.zw)(d.title),1)])),_:1})]),(0,n._)("div",s,[d.isFetching?((0,n.wg)(),(0,n.j4)(m,{key:0})):d.fetchError?((0,n.wg)(),(0,n.iD)("div",a," Error ")):((0,n.wg)(),(0,n.iD)(n.HY,{key:2},[(0,n._)("div",o,[(0,n.Wm)(g,{ref:"article",article:d.content,onReady:h.contentReady},null,8,["article","onReady"])]),(0,n._)("div",l,[(0,n.Wm)(f,{ref:"toc",target:()=>this.$refs.article?.$el},null,8,["target"])])],64))])],64)}var d=r(6004),h=r(222),u=r(6120);const p={class:"reading-progress"},m={ref:"reading_article_progress",class:"reading-progress-fill"};function g(t,e,r,i,s,a){const o=(0,n.up)("CKArticleContent");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",p,[(0,n._)("div",m,null,512)]),(0,n.Wm)(o,{class:"flex-fill article overflow-auto full-h",source:r.article,onReady:e[0]||(e[0]=e=>t.$emit("ready"))},null,8,["source"])])}const f=["innerHTML"];function v(t,e,r,i,s,a){return(0,n.wg)(),(0,n.iD)("div",{ref:"article",class:"ck-content",innerHTML:a.parsedText},null,8,f)}r(560);var w=r(7688),b=r(2229),_=r(8753),y=r(3222);function k(t){var e,r={};const n=/ *([^=\s]+)="([^"]*)"/g;while(e=n.exec(t)){if(!e)break;r[e[1]]=e[2]}return r}var T={emits:["ready"],props:{source:{type:String,default:""}},data(){return{tableObserver:null,markdownClocks:[]}},beforeCreate(){},beforeUnmount(){this.markdownClocks.forEach((t=>{t.$destroy()})),this.markdownClocks=[]},watch:{parsedText:{immediate:!0,handler(){this.$el&&this.$el.querySelectorAll("[data-src]").forEach((t=>{b.cD.unobserve(t),t.onclick=null})),this.$nextTick((()=>{this.$el.querySelectorAll("[data-src]").forEach((t=>{b.cD.observe(t)})),this.$el.querySelectorAll("figure > img").forEach((t=>{t.classList.add("pointer"),t.onclick=()=>{window.$gallery([{src:t.getAttribute("data-src")||t.getAttribute("src"),name:t.getAttribute("title")||t.getAttribute("alt"),description:""}])}}))})),this.markdownClocks.forEach((t=>{t.$destroy()})),this.markdownClocks=[],this.$nextTick((()=>{this.$el.querySelectorAll("[data-time]").forEach((t=>{var e=t.getAttribute("data-time");this.markdownClocks.push(new w.Z({date:e?new Date(e).getTime():void 0,interval:1e3,onUpdate:(r,n)=>{t.innerHTML=e?this.localizeTime.map(((t,e)=>void 0===r[e]?"":r[e]+t)).join(" "):n},onZero(){t.innerHTML="⏱️ Expired",this.$destroy()}}))}))})),this.$emit("ready")}}},computed:{parsedText(){const t=t=>({name:t,id:"c1002",_id:t,role:"warrior",attribute:"fire",rarity:5,zodiac:"goat",tags:[]}),e=t=>({name:t,id:"art0001",_id:t,role:"warrior",rarity:5,tags:[]});let r=this.source.replace(/<hero([^>]*)>(.*?)<\/hero>/g,(function(e,r){let n=k(r);return`<a href="/#/hero/${n._id}" >${(0,y.hero)(n,t(n._id),_.cK)}</a>`})).replace(/<artifact([^>]*)>(.*?)<\/artifact>/g,(function(t,r){let n=k(r);return`<a href="/#/artifacts/${n._id}" >${(0,y.artifact)(n,e(n._id),_.cK)}</a>`})).replace(/\ssrc\s*=/g," data-src=").trim();return r},localizeTime(){return this.$tm("strings.Dhms")}}},$=r(3744);const D=(0,$.Z)(T,[["render",v]]);var x=D,C={emits:["ready"],components:{CKArticleContent:x},props:{article:{type:String,default:""}},methods:{updateReadingProgress(){var t=document.getElementById("app_content").parentNode;let e=window.innerHeight;this.$refs.reading_article_progress.style.setProperty("width",t.scrollTop/(t.scrollHeight-e)*100+"%")}},mounted(){document.getElementById("app_content").parentNode.addEventListener("scroll",this.updateReadingProgress)},beforeUnmount(){document.getElementById("app_content").parentNode.removeEventListener("scroll",this.updateReadingProgress)}};const Z=(0,$.Z)(C,[["render",g]]);var E=Z,A=r(9963);const I={class:"table-of-contents"},U={ref:"positionIndicator",class:"line"},P=["id"];function L(t,e,r,s,a,o){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",I,[(0,n._)("div",U,null,512),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.headings,(t=>((0,n.wg)(),(0,n.j4)(l,{key:t.selfId,to:{hash:"#"+t.headingId},onClick:(0,A.iM)((e=>o.scrollToElement(t.el)),["prevent"])},{default:(0,n.w5)((()=>[(0,n._)("div",{id:t.selfId,class:(0,i.C_)(["toc-item text-ellipsis",t.class])},(0,i.zw)(t.title),11,P)])),_:2},1032,["to","onClick"])))),128))])}var M={expose:["refresh"],props:{target:{type:Function,default:()=>null}},data(){return{observer:null,headings:[]}},created(){this.observer=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){let e=t.target;if(t.intersectionRatio>=.75){let t=this.$el.querySelector(".active-toc");t&&t.classList.remove("active-toc");let r=this.$el.querySelector("#"+e.getAttribute("data-toc-id"));r&&(this.$refs.positionIndicator.style.top=2*([...r.parentElement.parentElement.children].indexOf(r.parentElement)-1)+"em",r.classList.add("active-toc"))}}}))}),{rootMargin:"0px",threshold:1})},mounted(){this.$nextTick((()=>this.generateTableOfContents()))},beforeUnmount(){this.observer.disconnect(),this.observer=null},methods:{scrollToElement(t){t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},refresh(){this.observer.disconnect(),this.generateTableOfContents()},generateTableOfContents(){let t=this.target();const e=this.prefix;t&&(this.headings=[].slice.call(t.querySelectorAll("h1, h2, h3, h4, h5, h6")).map(((t,r)=>{const n=e+"-toc-"+r,i=e+"-"+r;return t.setAttribute("data-toc-id",n),this.observer.observe(t),{class:t.tagName.toLowerCase(),title:t.textContent,selfId:n,headingId:i,el:t}})).filter((t=>!!t)))}}};const j=(0,$.Z)(M,[["render",L]]);var H=j,O={components:{LoadingComponent:u.Z,PagePath:d.Z,PageTitle:h.Z,MarkdownArticle:E,ToC:H},props:{heroProp:{}},data(){return{isFetching:!0,fetchError:!1,articleId:this.$route.params.id,author:"",readTime:1,title:"Loading...",content:""}},created(){if(this.heroProp)return this.author="",this.title="Preview",void(this.content=this.heroProp);this.$gameData.guides.get(this.$route.params.id).then((t=>{this.author=t.author,this.title=t.title,this.content=t.content})).catch((t=>{console.error(t),this.fetchError=!0})).then((()=>{this.isFetching=!1}))},methods:{contentReady(){this.$nextTick((()=>{this.$refs.toc.refresh()}))}}};const S=(0,$.Z)(O,[["render",c]]);var N=S}}]);