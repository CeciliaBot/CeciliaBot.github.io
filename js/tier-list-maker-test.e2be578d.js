"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[3644],{7832:function(e,t,i){i.r(t),i.d(t,{default:function(){return ys}});var s=i(6252),r=i(3577);const n={style:{height:"100%",width:"100%"}},o={key:0,style:{position:"fixed",top:"0",left:"0","pointer-events":"none","z-index":"-1",opacity:"0.03",height:"100%",width:"100%"}},l=(0,s._)("img",{src:"https://d3kxs6kpbh59hp.cloudfront.net/community/COMMUNITY/e309bc955b464328ba48997869baa612/e2bbd13b405047668127ef11b7f685e6_1619683690.jpg",style:{height:"100%",width:"100%","object-fit":"cover"}},null,-1),a=[l];function c(e,t,i,l,c,d){const h=(0,s.up)("NewTierList"),m=(0,s.up)("TierList"),p=(0,s.up)("TierListSettings");return(0,s.wg)(),(0,s.iD)("div",n,[e.settings.backgroundImage?((0,s.wg)(),(0,s.iD)("div",o,a)):(0,s.kq)("",!0),(0,s.Wm)(h,{key:"newTierListMenu",class:(0,r.C_)({hide:!e.showNewComponent}),canClose:e.hasSomethingInWorkspace,version:e.VERSION,onWorkTierList:d.loadTierListEvent,onClose:d.closeNewTierListMenu,onSettings:d.openTierListSettings},null,8,["class","canClose","version","onWorkTierList","onClose","onSettings"]),(0,s.Wm)(m,{key:"tierListMain",tierlist:e.current,"can-save-as-new":e.canSaveAsNew,onNewTierList:d.openNewTierListMenu,onSave:d.saveTierList,onSaveAsNew:d.saveNewTierList,onExportAsJSON:d.exportAsJSON,onSettings:d.openTierListSettings},null,8,["tierlist","can-save-as-new","onNewTierList","onSave","onSaveAsNew","onExportAsJSON","onSettings"]),((0,s.wg)(),(0,s.j4)(s.Ob,null,[e.showSettingsModal?((0,s.wg)(),(0,s.j4)(p,{key:0,onClose:d.closeTierListSettings},null,8,["onClose"])):(0,s.kq)("",!0)],1024))])}var d=i(9963);const h=e=>((0,s.dD)("data-v-68ed3da8"),e=e(),(0,s.Cn)(),e),m={class:"full-screen"},p={class:"new-box",style:{"justify-content":"space-evenly"}},u={class:"new-tiers-title",style:{width:"100%"}},g=h((()=>(0,s._)("i",{class:"fas fa-angle-left",style:{"padding-right":"1em"}},null,-1))),w={style:{"align-self":"baseline","font-weight":"200",padding:"30px 0","text-align":"start"}},f=h((()=>(0,s._)("img",{style:{height:"2em","vertical-align":"middle"},src:"/favicons/apple-touch-icon.png"},null,-1))),y={class:"hide-mobile"},v={class:"new-tiers-group"},b={class:"tier-load-box glass-container-2"},k=h((()=>(0,s._)("span",{style:{"font-weight":"600"}},"Your Tier Lists",-1))),_={class:"hide-scrollbar load-body"},T={key:1,style:{"text-align":"center","background-color":"var(--background-modifier-darken-alpha)",padding:"10px","border-radius":"8px","font-size":"20px",height:"min-content"}},x={key:2,style:{width:"100%",height:"100%"}},C=h((()=>(0,s._)("div",{class:"infinite-loading-wrapper"},[(0,s._)("div",{class:"infinite-loading"})],-1))),S=[C],L={class:"hide-scrollbar"};function $(e,t,i,n,o,l){const a=(0,s.up)("TierListCard"),c=(0,s.up)("CustomChangelog"),h=(0,s.Q2)("ripple-effect");return(0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",p,[(0,s._)("div",u,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"material-button flat primary raised mat-hover"},[g,(0,s._)("span",null,(0,r.zw)(e.$t("strings.back")),1)])),[[d.F8,i.canClose],[h]]),(0,s._)("h2",w,[f,(0,s.Uk)((0,r.zw)(e.$t("strings.app_cecilia_tools"))+" v"+(0,r.zw)(i.version.toFixed(2)),1)]),(0,s._)("h1",y,(0,r.zw)(e.$t("strings.new_tier_list")),1)]),(0,s._)("div",v,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[1]||(t[1]=e=>l.newTierList("character")),class:"material-button stroked raised"},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.new_tier_type_hero")),1)])),[[h]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[2]||(t[2]=e=>l.newTierList("artifact")),class:"material-button stroked raised"},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.new_tier_type_artifact")),1)])),[[h]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"material-button stroked raised",onDragover:t[4]||(t[4]=(0,d.iM)((()=>{}),["prevent"])),onDragenter:t[5]||(t[5]=(0,d.iM)((()=>{}),["prevent"])),onDrop:t[6]||(t[6]=(0,d.iM)(((...e)=>l.dropJSONFile&&l.dropJSONFile(...e)),["prevent"])),onClick:t[7]||(t[7]=(...e)=>l.selectJSONFile&&l.selectJSONFile(...e))},[(0,s._)("input",{onChange:t[3]||(t[3]=(...e)=>l.selectedJSONFile&&l.selectedJSONFile(...e)),ref:"json-tierlist-input",type:"file",accept:".json",style:{display:"none"}},null,544),(0,s._)("span",null,(0,r.zw)(e.$t("strings.load_tier_json")),1)],32)),[[h]])]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[8]||(t[8]=t=>e.$emit("settings")),class:"material-button stroked raised"},[(0,s.Uk)((0,r.zw)(e.$t("strings.settings")),1)])),[[h]])]),(0,s._)("div",b,[(0,s._)("h1",null,[k,(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"material-button stroked primary button-large",onClick:t[9]||(t[9]=t=>e.viewChangelog=!e.viewChangelog)},[(0,s._)("span",null,(0,r.zw)(e.viewChangelog?e.$t("strings.load"):e.$t("strings.changelog")),1)])),[[h]])]),(0,s.wy)((0,s._)("div",_,[l.numberOfTierLists&&e.tierListsLoaded?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(l.sortedHistory,(e=>((0,s.wg)(),(0,s.iD)("span",{key:e.id},[(0,s.Wm)(a,{tierlist:e,onLoad:l.loadTierList,onDelete:l.deletePrompt},null,8,["tierlist","onLoad","onDelete"])])))),128)):e.tierListsLoaded?((0,s.wg)(),(0,s.iD)("div",T,[(0,s._)("span",null,(0,r.zw)(e.$t("strings.no_tierlists")),1)])):((0,s.wg)(),(0,s.iD)("div",x,S))],512),[[d.F8,!e.viewChangelog]]),(0,s.wy)((0,s._)("div",L,[(0,s.Wm)(c,{path:"./views/tierlist-maker/"})],512),[[d.F8,e.viewChangelog]])])])}const I={class:"body"},M={class:"description"},N=(0,s._)("span",null,"Open in new tab",-1),D=[N];function R(e,t,i,n,o,l){const a=(0,s.up)("EmotableBox"),c=(0,s.Q2)("ripple-effect");return(0,s.wg)(),(0,s.iD)("div",{class:"tier-card",onClick:t[2]||(t[2]=(0,d.iM)((e=>this.$emit("load",this.tierlist)),["prevent"]))},[(0,s.Wm)(a,{class:"title",tagName:"h2",editable:!1,value:i.tierlist.name},null,8,["value"]),(0,s._)("div",I,[(0,s._)("div",M,[(0,s._)("div",null,[(0,s._)("span",null,(0,r.zw)(e.$t("strings.tier_list_type"))+": "+(0,r.zw)(i.tierlist.type),1)]),(0,s._)("div",null,[(0,s._)("span",null,(0,r.zw)(e.$t("strings.updated_at"))+": "+(0,r.zw)(i.tierlist.updated_at?e.$d(i.tierlist.updated_at,"long"):"-"),1)]),(0,s._)("div",null,[(0,s._)("span",null,(0,r.zw)(e.$t("strings.created_at"))+": "+(0,r.zw)(i.tierlist.created_at?e.$d(i.tierlist.created_at,"long"):"-"),1)])]),i.buttons?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[0]||(t[0]=(0,d.iM)(((...e)=>l.openInNewTab&&l.openInNewTab(...e)),["stop"])),class:"material-button stroked primary",style:{float:"left"}},D)),[[c]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[1]||(t[1]=(0,d.iM)((e=>this.$emit("delete",i.tierlist)),["stop"])),class:"material-button flat warn",style:{float:"right"}},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.delete")),1)])),[[c]])],64)):(0,s.kq)("",!0)])])}var z=i(6163),E=i(4078),A={name:"TierListCard",emits:["load","delete"],components:{EmotableBox:E.Z},props:{tierlist:{type:Object,required:!0},buttons:{type:Boolean,default:!0}},computed:{name:function(){return this.tierlist.name},url(){return(0,z.fA)(this.$route)}},methods:{openInNewTab(){window.open(this.url+"#load-tier-list="+this.tierlist.id,"_blank")}}},O=i(3744);const F=(0,O.Z)(A,[["render",R]]);var j=F,P=i(1918);i(560);const W=["S","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function B(e,t,i){var s;void 0===!t?s=e.length:(s=Number(t),s=isNaN(s)?e.length:s);let r=[];for(var n=0;n<i;n++)r.push([]);e.splice(s,0,{_id:Date.now()+"-"+Math.floor(1e3*Math.random())+"-"+s,name:W[s%W.length],color:null,list:r})}function H(e,t,i,s=1){void 0===i&&(i=t.length);for(var r=0;r<e;r++)B(t,i,s),i++}var U=i(2122);function G(e){return new Promise(((t,i)=>{try{if(!e)throw new Error;var s=new FileReader;s.readAsText(e,"UTF-8"),s.onload=e=>{try{var s=e.target.result,r=JSON.parse(s);["character","artifact"].includes(r.type)?t(r):i({error:2,message:"unsupported_type"})}catch(n){i({error:1,message:"parsing_error"})}}}catch(r){i({error:0,message:"no_file_provided"})}}))}var Z=i(6469),q=i(4985),J={name:"tier-list-main-menu",components:{TierListCard:j,CustomChangelog:U.Z},props:{version:{},canClose:{type:Boolean,required:!1,default:!1}},data:function(){return{tierListsLoaded:!1,viewChangelog:!1}},computed:{tierListHistory(){return this.$store.getters.getTierListDB()},sortedHistory(){return Object.values(this.tierListHistory||{}).sort(((e,t)=>e.updated_at>t.updated_at?-1:0))},numberOfTierLists(){return Object.values(this.tierListHistory).length}},renderTriggered(e){console.log("MainMenu",e)},created:async function(){const e=(0,q.ZP)();e["load-tier-list"]&&(await this.loadTierList({id:Number(e["load-tier-list"])}),(0,q.Nz)("load-tier-list")),this.$store.dispatch("LOAD_TIER_LIST_DB").catch((()=>{this.$snackbar.warn({title:"Can't open local database",description:"Saving and Loading disabled"})})).finally((()=>{this.tierListsLoaded=!0}))},methods:{deletePrompt(e){this.$promiseAlert((0,P.rt)(e.name),this.$t("strings.delete_tier_confirm"),[this.$t("strings.confirm"),this.$t("strings.cancel")]).then((([t])=>{0===t&&this.$store.dispatch("DELETE_TIER_LIST",e)}))},newTierList(e){let t=[];H(5,t),this.emitLoadTierList({type:e,name:":"+(0,Z.k)(["Aware","Clueless","BOOBA","Pepega","PepegaCredit","PepeLaugh","Nerd","CharlotteNoted","RasOk","RasWave","RasLaugh","VildredThink","VildredAngry","MercedesShocked","MercedesCry","AitherFlex","AitherTongue","DieneL","DienePray","CermiaPain","AColiKill","FlanSmh","BelianSmile","NahkwolNope","Skystone","Molagora","MolagoraSeed"])+": "+this.$t("strings.untitled_tier_list"),tiers:t,xy:{names:[],list:[]}})},async loadTierList(e){return this.$store.dispatch("LOAD_TIER_LIST",e.id).then((e=>{this.emitLoadTierList(e)})).catch((e=>{this.$snackbar.error({title:"Loading error",description:e})}))},emitLoadTierList(e){this.$emit("workTierList",e)},dropJSONFile(e){this.parseJSONFile(e.dataTransfer.files[0])},selectJSONFile(e){e.stopPropagation(),this.$refs["json-tierlist-input"].click()},selectedJSONFile(e){this.parseJSONFile(e.target.files[0])},parseJSONFile(e){G(e).then((e=>{this.emitLoadTierList(e)})).catch((e=>{e.error&&this.$snackbar.warn({title:e.message})}))}}};const Y=(0,O.Z)(J,[["render",$],["__scopeId","data-v-68ed3da8"]]);var V=Y;const Q={key:"desktop-buttons",class:"tier-draw-area"},K={key:0,class:"tier-control-buttons glass-container",style:{top:"-10px"},"data-html2canvas-ignore":""},X=(0,s._)("i",{class:"icon fas fa-border-all",style:{"margin-right":"6px"}},null,-1),ee=(0,s._)("i",{class:"icon fas fa-folder-open"},null,-1),te=(0,s._)("i",{class:"icon fas fa-exchange-alt"},null,-1),ie=[te],se=(0,s._)("i",{class:"icon fas fa-times"},null,-1),re=[se],ne=(0,s._)("i",{class:"icon fas fa-save"},null,-1),oe=[ne],le=(0,s._)("span",{class:"icon-stack"},[(0,s._)("i",{class:"icon fas fa-save",style:{"margin-right":"0"}}),(0,s._)("i",{class:"icon fa fa-plus",style:{position:"absolute",top:"7px",left:"25px","font-size":"0.6em"}})],-1),ae=[le],ce=(0,s._)("i",{class:"icon fas fa-file-code"},null,-1),de=[ce],he=(0,s._)("i",{class:"icon fas fa-download"},null,-1),me=(0,s._)("i",{class:"icon fas fa-cog"},null,-1),pe=[me],ue=(0,s._)("i",{class:"icon fas fa-globe"},null,-1),ge=[ue],we=(0,s._)("i",{class:"fa fa-plus"},null,-1),fe={key:2,class:"xy-graph-container"},ye={key:1,class:"tier-control-buttons glass-container",style:{margin:"0","text-align":"end",position:"sticky",top:"0","z-index":"1",display:"flex","margin-bottom":"5px"}},ve={class:"nsearchbar",style:{display:"flex",flex:"1",overflow:"hidden",position:"relative"}},be=["value","placeholder"],ke=(0,s._)("i",{class:"fa fa-filter"},null,-1),_e={style:{"font-size":"1.3em",padding:"0 5px"}},Te={key:"filter-option"},xe={class:"custom-check",style:{margin:"5px"}},Ce=["checked"],Se=(0,s._)("span",{class:"checkmark"},null,-1),Le={class:"custom-check",style:{margin:"5px"}},$e=["checked"],Ie=(0,s._)("span",{class:"checkmark"},null,-1),Me={class:"custom-check",style:{margin:"5px"}},Ne=["checked"],De=(0,s._)("span",{class:"checkmark"},null,-1),Re={class:"custom-check",style:{margin:"5px"}},ze=["checked"],Ee=(0,s._)("span",{class:"checkmark"},null,-1);function Ae(e,t,i,n,o,l){const a=(0,s.up)("MobileFloatingMenu"),c=(0,s.up)("EmotableBox"),h=(0,s.up)("TierListTable"),m=(0,s.up)("TierListXY"),p=(0,s.up)("ScalableDIV"),u=(0,s.up)("TierListItemBox"),g=(0,s.up)("CompareModal"),w=(0,s.up)("FilterModal"),f=(0,s.up)("ItemComment"),y=(0,s.Q2)("tooltip"),v=(0,s.Q2)("ripple-effect");return(0,s.wg)(),(0,s.iD)("div",{class:(0,r.C_)(["tier-maker-container tier",{mobileView:this.mobile,"force-stack-view":1===l.settings.tierListMakerView}])},[(0,s._)("div",Q,[l.mobile?((0,s.wg)(),(0,s.j4)(a,{key:1,options:l.mobileMenuOptions,onNew:t[10]||(t[10]=t=>e.$emit("newTierList")),onSave:l.saveTierList,onSaveAsNew:l.saveNewTierList,onExportJSON:l.exportAsJSON,onExportPNG:l.exportAsPNG,onToggleTierType:l.toggleTierListType,onCompare:t[11]||(t[11]=t=>e.showCompareModal=!0),onStopCompare:t[12]||(t[12]=t=>e.compare=!1),onSettings:t[13]||(t[13]=t=>e.$emit("settings")),onFilters:l.openFilterModal},null,8,["options","onSave","onSaveAsNew","onExportJSON","onExportPNG","onToggleTierType","onFilters"])):((0,s.wg)(),(0,s.iD)("div",K,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[0]||(t[0]=(...e)=>l.toggleTierListType&&l.toggleTierListType(...e)),style:{float:"left"}},[X,(0,s.Uk)(" "+(0,r.zw)(this.tierType?this.$t("strings.row_tier_chart"):this.$t("strings.alignment_chart")),1)])),[[y,()=>e.$t("strings.tier_list_type")]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[1]||(t[1]=t=>e.$emit("newTierList"))},[ee,(0,s.Uk)(" "+(0,r.zw)(e.$t("strings.menu")),1)])),[[y,()=>e.$t("strings.new_tier_list")]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[2]||(t[2]=t=>e.showCompareModal=!0)},ie)),[[d.F8,!e.tierType&&!e.compare],[y,()=>e.$t("strings.compare")]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[3]||(t[3]=t=>e.compare=!1)},re)),[[d.F8,!e.tierType&&e.compare],[y,()=>e.$t("strings.stop_compare")]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[4]||(t[4]=(...e)=>l.saveTierList&&l.saveTierList(...e))},oe)),[[y,()=>e.$t("strings.save")]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[5]||(t[5]=(...e)=>l.saveNewTierList&&l.saveNewTierList(...e)),style:{position:"relative"}},ae)),[[d.F8,i.canSaveAsNew],[y,()=>e.$t("strings.save_as_new")]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[6]||(t[6]=(...e)=>l.exportAsJSON&&l.exportAsJSON(...e))},de)),[[y,()=>e.$t("strings.export_as",["JSON"])]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[7]||(t[7]=(...e)=>l.exportAsPNG&&l.exportAsPNG(...e))},[he,(0,s.Uk)(" "+(0,r.zw)(e.$t("strings.export_as",["PNG"])),1)])),[[y,()=>e.$t("strings.export_as",["PNG"])]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[8]||(t[8]=t=>e.$emit("settings")),style:{float:"right"}},pe)),[[y,()=>e.$t("strings.settings")]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{onClick:t[9]||(t[9]=(...t)=>e.$localePicker&&e.$localePicker(...t)),style:{float:"right"}},ge)),[[y,()=>`<div class='text-center'>${e.$t("strings.language")}<br>Hero & Artifact names</div>`]])])),(0,s.wy)((0,s._)("div",{id:"tiers",class:"tier-drop-area",style:(0,r.j5)({"--label-width":l.labelWidth+"px"})},[(0,s.Wm)(c,{key:"tier-list-title-main",class:"tier-list-title",value:e.tierListName,icon:!0,onUpdate:l.updateTierListTitle},null,8,["value","onUpdate"]),(0,s.Wm)(h,{tiers:e.tiers,"sub-tiers":e.subTiers,itemList:e.charList,onRenameTierRow:l.renameTierRow,onMoveTierRow:l.moveTierRow,onClearTierRow:l.clearTierRow,onDeleteTierRow:l.deleteTierRow,onNewTier:l.addNewTierRow,onNewSubTier:l.newSubTier,onDeleteSubTier:l.deleteSubTier},null,8,["tiers","sub-tiers","itemList","onRenameTierRow","onMoveTierRow","onClearTierRow","onDeleteTierRow","onNewTier","onNewSubTier","onDeleteSubTier"]),(0,s._)("div",{class:"new-tier-box noselect",style:{height:"100px"},onClick:t[14]||(t[14]=(...e)=>l.addNewTierRow&&l.addNewTierRow(...e)),"data-html2canvas-ignore":""},[we,(0,s._)("span",null,(0,r.zw)(e.$t("strings.add_new_tier")),1)])],4),[[d.F8,!e.tierType]]),1===e.tierType?((0,s.wg)(),(0,s.iD)("div",fe,[(0,s.Wm)(p,{id:"AlignChart",height:2500,width:2500,maxzoom:5,minzoom:.03,padding:"70 70 70 70"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{key:"XYGraph",list:e.xy.list,axes:e.xy.names},null,8,["list","axes"])])),_:1})])):(0,s.kq)("",!0)]),(0,s._)("div",{key:"hero-box",class:(0,r.C_)({"mobile-list":l.mobile,"desktop-list":!l.mobile,collapsed:e.collapsedUnrankedList}),style:(0,r.j5)({width:l.mobile?"":l.desktopHeroBoxWidth+"px"})},[l.mobile||l.settings.tierListMakerView?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:0,class:"unranked-toggler",onClick:t[15]||(t[15]=t=>e.collapsedUnrankedList=!e.collapsedUnrankedList)},[(0,s._)("i",{class:(0,r.C_)(["fa",{"fa-angle-right":!e.collapsedUnrankedList,"fa-angle-left":e.collapsedUnrankedList}])},null,2)])),l.mobile?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ye,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",ve,[(0,s._)("input",{ref:"tierlist-maker-search-bar",onInput:t[16]||(t[16]=(...e)=>l.typingSearchQuery&&l.typingSearchQuery(...e)),value:e.filterModel.name,style:{"background-color":"#575656ad"},placeholder:`${e.$t("strings.search")}...`,autocomplete:"off"},null,40,be),(0,s._)("div",{class:"go",onClick:t[17]||(t[17]=t=>(e.filterModel.name="",t.currentTarget.previousSibling.focus()))},[(0,s._)("i",{class:(0,r.C_)(["fa",{"fa-search":!e.filterModel.name,"fa-times":e.filterModel.name}])},null,2)])])),[[v]]),(0,s._)("button",{class:"noselect",style:{border:"solid thin"},onClick:t[18]||(t[18]=(...e)=>l.openFilterModal&&l.openFilterModal(...e))},[ke,(0,s._)("span",_e,(0,r.zw)(e.$t("strings.filter")),1)])])),(0,s.Wm)(u,{list:e.charList,tierType:e.tierType},null,8,["list","tierType"])],6),((0,s.wg)(),(0,s.j4)(s.Ob,null,[e.showCompareModal?((0,s.wg)(),(0,s.j4)(g,{key:0,type:e.elementType,onLoad:t[19]||(t[19]=e=>console.log("comparing")),onCompare:t[20]||(t[20]=t=>e.compare=t),onClose:t[21]||(t[21]=t=>e.showCompareModal=!1)},null,8,["type"])):(0,s.kq)("",!0)],1024)),(0,s.wy)((0,s.Wm)(w,{ref:"filter-modal",sorting:e.sort,filter:e.filterModel,onClose:l.closeFilterModal},{default:(0,s.w5)((()=>[e.showFilterModal?((0,s.wg)(),(0,s.iD)("div",Te,[(0,s._)("label",xe,[(0,s._)("input",{type:"checkbox",checked:e.filterPlacedElements,onChange:t[22]||(t[22]=t=>e.filterPlacedElements=t.target.checked)},null,40,Ce),Se,(0,s.Uk)(" "+(0,r.zw)(e.$t("strings.apply_filter_to_ranked")),1)]),(0,s._)("label",Le,[(0,s._)("input",{type:"checkbox",checked:e.filterModel.hasSkins,onChange:t[23]||(t[23]=t=>e.filterModel.hasSkins=t.target.checked)},null,40,$e),Ie,(0,s.Uk)(" "+(0,r.zw)(e.$t("strings.has_skin")),1)])])):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s._)("label",Me,[(0,s._)("input",{type:"checkbox",checked:e.filterModel.limited_only,onChange:t[24]||(t[24]=t=>e.filterModel.limited_only=t.target.checked)},null,40,Ne),De,(0,s.Uk)(" "+(0,r.zw)(e.$t("strings.limited_only")),1)]),(0,s._)("label",Re,[(0,s._)("input",{type:"checkbox",checked:e.filterModel.collab_only,onChange:t[25]||(t[25]=t=>e.filterModel.collab_only=t.target.checked)},null,40,ze),Ee,(0,s.Uk)(" "+(0,r.zw)(e.$t("strings.collab_only")),1)])])])),_:1},8,["sorting","filter","onClose"]),[[d.F8,e.showFilterModal]]),e.openCommentModal?((0,s.wg)(),(0,s.j4)(f,{key:0,name:l.getItemName(e.openCommentModal),comment:l.getItemComment(e.openCommentModal),onSetcomment:l.updateItemComment,onClose:t[26]||(t[26]=t=>e.openCommentModal=!1)},null,8,["name","comment","onSetcomment"])):(0,s.kq)("",!0)],2)}var Oe=i(2367),Fe=i(5983);const je=e=>((0,s.dD)("data-v-3af6616a"),e=e(),(0,s.Cn)(),e),Pe={class:"sub-tier-headers tier-wrapper type2"},We={key:0,class:"tier-name",style:{background:"transparent"}},Be={key:1,style:{width:"15px"}},He=["onMousedown","onTouchstart"],Ue={class:"flex-fill",style:{display:"table"}},Ge=["onClick"],Ze=je((()=>(0,s._)("i",{class:"fa fa-plus-circle"},null,-1))),qe=[Ze];function Je(e,t,i,n,o,l){const a=(0,s.up)("EmotableBox"),c=(0,s.up)("ResizableSubTiers"),h=(0,s.up)("TierRow"),m=(0,s.up)("RowSettings"),p=(0,s.Q2)("ripple-effect"),u=(0,s.Q2)("tooltip");return(0,s.wg)(),(0,s.iD)("div",{key:"tier-list-table",class:"relative",style:(0,r.j5)(l.computedStyles),"data-drop":"tiers",onDrop:t[2]||(t[2]=(...e)=>l.handleDropEvent&&l.handleDropEvent(...e))},[(0,s._)("div",Pe,[l.settings.rowLabelLayout?((0,s.wg)(),(0,s.iD)("div",Be)):((0,s.wg)(),(0,s.iD)("div",We)),(0,s.Wm)(c,{class:"flex flex-fill tier-list",style:{position:"static","min-height":"auto",padding:"0"},onResize:l.subTierWidthChange,genericRule:{minWidth:200}},(0,s.Nv)({_:2},[i.subTiers.length>1?{name:"default",fn:(0,s.w5)((({resizer:e})=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.subTiers,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{key:"sub"+i,class:"table-alterante-color",style:(0,r.j5)({"flex-grow":`var(--column-grow-${i}, 1)`,flexBasis:0})},[i>0?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"column-resizer",onMousedown:(0,d.iM)(e,["prevent","stop"]),onTouchstart:(0,d.iM)(e,["prevent","stop"])},null,40,He)):(0,s.kq)("",!0),(0,s._)("div",{class:(0,r.C_)(["sub-tier-name flex items-center full-h",{"pad-5":i>0}])},[(0,s._)("div",Ue,[(0,s.Wm)(a,{class:"center-tier-label-input",value:t.name,style:{width:"100%"}},null,8,["value"])]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"relative overflow-hidden mat-hover pointer text-center",onClick:e=>l.deleteSubTier(i),style:{width:"30px"},"data-html2canvas-ignore":""},[(0,s.Uk)(" ✖ ")],8,Ge)),[[p]])],2)],4)))),128))])),key:"0"}:void 0]),1032,["onResize"]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("span",{class:"pad-5 pointer",style:{width:"30px"},onClick:t[0]||(t[0]=(...e)=>l.emitNewSubCategory&&l.emitNewSubCategory(...e)),"data-html2canvas-ignore":""},qe)),[[u,"New Sub-Tier"]])]),(0,s.Wm)(d.W3,{name:l.animation,tag:"div"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tiers,((e,t)=>((0,s.wg)(),(0,s.j4)(h,{key:e._id,index:t,tier:e,color:e.color||o.labelColors[t%o.labelColors.length],"data-item-index":t,onMove:l.moveTierListRow,onRename:l.updateTierTitle,onDropItem:l.tierRowDropItem,onSettings:l.openRowSettingsModal},null,8,["index","tier","color","data-item-index","onMove","onRename","onDropItem","onSettings"])))),128))])),_:1},8,["name"]),((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[o.showRowModal?((0,s.wg)(),(0,s.j4)(m,{key:0,tier:o.showRowModal,onMove:l.moveTierListRow,onDelete:l.deleteTier,onClear:l.clearTier,onNewAbove:l.addNewTierAbove,onNewBelow:l.addNewTierBelow,onClose:t[1]||(t[1]=e=>o.showRowModal=!1)},null,8,["tier","onMove","onDelete","onClear","onNewAbove","onNewBelow"])):(0,s.kq)("",!0)]))],36)}const Ye=["onDrop"],Ve=["onDragclick"],Qe={key:"drag-tier-row-box",class:"drag-tier-container","data-html2canvas-ignore":""},Ke=(0,s._)("i",{class:"fas fa-grip-lines"},null,-1),Xe=[Ke],et={key:1,class:"tiermaker-control-box","data-html2canvas-ignore":""};function tt(e,t,i,n,o,l){const a=(0,s.up)("EmotableBox"),c=(0,s.up)("TierListCompareBox"),h=(0,s.Q2)("tooltip"),m=(0,s.Q2)("drag"),p=(0,s.Q2)("drop");return(0,s.wg)(),(0,s.iD)("div",{class:(0,r.C_)(["tier-wrapper",l.settings.rowLabelLayout?"type1":"type2"])},[(0,s._)("div",{class:"tier-name",style:(0,r.j5)("position: relative; background-color:"+i.color)},[(0,s.wy)(((0,s.wg)(),(0,s.j4)(a,{class:"center-tier-label-input",key:"row-name",value:i.tier.name,onUpdate:l.updateTierName,onContextmenu:(0,d.iM)(l.openRowSettings,["prevent"])},null,8,["value","onUpdate","onContextmenu"])),[[h,{value:"Click to edit.<br>Right click for more options."}]]),(0,s._)("div",{class:"resizer e",onMousedown:t[0]||(t[0]=(0,d.iM)(((...e)=>l.startResizer&&l.startResizer(...e)),["stop","prevent"])),onTouchstart:t[1]||(t[1]=(0,d.iM)(((...e)=>l.startResizer&&l.startResizer(...e)),["stop","prevent"]))},null,32)],4),(0,s._)("div",{class:"flex tier-list",style:(0,r.j5)({"min-height":l.iconFullSize+30+"px"})},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tier.list,((e,t)=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:t,class:"item-area table-alterante-color",style:(0,r.j5)({"flex-grow":`var(--column-grow-${t}, 1)`,flexBasis:0}),onDrop:t=>l.handleDropEvent(t.detail.item,e,t.detail.list,t.detail.index)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((t,n)=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("span",{key:t,class:(0,r.C_)(["tier-item",{"filter-out":!l.tierItemsMask[t]}]),onDragclick:e=>l.itemContextMenu(t,e)},[((0,s.wg)(),(0,s.j4)((0,s.LL)(l.isComponentType),(0,s.dG)({hero:l.getItemId(t),artifact:l.getItemId(t),skin:l.skin[t]},l.avatarIconGenericProps,{border:l.borders[t],onContext:(s,r)=>l.itemContextMenu(t,r,e,i.tier.list)}),null,16,["hero","artifact","skin","border","onContext"])),l.compareTiers?((0,s.wg)(),(0,s.j4)(c,{key:0,item:t,index:n,vertical:i.index,to:l.compareTiers},null,8,["item","index","vertical","to"])):(0,s.kq)("",!0)],42,Ve)),[[m,{drops:["tierlist-element"],index:n,item:t,list:e}],[h,()=>l.getItemTooltip(t)]]))),128))],44,Ye)),[[p,"tierlist-element"]]))),128)),0===l.settings.tierRowControlsType?(0,s.wy)(((0,s.wg)(),(0,s.iD)("span",Qe,Xe)),[[m,{drops:["tiers"],index:i.index,item:"tier-"+i.tier._id,list:i.tier,node:()=>e.$el,vertical:!0}]]):((0,s.wg)(),(0,s.iD)("span",et,[(0,s._)("i",{class:"fas fa-chevron-up",style:{flex:"1",display:"inline-flex","align-items":"center"},onClick:t[2]||(t[2]=t=>e.$emit("move",i.tier,-1))}),(0,s._)("i",{class:"fas fa-cog",style:{flex:"1",display:"inline-flex","align-items":"center"},onClick:t[3]||(t[3]=(...e)=>l.openRowSettings&&l.openRowSettings(...e))}),(0,s._)("i",{class:"fas fa-chevron-down",style:{flex:"1",display:"inline-flex","align-items":"center"},onClick:t[4]||(t[4]=t=>e.$emit("move",i.tier,2))})]))],4)],2)}var it=i(2074),st=i(1930);const rt={class:"tierlist-compare-box",style:{"font-size":"1em",color:"var(--font-color-confirm)"},"data-html2canvas-ignore":""};function nt(e,t,i,n,o,l){return(0,s.wg)(),(0,s.iD)("div",rt,[l.oldPosition?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("span",{style:(0,r.j5)({display:l.array[0]?"":"none"}),class:(0,r.C_)({"compare-up-tier":l.array[0]>0,"compare-down-tier":l.array[0]<0})},(0,r.zw)(Math.abs(l.array[0])),7),(0,s._)("span",{style:(0,r.j5)({display:!l.array[1]||l.array[0]?"none":""}),class:(0,r.C_)([l.array[1]>0?"compare-left-tier":"compare-right-tier"])},(0,r.zw)(Math.abs(l.array[1])),7)],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)("NEW")],64))])}var ot={name:"compare-items",props:["item","to","vertical","index"],computed:{oldPosition(){var e=this.to.tiers||[];for(var t in e){var i=e[t].list||[],s=i.indexOf(this.item);if(s>-1)return[s,t]}return!1},array(){if(this.oldPosition){let e=this.oldPosition[1]-this.vertical;return[e,0!==e?this.index:this.oldPosition[0]-this.index]}return!1}}};const lt=(0,O.Z)(ot,[["render",nt]]);var at=lt,ct={name:"tier-row",emits:["settings","rename","drop-item","move"],inject:["settings","setSettings","avatarIconGenericProps","tierItemsMask","elementType","getItemId","getItemTooltip","itemContextMenu","skin","borders","iconFullSize","compareTiers"],directives:{drag:st.oh,drop:st.Cw},components:{ArtifactIcon:it.Z,EmotableBox:E.Z,TierListCompareBox:at},props:{tier:{type:Object,required:!0},index:{type:Number,required:!0},color:{type:String}},watch:{},data(){return{}},computed:{isComponentType(){return"character"===this.elementType?"HeroIcon":"ArtifactIcon"}},methods:{openRowSettings(){document.activeElement.blur(),this.$emit("settings",this.tier)},updateTierName(e){this.$emit("rename",this.index,e)},handleDropEvent(e,t,i,s){this.$emit("drop-item",e,t,i,s)},startResizer(e){var t=e.target.parentNode,i=t.getBoundingClientRect();document.body.style.pointerEvents="none",document.querySelector("html").style.cursor="w-resize";const s=e=>{const t=e.touches?e.touches[0].clientX:e.clientX;var s=Math.max(50,Math.min(t-i.left+2,300));this.setSettings("labelWidth",s)};function r(){window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",r),window.removeEventListener("touchmove",s),window.removeEventListener("touchend",r),window.removeEventListener("touchleave",r),document.body.style.pointerEvents="",document.querySelector("html").style.cursor=""}window.addEventListener("mousemove",s),window.addEventListener("mouseup",r),window.addEventListener("touchmove",s),window.addEventListener("touchend",r),window.addEventListener("touchleave",r)}}};const dt=(0,O.Z)(ct,[["render",tt]]);var ht=dt;const mt={style:{"max-width":"470px",display:"inline-block"}},pt=["onClick"],ut={style:{"margin-top":"20px"}};function gt(e,t,i,n,o,l){const a=(0,s.up)("EmoteableDiv"),c=(0,s.up)("Modal"),d=(0,s.Q2)("ripple-effect");return(0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s.Wm)(c,{onClick:l.outOfBounds},{title:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("strings.tier_editor")),1)])),default:(0,s.w5)((()=>[(0,s._)("div",mt,[(0,s._)("h3",null,(0,r.zw)(e.$t("strings.label_bg_color"))+":",1),(0,s._)("span",{class:(0,r.C_)(["color-circle",{"selected-color":!o.localTier.color}]),style:{"background-color":"white"},onClick:t[0]||(t[0]=e=>o.localTier.color=null)},"A",2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.colors,(e=>((0,s.wg)(),(0,s.iD)("span",{key:e,class:(0,r.C_)(["color-circle",{"selected-color":e===o.localTier.color}]),style:(0,r.j5)({backgroundColor:e}),onClick:t=>o.localTier.color=e},null,14,pt)))),128)),(0,s._)("div",null,(0,r.zw)(e.$t("strings.selected"))+": "+(0,r.zw)(o.localTier.color||e.$t("strings.automatic")),1)]),(0,s._)("div",null,[(0,s._)("h3",null,(0,r.zw)(e.$t("strings.label_text"))+":",1),(0,s.Wm)(a,{value:o.localTier.name,icon:!0,onUpdate:t[1]||(t[1]=e=>o.localTier.name=e),style:{display:"inline-block",border:"solid 1px",width:"100%","max-width":"470px",height:"70px","font-size":"16px",overflow:"auto"}},null,8,["value"])]),(0,s._)("div",ut,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"flat-button material-button basic basic",onClick:t[2]||(t[2]=t=>e.$emit("newAbove",o.localTier))},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.new_tier_above")),1)])),[[d]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"flat-button material-button basic basic",onClick:t[3]||(t[3]=t=>e.$emit("newBelow",o.localTier))},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.new_tier_below")),1)])),[[d]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"flat-button material-button basic basic",onClick:t[4]||(t[4]=t=>e.$emit("clear",o.localTier))},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.clear_tier")),1)])),[[d]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"flat-button material-button basic basic",onClick:t[5]||(t[5]=t=>e.$emit("move",o.localTier,-1))},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.move_up")),1)])),[[d]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"flat-button material-button basic warn",onClick:t[6]||(t[6]=t=>e.$emit("delete",o.localTier))},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.delete_tier")),1)])),[[d]]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"flat-button material-button basic basic",onClick:t[7]||(t[7]=t=>e.$emit("move",o.localTier,2))},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.move_down")),1)])),[[d]])])])),_:1},8,["onClick"])])}var wt=i(8357);const ft=["#fb8383","#fb9d9d","#ffc3a2","#ffd393","#feffa8","#d4f9aa","#d4fb94","#a4fb93","#96f9be","#88fbdf","#a8edfd","#7ccff3","#7294f7","#9e85f7","#996ccf","#e288e5","#f39bb4","#f9b4c8","#fdedf2","#c7c7c7","#ffffff"];var yt={name:"TierRowSettings",emits:["move","delete","clear","newAbove","newBelow","close"],components:{Modal:wt.Z,EmoteableDiv:E.Z},props:{tier:{type:Object,required:!0}},created(){this.localTier=this.tier},data(){return{localTier:{},colors:ft}},methods:{outOfBounds(e){e.currentTarget===e.target&&this.closeModal()},closeModal(){this.$emit("close")}}};const vt=(0,O.Z)(yt,[["render",gt]]);var bt=vt;function kt(e,t,i){if(t<i&&i--,t!==i){t>=e.length&&(t=e.length-1),i>=e.length&&(i=e.length-1);while(t<0)t+=e.length;while(i<0)i+=e.length;if(i>=e.length){var s=i-e.length+1;while(s--)e.push(void 0)}e.splice(i,0,e.splice(t,1)[0])}}const _t={style:{display:"flex"}};function Tt(e,t,i,r,n,o){return(0,s.wg)(),(0,s.iD)("div",_t,[(0,s.WI)(e.$slots,"default",{resizer:o.resizeColumn},void 0,!0)])}function xt(e,t){return+(Math.round(+(e.toFixed(t)+"e+"+t))+"e-"+t)}let Ct=0,St={},Lt={},$t=0,It=0;function Mt(e){return e.touches&&e.touches[0]?e.touches[0]:e}var Nt={emits:["resize"],props:{genericRule:{type:Object,default:()=>({})},rules:{type:Array,default:()=>[]}},methods:{getColumnRule(e){return this.rules[e]||{minWidth:75}},buildNodeData(e,t){const i=window.getComputedStyle(e);return Object.assign({node:e,index:t,width:parseFloat(i.width),height:parseFloat(i.height),flexGrow:Number(i.flexGrow||1)},this.genericRule,this.getColumnRule(t))},mouseMoveEvent(e){const t="width",i=St,s=Lt;var r=Mt(e).clientX,n=r-Ct;i[t]+=n,s[t]-=n,i[t]<i["minWidth"]&&(s[t]=$t-i["minWidth"],i[t]=i["minWidth"]),s[t]<s["minWidth"]&&(i[t]=$t-s["minWidth"],s[t]=s["minWidth"]),i["flexGrow"]=xt(It*(i[t]/$t),4),s["flexGrow"]=xt(It*(s[t]/$t),4),this.$emit("resize",[[i.index,i.flexGrow,i.width],[s.index,s.flexGrow,s.width]]),Ct=r},resizeColumnStart(e){const t=e.currentTarget.parentNode,i=t.previousElementSibling;i&&(Ct=Mt(e).clientX,Lt=this.buildNodeData(t,Math.max(0,[...t.parentNode.children].indexOf(t))),St=this.buildNodeData(i,Math.max(0,Lt.index-1)),$t=Lt.width+St.width,It=Lt.flexGrow+St.flexGrow,window.addEventListener("mousemove",this.mouseMoveEvent),window.addEventListener("touchmove",this.mouseMoveEvent),window.addEventListener("mouseup",this.resizeColumnEnd),window.addEventListener("touchend",this.resizeColumnEnd))},resizeColumnEnd(){Ct=null,St=null,Lt=null,$t=null,It=null,window.removeEventListener("mousemove",this.mouseMoveEvent),window.removeEventListener("touchmove",this.mouseMoveEvent),window.removeEventListener("mouseup",this.resizeColumnEnd),window.removeEventListener("touchend",this.resizeColumnEnd)},resizeColumn(e){this.resizeColumnStart(e)}}};const Dt=(0,O.Z)(Nt,[["render",Tt],["__scopeId","data-v-4adde40f"]]);var Rt=Dt,zt={emits:["rename-tier-row","delete-tier-row","clear-tier-row","move-tier-row","newTier","newSubTier","deleteSubTier"],components:{TierRow:ht,RowSettings:bt,EmotableBox:E.Z,ResizableSubTiers:Rt},inject:["settings"],props:{tiers:{type:Object,required:!0},subTiers:{type:Object,required:!0},itemList:{type:Array,required:!1,default(){return[]}},mask:{type:Object,required:!1,default(){return{}}}},watch:{},data(){return{labelColors:ft,showRowModal:!1}},computed:{animation(){return 1===this.settings.tierRowControlsType?"list":""},localSubTiers:{get(){return this.subTiers},set(e){return this.$emit("update:subTiers",e)}},computedStyles(){let e={marginTop:"1px"};return this.localSubTiers.forEach(((t,i)=>{t.grow&&(e["--column-grow-"+i]=t.grow)})),e}},methods:{subTierWidthChange(e){e.forEach((e=>{this.localSubTiers[e[0]].grow=e[1]}))},openRowSettingsModal(e){this.showRowModal=e},updateTierTitle(e,t){this.$emit("rename-tier-row",e,t)},deleteTier(e){this.$emit("delete-tier-row",this.tiers.indexOf(e)),this.showRowModal=!1},clearTier(e){this.$emit("clear-tier-row",this.tiers.indexOf(e))},addNewTierAbove(e){this.$emit("newTier",this.tiers.indexOf(e))},addNewTierBelow(e){this.$emit("newTier",this.tiers.indexOf(e)+1)},emitNewSubCategory(){this.$emit("newSubTier")},deleteSubTier(e){this.$emit("deleteSubTier",e)},handleDropEvent(e){this.$emit("move-tier-row",e.detail.oldIndex,e.detail.index)},moveTierListRow(e,t){const i=this.tiers.indexOf(e);-1!==i&&(t=i+t,this.$emit("move-tier-row",i,t))},tierRowDropItem(e,t,i,s){if(i===t)kt(i,i.indexOf(e),s);else{while(i.includes(e))i.splice(i.indexOf(e),1);t.splice(s,0,e)}}}};const Et=(0,O.Z)(zt,[["render",Je],["__scopeId","data-v-3af6616a"]]);var At=Et;const Ot={style:{position:"absolute",top:"10px",left:"0",width:"100%","z-index":"1","text-align":"center"},"data-html2canvas-ignore":""},Ft=["onDragclick"];function jt(e,t,i,n,o,l){const a=(0,s.up)("EmoteableComponent"),c=(0,s.up)("RenameAxes"),d=(0,s.Q2)("ripple-effect"),h=(0,s.Q2)("drag"),m=(0,s.Q2)("tooltip");return(0,s.wg)(),(0,s.iD)("div",{id:"XYCanvas",ref:"XYCanvas",class:(0,r.C_)(["tier-graph-xy noselect",{grid:l.displayGrid}]),"data-drop-type":1,"data-drop":"tierlist-element",onDrop:t[3]||(t[3]=e=>l.handleItemDrop(e,i.list)),onDragenter:t[4]||(t[4]=e=>l.dragOverResize(e.detail.node,!0)),onDragleave:t[5]||(t[5]=e=>l.dragOverResize(e.detail.node,!1))},[o.isMounted?((0,s.wg)(),(0,s.j4)(s.lR,{key:0,to:e.$el.parentNode.parentNode},[(0,s._)("div",Ot,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"material-button flat primary",onClick:t[0]||(t[0]=(...e)=>l.toggleRenameAxesModal&&l.toggleRenameAxesModal(...e))},[(0,s._)("span",null,(0,r.zw)(e.$t("strings.rename_canvas_axes")),1)])),[[d]])])],8,["to"])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(["top: 40px; left: 50%; transform: translateX(-50%);","right: 10px; top: 50%;","bottom: 10px; left: 50%; transform: translateX(-50%);","top: 50%; left: 10px;"],((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:"cartesian-ax"+t,style:(0,r.j5)([e,"position: absolute; font-size: 72px; z-index: 1; pointer-events: none"])},[(0,s.Wm)(a,{value:i.axes[t],editable:!1},null,8,["value"])],4)))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.list,((e,n)=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("span",{key:e.id,style:(0,r.j5)({left:e.x+"%",top:e.y+"%"}),class:(0,r.C_)(["tier-item",{"filter-out":!l.tierItemsMask[e.id]}]),onDragstart:t[1]||(t[1]=e=>l.dragOverResize(e.detail.node,!0,!0)),onDragfail:t[2]||(t[2]=(...e)=>l.restoreElement&&l.restoreElement(...e)),onDragclick:t=>l.itemContextMenu(e.id,t)},[((0,s.wg)(),(0,s.j4)((0,s.LL)(l.isComponentType),(0,s.dG)({hero:l.getItemId(e.id),artifact:l.getItemId(e.id),skin:l.skin[e.id]},l.avatarIconGenericProps,{border:l.borders[e.id],onContext:(t,i)=>l.itemContextMenu(e.id,i)}),null,16,["hero","artifact","skin","border","onContext"]))],46,Ft)),[[h,{drops:["tierlist-element"],index:n,item:e.id,list:i.list}],[m,()=>l.getItemTooltip(e.id)]]))),128)),o.renameAxesModal?((0,s.wg)(),(0,s.j4)(c,{key:1,names:i.axes,onClose:l.toggleRenameAxesModal},null,8,["names","onClose"])):(0,s.kq)("",!0)],34)}function Pt(e,t,i,n,o,l){const a=(0,s.up)("EmoteableComponent"),c=(0,s.up)("Modal");return(0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s.Wm)(c,{onClose:l.emitClose},{title:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("strings.rename_canvas_axes")),1)])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(["top: 60px; left: 50%; transform: translateX(-50%);","right: 10px; top: 50%;","bottom: 10px; left: 50%; transform: translateX(-50%);","top: 50%; left: 10px;"],((e,t)=>((0,s.wg)(),(0,s.j4)(a,{key:"cartesian-ax"+t,value:o.localNames[t],onUpdate:e=>l.updateNames(e,t),style:(0,r.j5)(["position: absolute; font-size: 18px; z-index: 1; width: 45%; min-height: 32px; border: solid thin;",e])},null,8,["value","onUpdate","style"])))),128))])),_:1},8,["onClose"])])}var Wt={name:"TierListXYRename",emits:["close"],components:{EmoteableComponent:E.Z,Modal:wt.Z},props:{names:{type:Array}},data(){return{localNames:[]}},watch:{names:{immediate:!0,deep:!0,handler(){this.localNames=this.names}}},methods:{updateNames(e,t){console.log(e,t),this.localNames[t]=e},emitClose(){this.$emit("close",this.localNames)}}};const Bt=(0,O.Z)(Wt,[["render",Pt]]);var Ht,Ut=Bt,Gt={name:"XY-Graph",directives:{drag:st.oh,drop:st.Cw},components:{ArtifactIcon:it.Z,RenameAxes:Ut,EmoteableComponent:E.Z},inject:["zoom","avatarIconGenericProps","tierItemsMask","elementType","getItemId","getItemTooltip","itemContextMenu","skin","borders"],props:{list:{type:Array,default(){return[]}},axes:{type:Array,default(){return[]}}},data(){return{isMounted:!1,isFirefox:navigator.userAgent.indexOf("Firefox")>-1,renameAxesModal:!1}},mounted(){this.isMounted=!0},beforeUnmount(){Ht=null},computed:{isComponentType(){return"character"===this.elementType?"HeroIcon":"ArtifactIcon"},displayGrid(){return!this.isFirefox||this.zoom>1.2}},watch:{zoom(){Ht&&this.dragOverResize(Ht,!0)}},methods:{toggleRenameAxesModal(){this.renameAxesModal=!this.renameAxesModal},handleItemDrop(e,t){var i=e.detail.clientX,s=e.detail.clientY;let r=this.$el.getBoundingClientRect();i=Math.min(100,Math.max(0,(-r.left+i)/r.width*100)),s=Math.min(100,Math.max(0,(-r.top+s)/r.height*100)),this.dragOverResize(e.detail.node,!1),e.detail.list===this.list?(e.detail.list[e.detail.oldIndex].x=i,e.detail.list[e.detail.oldIndex].y=s,kt(e.detail.list,e.detail.oldIndex,e.detail.list.length),e.detail.node.style.top=s+"%",e.detail.node.style.left=i+"%"):(e.detail.list.splice(e.detail.oldIndex,1),t.push({id:e.detail.item,x:i,y:s}))},dragOverResize:function(e,t,i=!1){var s=e.getBoundingClientRect();e.style.transform=t?"scale("+this.zoom+")":"";var r=e.getBoundingClientRect();i||(e.style.left=s.left+s.width/2-r.width/2+"px",e.style.top=s.top+s.height/2-r.height/2+"px"),Ht=t?e:null},restoreElement:function(e){let t=e.detail.node;Ht=null,t.style.transform="",t.style.top=e.detail.list[e.detail.oldIndex].y+"%",t.style.left=e.detail.list[e.detail.oldIndex].x+"%"}}};const Zt=(0,O.Z)(Gt,[["render",jt]]);var qt=Zt;const Jt=["onDragclick"];function Yt(e,t,i,r,n,o){const l=(0,s.Q2)("drag"),a=(0,s.Q2)("tooltip"),c=(0,s.Q2)("drop");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"tier-database noselect",onDrop:t[0]||(t[0]=e=>o.handleDropEvent(e.detail.item,i.list,e.detail.list,e.detail.index,e.detail))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.list,((e,t)=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("span",{key:"item-"+e,class:"tier-item",onDragclick:t=>o.itemContextMenu(e,t)},[((0,s.wg)(),(0,s.j4)((0,s.LL)(o.isComponentType),(0,s.dG)({"data-item":e,hero:o.getItemId(e),artifact:o.getItemId(e),skin:o.skin[e]},o.avatarIconGenericProps,{border:o.borders[e],onContext:(t,s)=>o.itemContextMenu(e,s,i.list)}),null,16,["data-item","hero","artifact","skin","border","onContext"]))],40,Jt)),[[d.F8,o.tierItemsMask[e]],[l,{drops:["tierlist-element"],index:t,item:e,list:i.list}],[a,()=>o.getItemTooltip(e)]]))),128))],32)),[[c,"tierlist-element"]])}var Vt={name:"TierListItemBox",components:{ArtifactIcon:it.Z},directives:{drag:st.oh,drop:st.Cw},inject:["avatarIconGenericProps","tierItemsMask","elementType","getItemId","getItemTooltip","itemContextMenu","skin","borders","iconPadding"],props:{list:{type:Array,required:!0},tierType:{type:Number,required:!0}},watch:{},computed:{isComponentType(){return"character"===this.elementType?"HeroIcon":"ArtifactIcon"}},methods:{handleDropEvent(e,t,i,s,r){if(i===t)kt(i,i.indexOf(e),s);else if(0===this.tierType){while(i.includes(e))i.splice(i.indexOf(e),1);t.splice(s,0,e)}else i.splice(r.oldIndex,1),t.splice(s,0,e)}}};const Qt=(0,O.Z)(Vt,[["render",Yt]]);var Kt=Qt;const Xt=e=>((0,s.dD)("data-v-6fc5b1de"),e=e(),(0,s.Cn)(),e),ei={class:"tier-load-box",style:{position:"absolute","z-index":"100",left:"0",top:"0",height:"100%",width:"100%"}},ti=Xt((()=>(0,s._)("span",{style:{"font-weight":"600"}},"Compare to",-1))),ii={class:"hide-scrollbar"},si={key:0,class:"load-body"},ri={key:1},ni=Xt((()=>(0,s._)("span",null,"No tier lists availabale",-1))),oi=[ni];function li(e,t,i,n,o,l){const a=(0,s.up)("TierListCard"),c=(0,s.Q2)("ripple-effect");return(0,s.wg)(),(0,s.iD)("div",ei,[(0,s._)("h1",null,[ti,(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{class:"material-button stroked primary",onClick:t[0]||(t[0]=t=>e.$emit("close")),style:{float:"right","font-size":"0.6em",width:"220px"}},[(0,s.Uk)((0,r.zw)(e.$t("strings.cancel")),1)])),[[c]])]),(0,s._)("div",ii,[l.numberOfTierLists?((0,s.wg)(),(0,s.iD)("div",si,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tierListHistory,(t=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(a,{key:t.id,tierlist:t,buttons:!1,onLoad:i=>{e.$emit("compare",t),e.$emit("close")}},null,8,["tierlist","onLoad"])),[[d.F8,t.type===i.type]]))),128))])):((0,s.wg)(),(0,s.iD)("div",ri,oi))])])}var ai={name:"SelectCompareTierList",components:{TierListCard:j},props:{type:{type:String,require:!0}},computed:{tierListHistory(){return this.$store.getters.getTierListDB()},numberOfTierLists(){return Object.values(this.tierListHistory).length}}};const ci=(0,O.Z)(ai,[["render",li],["__scopeId","data-v-6fc5b1de"]]);var di=ci,hi=i(8070),mi=i(54);function pi(e,t,i,n,o,l){const a=(0,s.up)("EmoteableComponent"),c=(0,s.up)("Modal");return(0,s.wg)(),(0,s.j4)(c,{onClose:l.emitClose},{title:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.$t("strings.edit_item_comment"))+" - "+(0,r.zw)(i.name),1)])),default:(0,s.w5)((()=>[(0,s.Wm)(a,{value:o.localComment,onUpdate:l.onUpdate,icon:!0,style:{border:"solid thin",height:"100%","text-align":"start",padding:"5px"}},null,8,["value","onUpdate"])])),_:1},8,["onClose"])}var ui={name:"TierListItemComment",components:{EmoteableComponent:E.Z,Modal:wt.Z},props:{comment:{},name:{}},data(){return{localComment:this.comment}},methods:{emitClose(){this.$emit("close")},onUpdate(e){this.$emit("setcomment",e)}}};const gi=(0,O.Z)(ui,[["render",pi]]);var wi=gi,fi=i(2784);function yi(e){if(e.version<1.7){e.subTiers&&e.subTiers.length||(e.subtiers=[{name:"Default",flex:1}]);const t=e.tiers[0];t&&t.list&&!Array.isArray(t.list[0])&&e.tiers.forEach((t=>{const i=e.subtiers.map((()=>[]));i[0]=[t.list],t.list=i[0]}))}return e}var vi=i(978),bi=i(8439),ki=i(2229);const _i=!1;function Ti(e,t){var i=document.createElement("a");i.download=t+".png",i.href=e.toDataURL(),i.click()}function xi(e){e.$store.commit("loading",!0),e.$nextTick((()=>{i.e(5734).then(i.t.bind(i,5926,23)).then((t=>{let i=e.settings.labelWidth||100,s=e.subTiers.length||1,r=12+1*(s-1),n=Math.ceil(r/s),o=2*(s-1),l=e.subTiers.map(((t,i)=>{const r=t.grow||1,l=Math.max(0,Math.round(n*r)),a=i>0?10:0,c=i<s-1?10:0,d=Math.ceil(l*e.iconFullSize+a+c+l/2+2);return o+=d,[d,a,c]})),a=i+o;var c={allowTaint:!1,useCORS:!0,imageTimeout:0,backgroundColor:"#252B35",logging:!1,removeContainer:!0,x:0,y:0,scrollX:0,scrollY:0,scale:2,onclone:async t=>{if(await(0,ki.rF)(t.querySelector(".tier-draw-area")),e.tierType){let r=t.querySelector("#XYCanvas"),n=e.iconFullSize+15;var i=r.parentNode;i.style.transform="scale(1)",i.style.padding=n/2+"px";var s=i.getBoundingClientRect();r.style.position="relative",r.style.backgroundColor="#252B35",r.style.border="solid thin",r.style.height=s.height+"px",r.style.width=s.width+"px",c.width=s.width+n,c.height=s.height+n}else{if(e.settings.exportTitlessImage){let e=t.querySelector(".tier-list-title");e&&(e.style.display="none")}let i=t.querySelector("#tiers");i.style.position="relative";var r=i.querySelectorAll(".tier-list");r.forEach((e=>{e.style.paddingRight="0",e.style.display="block",e.style.width=o+"px";const t=[...e.children];l.forEach(((i,s)=>{let r=t[s];r&&(r.style.display="inline-flex",r.style.flexGrow=0,r.style.flexShrink=0,r.style.flexWrap="wrap",r.style.width=i[0]+"px",r.style.paddingLeft=i[1]+"px",r.style.paddingRight=i[2]+"px",r.style.height="100%",r.style.verticalAlign="top",e.style.whiteSpace="wrap")}))})),i.style.width=a+"px"}},onrendered:()=>{}};t.default(document.getElementById(e.tierType?"AlignChart":"tiers"),c).then((t=>{if(_i)return Ti(t,e.tierListName);try{e.$gallery([{src:t.toDataURL(),name:e.tierListName,description:"Click the download button or right click on the image to save your tier list!"}])}catch(i){Ti(t,e.tierListName)}})).finally((()=>{e.$store.commit("loading",!1)}))})).catch((()=>{e.$snackbar.error({title:"Error: couldn't load export module."}),e.$store.commit("loading",!1)}))}))}var Ci={name:"TierList",components:{TierListTable:At,TierListItemBox:Kt,TierListXY:qt,ItemComment:wi,CompareModal:di,FilterModal:hi.Z,EmotableBox:E.Z,ScalableDIV:mi.Z},provide(){return{tierItemsMask:(0,s.Fl)((()=>this.tierItemsMask)),elementType:(0,s.Fl)((()=>this.elementType)),getItemId:this.getItemId,getItemName:this.getItemName,getItemComment:this.getItemComment,getItemTooltip:this.getItemTooltip,itemContextMenu:this.itemContextMenu,iconPadding:(0,s.Fl)((()=>this.iconPadding)),iconFullSize:(0,s.Fl)((()=>this.iconFullSize)),skin:(0,s.Fl)((()=>this.skin)),borders:(0,s.Fl)((()=>this.border)),compareTiers:(0,s.Fl)((()=>this.compare))}},inject:["settings","setSettings"],props:{tierlist:{type:Object,default:function(){return{}}},canSaveAsNew:{type:Boolean,default:!1}},watch:{tierlist:function(e,t){e.type&&e!==t&&(this.$store.commit("loading",!0),this.getDatabasePromise(e.type).then((t=>{this.database=t,yi(e),this.updateTierListTitle(e.name),this.tierId=e.id,this.elementType=e.type,this.tierType=e.tier_type||0,this.tierListName=e.name||"",this.tiers=e.tiers||[],this.subTiers=e.subTiers||[{name:"Default",grow:1}],this.xy=e.xy||{},this.xy.names||(this.xy.names=[]),this.xy.list||(this.xy.list=[]),this.skin=e.skin||{},this.border=e.border||{},this.comments=e.comments||{},this.clones=e.clones||{},this.setSettings("labelWidth",e.labelWidth),this.buildItemList(),this.$snackbar.log({title:(0,P.rt)(e.name),description:"Tier list loaded"})})).catch((e=>{console.error(e),this.$snackbar.warn({title:"Error",description:"Tier list loading failed"})})).finally((()=>{this.$store.commit("loading",!1)})))},tierType:function(){this.buildItemList()},filterModel:{deep:!0,handler:function(){this.applyFilter()}},filterPlacedElements:function(){this.applyFilter()},sort:{deep:!0,handler:function(){this.sortList(this.charList,this.sort[0],!1)}}},data:function(){return{autosaveTimer:null,openCommentModal:!1,showCompareModal:!1,compare:!1,collapsedUnrankedList:!1,database:{},showFilterModal:!1,sort:["rarity",!1],filterModel:{name:"",hasSkins:!1,limited_only:!1,collab_only:!1,rarity:[],attribute:[],role:[],zodiac:[],sex:[]},filterPlacedElements:!1,tierItemsMask:{},tierType:0,elementType:"character",tierId:null,tierListName:"CeciliaBot Tier List Maker",charList:[],tiers:[],subTiers:[{name:"Default",grow:1}],xy:{names:[],list:[]},comments:{},skin:{},border:{},clones:{}}},mounted(){window.addEventListener("keydown",this.focusSearchBar)},beforeUnmount(){window.removeEventListener("keydown",this.focusSearchBar),this.autosaveTimer&&(this.autosaveTimer.clearInterval(),this.autosaveTimer=null)},computed:{mobile(){return this.$store.getters.getIsMobile()},labelWidth(){return this.settings.labelWidth||100},iconSize(){return this.settings.iconSize},fullArtwork(){return this.settings.fullArtwork},iconPadding(){return this.settings.showHeroAvatarBorder||this.settings.showRole||this.settings.showName},iconFullSize:function(){return this.iconSize*(this.iconPadding?1.32:1)},desktopHeroBoxWidth:function(){for(var e=350,t=this.iconFullSize,i=1,s=1;s<10;s++){var r=s*t;if(r>=e){i=r<e+50?s:s-1||1;break}}return t*i},mobileMenuOptions(){var e=[{title:this.$t("strings.new_tier_list"),class:"fa fa-plus",click:"new"},{title:this.$t("strings.save"),class:"fa fa-save",click:"save"},{title:this.$t("strings.export_as",["JSON"]),class:"fas fa-code",click:"exportJSON"},{title:this.$t("strings.export_as",["PNG"]),class:"fas fa-download",click:"exportPNG"},{title:0===this.tierType?"Alignment chart":"Classic tierlist",class:"fas fa-border-all",click:"toggleTierType"},{title:this.$t("strings.settings"),class:"fa fa-cog",click:"settings"},{title:this.$t("strings.filter"),class:"fa fa-filter",click:"filters"}];return 0===this.tierType&&e.splice(5,0,this.compare?{title:this.$t("strings.stop_compare"),class:"fas fa-times",click:"stopCompare"}:{title:this.$t("strings.compare"),class:"fas fa-exchange-alt",click:"compare"}),this.canSaveAsNew&&e.splice(2,0,{title:this.$t("strings.save_as_new"),class:"fa fa-save",click:"saveAsNew"}),e}},methods:{updateTierListTitle(e){this.tierListName=e,document.title=e+" | "+this.$t("strings.app_tier_list_maker")},toggleTierListType(){this.tierType=0===this.tierType?1:0},buildItemList(){if(this.charList=[...Object.keys(this.database),...Object.keys(this.clones)],this.charList.forEach((e=>this.tierItemsMask[e]=!0)),this.tierType)for(var e in this.xy.list){var t=this.charList.indexOf(this.xy.list[e].id);-1!==t&&this.charList.splice(t,1)}else this.tiers.forEach((e=>{e.list.forEach((e=>{e.forEach((e=>{var t=this.charList.indexOf(e);-1!==t&&this.charList.splice(t,1)}))}))}));this.applyFilter(),this.sortList(this.charList,this.sort[0],!1)},getDatabasePromise:function(e){switch(e){case"artifact":return this.$store.dispatch("GET_ARTIFACT_DB");case"character":default:return new Promise(((e,t)=>{Promise.all([this.$store.dispatch("GET_HERO_DB"),(0,fi.Z)("./data/HeroSkins.json").then((e=>JSON.parse(e))).catch((()=>({})))]).then((t=>{let i=t[0],s=t[1];for(var r in s)i[r]&&!i[r].skin&&(i[r].skin=s[r]);e(i)})).catch((e=>{t(e)}))}))}},getItem:function(e){var t=this.clones[e]||e;return this.database[t]||{id:t,_id:t}},getItemId:function(e){return this.clones[e]||e},getItemName:function(e){var t=this.clones[e]||e;switch(this.elementType){case"character":return this.$store.getters.getHeroName(t);case"artifact":return this.$store.getters.getArtifactName(t);default:return t}},getItemComment:function(e){return this.comments[e]},cloneItem(e){var t=e+""+Date.now();return this.clones[t]=e,this.tierItemsMask[t]=!0,this.skin[e]&&(this.skin[t]=this.skin[e]),this.border[e]&&(this.border[t]=this.border[e]),t},destroyClone(e){delete this.comments[e],delete this.skin[e],delete this.border[e],delete this.clones[e]},isClone(e){return null!=this.clones[e]},addNewTierRow(e){B(this.tiers,e,this.subTiers.length)},newSubTier(){this.subTiers.push({name:"Sub tier"+this.subTiers.length,grow:1}),this.tiers.forEach((e=>{while(e.list.length<this.subTiers.length)e.list.push([])})),this.adjustSubTierRatio()},deleteSubTier(e){this.subTiers.splice(e,1),this.tiers.forEach((t=>{this.clearSubTier(t,e),t.list.splice(e,1)})),this.adjustSubTierRatio()},adjustSubTierRatio(){let e=this.subTiers.length,t=this.subTiers.reduce(((e,t)=>e+(t.grow||1)),0),i=e/t;this.subTiers.forEach((e=>{let t=i*(e.grow||1);e.grow=xt(t,4)}))},tierListToObject(){return{id:0,tier_type:this.tierType,type:this.elementType,labelWidth:this.settings.labelWidth,name:this.tierListName,subTiers:this.subTiers||[],tiers:this.tiers,xy:this.xy||{},skin:this.skin,comments:this.comments,border:this.border,clones:this.clones}},autosave(){localStorage.setItem("TierListAutosave",JSON.stringify(this.tierListToObject()))},saveTierList(){this.$emit("save",this.tierListToObject())},saveNewTierList(){this.$emit("saveAsNew",this.tierListToObject())},exportAsJSON(){this.$emit("exportAsJSON",this.tierListToObject())},exportAsPNG(){xi(this)},openFilterModal:function(e){this.showFilterModal=!0,this.mobile||this.$nextTick((()=>{(0,Oe.oo)(e.currentTarget,this.$refs["filter-modal"].$el.firstChild,{strategy:"fixed",placement:"bottom-end",middleware:[(0,Fe.cv)(5),(0,Oe.uY)(),(0,Oe.RR)()]}).then((({x:e,y:t})=>{this.$refs["filter-modal"].$.props.xy={top:t+"px",left:e+"px"}}))}))},closeFilterModal:function(){this.showFilterModal=!1},applyFilter:function(){for(const e in this.tierItemsMask){let t=!this.charList.includes(e);this.tierItemsMask[e]=!(!t||this.filterPlacedElements)||this.applyFilterItem(this.filterModel,e)}},focusSearchBar(e){e.ctrlKey&&"f"==e.key&&(e.preventDefault(),this.$refs["tierlist-maker-search-bar"].focus(),this.$refs["tierlist-maker-search-bar"].select())},typingSearchQuery:(0,z.Ds)((function(e){this.filterModel.name=e.target.value}),300),applyFilterItem:function(e,t){for(const r in e){var i=this.getItem(t);if("name"!==r){if("hasSkins"===r&&e[r]){if(!i.skin)return!1}else if("limited_only"===r&&e[r]){if(!i.tags.includes(1))return!1;if(i.tags.includes(2)&&!e["collab_only"])return!1}else if(e["limited_only"]||"collab_only"!==r||!e[r]){var s=e[r];if(s.length&&!s.includes(i[r]))return!1}else if(!i.tags.includes(2))return!1}else if(-1===this.getItemName(t).toLowerCase().indexOf(e[r].toLowerCase()))return!1}return!0},sortList:function(e,t,i=!1){const s=!i&&this.sort[1];return(0,vi.Z)(e,t,s,this.getItem)},getItemTooltip(e){return'<p style="text-align: center">'+this.getItemName(e)+"</p>"+(0,P.rt)(this.getItemComment(e)||"")},updateItemComment(e){this.comments[this.openCommentModal]=e},itemContextMenu(e,t,i){var s=this.getItem(e),r=[{name:this.$t("strings.edit_item_comment"),class:"fas fa-edit",handler:()=>{this.openCommentModal=e}}];if(i&&(r.push({name:this.$t("strings.clone_item"),class:"far fa-clone",handler:()=>{i.splice(i.indexOf(e)+1,0,this.cloneItem(this.getItemId(e)))}}),this.isClone(e)&&r.push({name:this.$t("strings.destroy_clone"),class:"far fa-times-circle",color:"red",handler:()=>{i.splice(i.indexOf(e),1),this.destroyClone(e)}})),"character"===this.elementType){r.push({name:this.$t("strings.view_model"),class:"fas fa-link",handler:()=>window.open("https://www.e7vau.lt/portrait-viewer.html?id="+(this.skin[e]||s.id),"_blank").focus()});var n=bi.cK+"item/border/icon_border_",o=["Showdown","Endeavor","Ardor","Skyward","Ambition","Conviction","Resolution","Conquest","Triumph","Indomitable","Valorous","Insight"],l=["Legend","Emperor","Champion","Challenger","Master"],a=["Legend","Champion","Challenger","Master"],c=["Gallantry","Victory","Honor","Determination"].concat(o.slice(1)),d=["Legend","Champion","Challenger","-","Shop"];this.settings.showHeroAvatarBorder&&r.push({name:"Frame",class:"fa fa-circle-notch",children:[{name:"Default",img:n+"base.png",handler:()=>delete this.border[e]},...[["RTA",o,e=>e<=3?a:l,(e,t)=>"icon_border_ss"+(e+1)+"_rta00"+(t+1)],["Arena",c,()=>d,(e,t)=>{var i=t<=2?"rank_"+(t+1):3===t?0===e?"rank_none":"rank_n":"shop_1";return"icon_border_pvp_season"+(e+2)+"_"+i}]].map((t=>({name:t[0],children:t[1].map(((i,s)=>({name:i+" ("+(s+1)+")",children:t[2](s).map(((i,r)=>({name:i,img:bi.cK+"item/border/"+t[3](s,r)+".png",handler:()=>this.border[e]=t[3](s,r)})))})))}))),...[["Free",[["Verdant","300days"],["Unforgettable Memories","365days_3"],["Hologram","episode3_for_1"],["Royal","episode3_lef_1"],["Dragon","episode3_val_1"],["Warrior","episode3_win_1"],["Flame","substory_ma1aa1"],["Mastery","abyss100"],["Pitch-Black","abyss120"],["Mechanical","automt001"]]],["Epic Pass",["Vacation 2019","Back to School 2019","Holiday Party 2019","Romance 2020","Seven Mysteries 2020","Picnic 2020","Summer Night Sky 2020","Vacation 2020","Party 2020","Halloween 2020","Snowflake Festival 2020","Young Love 2021","Youngful Spring 2021","Seven Mysteries 2021","Tea Party 2021","Vacation 2021","Late Summer Daydream 2021","Warm Year-End 2021","Spring 2022 Is Coming!","Picnic 2022","Scorching Sun 2022","2022 World Championship","A Victor's Prestige","Sparkling End of the Year 2022","Romantic Vacation","Radiant Sunlight 2023 Season"].map(((e,t)=>[e,"seasonpass_season"+(t+1)]))],["Support Packs",[["Angelic","donation_1"],["Researcher","donation_2"]]],["E7WC 2021",[["I","e7wc21_001"],["II","e7wc21_002"],["III","e7wc21_003"]]],["E7WC 2022",[["I","e7wc22_001"],["II","e7wc22_002"],["III","e7wc22_003"]]],["E7WC 2023",[["I","e7wc23_001"],["II","e7wc23_002"],["III","e7wc23_003"]]]].map((t=>({name:t[0],children:t[1].map((t=>({name:t[0],img:n+t[1]+".png",handler:()=>this.border[e]="icon_border_"+t[1]})))})))]})}else{const t=this.getItemName(e),i=this.getItemId(e);r.push({name:"View artwork",class:"fas fa-image",handler:()=>this.$gallery([{description:t,src:this.$store.getters.getArtifactImage(i)},{description:"Icon: "+t,src:this.$store.getters.getArtifactIcon(i)}])})}if(s.skin){const t=e=>bi.cK+"face/"+e+"_s.png";r.push({name:this.$t("strings.skin"),class:"fas fa-theater-masks",children:[{name:this.$t("strings.default"),img:t(s.id),handler:()=>delete this.skin[e]}].concat(s.skin.map((i=>({name:i.name,img:t(i.id),handler:()=>this.skin[e]=i.id}))))})}this.$contextmenu(t,r,{mobile:this.mobile})},renameTierRow(e,t){this.tiers[e].name=t},moveTierRow(e,t){t<0||kt(this.tiers,e,t)},clearSubTier(e,t){e.list[t]&&(e.list[t].forEach((e=>{this.charList.push(e)})),e.list[t]=[])},clearTierRow(e){this.tiers[e].list.forEach(((t,i)=>{this.clearSubTier(this.tiers[e],i)}))},deleteTierRow(e){this.clearTierRow(e),this.tiers.splice(e,1)}}};const Si=(0,O.Z)(Ci,[["render",Ae]]);var Li=Si;const $i={class:"glass-container-2 hide-scrollbar",style:{margin:"auto","max-height":"85%",width:"450px","max-width":"90%",padding:"20px",overflow:"scroll","border-radius":"8px"}},Ii={style:{display:"flex","align-items":"center",margin:"10px 0","border-radius":"8px",border:"solid grey",padding:"10px"}},Mi={class:"check",style:{"font-size":"16px"}},Ni=["checked","onChange"],Di=(0,s._)("span",{class:"checkmark"},null,-1),Ri=["value"],zi={style:{display:"inline-block",width:"160px","text-align":"center",float:"right"}},Ei={style:{margin:"10px 0","border-radius":"8px",border:"solid grey",padding:"10px"}},Ai={style:{"text-align":"center",display:"flex","align-items":"center","justify-content":"space-between"}},Oi={class:"switch"},Fi=["checked"],ji=(0,s._)("i",{class:"slider round"},null,-1),Pi=(0,s._)("br",null,null,-1),Wi={style:{height:"115px"}},Bi=(0,s._)("div",{class:"tier-name",style:{"background-color'":"rgb(180,58,58)"}},"Preview",-1),Hi={class:"tier-list noselect",style:{"min-height":"50px"}},Ui={key:0,class:"drag-tier-container"},Gi=(0,s._)("i",{class:"fas fa-grip-lines"},null,-1),Zi=[Gi],qi={key:1,class:"tiermaker-control-box"},Ji=(0,s._)("i",{class:"fas fa-chevron-up"},null,-1),Yi=(0,s._)("i",{class:"fas fa-cog"},null,-1),Vi=(0,s._)("i",{class:"fas fa-chevron-down"},null,-1),Qi=[Ji,Yi,Vi],Ki={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Xi={class:"switch"},es=["checked"],ts=(0,s._)("i",{class:"slider round"},null,-1),is={style:{margin:"2px 0","border-radius":"8px",border:"solid grey",padding:"10px"}},ss={style:{display:"flex","align-items":"center","justify-content":"space-between"}},rs={class:"switch"},ns=["checked"],os=(0,s._)("i",{class:"slider round"},null,-1),ls={style:{display:"flex","align-items":"center","justify-content":"space-between",margin:"2px 0"}},as={class:"switch"},cs=["checked"],ds=(0,s._)("i",{class:"slider round"},null,-1);function hs(e,t,i,n,o,l){const a=(0,s.up)("HeroIcon");return(0,s.wg)(),(0,s.iD)("div",{class:"center-modal",onClick:t[5]||(t[5]=(...e)=>l.externalClick&&l.externalClick(...e))},[(0,s._)("div",$i,[(0,s._)("div",Ii,[(0,s._)("div",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)([["showHeroAvatarBorder","show_hero_avatar_frame"],["showName","show_name"],["showRarity","show_rarity"],["showRole","show_role_attr"],["fullArtwork","use_full_art"]],(t=>(0,s._)("div",{key:t[0]},[(0,s._)("label",Mi,[(0,s._)("input",{type:"checkbox",checked:l.settings[t[0]],onChange:e=>l.setLocalSettings(t[0],e.target.checked)},null,40,Ni),Di,(0,s.Uk)(" "+(0,r.zw)(e.$t("strings."+t[1])),1)])]))),64)),(0,s.Uk)(" "+(0,r.zw)(e.$t("strings.size"))+": ",1),(0,s._)("input",{type:"range",min:"40",max:"120",step:"5",value:e.localSettings.iconSize,onChange:t[0]||(t[0]=e=>l.setLocalSettings("iconSize",Number(e.target.value)))},null,40,Ri),(0,s.Uk)((0,r.zw)(e.localSettings["iconSize"]),1)]),(0,s._)("div",zi,[(0,s.Wm)(a,{hero:"alencia",type:e.localSettings.fullArtwork?1:0,hover:!1,showname:e.localSettings.showName,showrole:e.localSettings.showRole,showrarity:e.localSettings.showRarity,size:e.localSettings.iconSize,"show-avatar-border":e.localSettings.showHeroAvatarBorder,lazyload:!0},null,8,["type","showname","showrole","showrarity","size","show-avatar-border"])])]),(0,s._)("div",Ei,[(0,s._)("div",Ai,[(0,s._)("span",null,(0,r.zw)(e.$t("strings.compact_tier_name")),1),(0,s._)("label",Oi,[(0,s._)("input",{type:"checkbox",checked:1===e.localSettings.rowLabelLayout,onChange:t[1]||(t[1]=t=>l.setLocalSettings("rowLabelLayout",e.localSettings.rowLabelLayout?0:1))},null,40,Fi),ji])]),Pi,(0,s._)("div",Wi,[(0,s._)("div",{class:(0,r.C_)(["tier-wrapper",{type1:e.localSettings.rowLabelLayout,type2:!e.localSettings.rowLabelLayout}])},[Bi,(0,s._)("div",Hi,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["white","yellow","blue","red"],(e=>(0,s._)("div",{key:"preview-item"+e,style:(0,r.j5)(["display: inline-block;border-radius: 50px;height: 30px;width: 30px;",{backgroundColor:e}])},null,4))),64)),e.localSettings.tierRowControlsType?((0,s.wg)(),(0,s.iD)("div",qi,Qi)):((0,s.wg)(),(0,s.iD)("div",Ui,Zi))])],2)]),(0,s._)("div",Ki,[(0,s._)("span",null,(0,r.zw)(e.$t("strings.simplified_tier_ctrl")),1),(0,s._)("label",Xi,[(0,s._)("input",{type:"checkbox",checked:1===e.localSettings.tierRowControlsType,onChange:t[2]||(t[2]=t=>l.setLocalSettings("tierRowControlsType",e.localSettings.tierRowControlsType?0:1))},null,40,es),ts])])]),(0,s._)("div",is,[(0,s._)("div",ss,[(0,s._)("span",null,(0,r.zw)(e.$t("strings.tier_list_vertical_layout")),1),(0,s._)("label",rs,[(0,s._)("input",{type:"checkbox",checked:1===e.localSettings.tierListMakerView,onChange:t[3]||(t[3]=t=>l.setLocalSettings("tierListMakerView",e.localSettings.tierListMakerView?0:1))},null,40,ns),os])]),(0,s._)("div",ls,[(0,s._)("span",null,(0,r.zw)(e.$t("strings.export_png_without_title")),1),(0,s._)("label",as,[(0,s._)("input",{type:"checkbox",checked:e.localSettings.exportTitlessImage,onChange:t[4]||(t[4]=t=>l.setLocalSettings("exportTitlessImage",!e.localSettings.exportTitlessImage))},null,40,cs),ds])])])])])}var ms={name:"tier-list-settings",inject:["settings","setSettings"],data:function(){return{localSettings:{}}},watch:{},created:function(){this.localSettings=JSON.parse(JSON.stringify(this.settings))},methods:{setLocalSettings(e,t){this.localSettings[e]=t},externalClick(e){e.currentTarget===e.target&&this.closeAndSave()},closeAndSave(){for(const e in this.localSettings)this.setSettings(e,this.localSettings[e]);this.$emit("close")}}};const ps=(0,O.Z)(ms,[["render",hs]]);var us=ps,gs=i(5312),ws={name:"tier-list-maker",components:{NewTierList:V,TierList:Li,TierListSettings:us},provide:function(){return{settings:(0,s.Fl)((()=>this.settings)),setSettings:(e,t)=>this.settings[e]=t,avatarIconGenericProps:(0,s.Fl)((()=>this.avatarIconGenericProps))}},data:function(){return{VERSION:1.7,current:{},showNewComponent:!0,hasSomethingInWorkspace:!1,canSaveAsNew:!1,showSettingsModal:!1,settings:{tierListMakerView:0,backgroundImage:0,rowLabelLayout:0,labelWidth:null,tierRowControlsType:this.$store.state.isMobile?1:0,exportTitlessImage:!1,iconSize:75,showHeroAvatarBorder:!1,showName:!1,showRole:!1,showRarity:!1,fullArtwork:!1}}},renderTriggered(e){console.log("Index",e)},computed:{tierListHistory(){return this.$store.getters.getTierListDB()},iconRequiresPadding(){return this.settings.showHeroAvatarBorder||this.settings.showRole||this.settings.showName},avatarIconGenericProps(){return{type:this.settings.fullArtwork?1:0,hover:!1,showname:this.settings.showName,showrole:this.settings.showRole,showrarity:this.settings.showRarity,showAvatarBorder:this.settings.showHeroAvatarBorder,size:this.settings.iconSize,lazyload:!0,class:{"no-padding":!this.iconRequiresPadding}}}},methods:{setAsWorkspaceTierList(e){this.current=e},openNewTierListMenu(){this.showNewComponent=!0},closeNewTierListMenu(){this.showNewComponent=!1},openTierListSettings(){this.showSettingsModal=!0},closeTierListSettings(){this.showSettingsModal=!1},loadTierListEvent(e){this.hasSomethingInWorkspace?this.$promiseAlert(this.$t("strings.warning"),this.$t("strings.l_while_tier_list_open",["<b>"+this.$t("strings.cancel")+"</b>"]),[this.$t("strings.confirm"),this.$t("strings.cancel")]).then((([t])=>{0===t?this.loadTierList(e):this.closeNewTierListMenu()})):this.loadTierList(e)},loadTierList(e){this.showNewComponent=!1,e.id?this.canSaveAsNew=!0:this.canSaveAsNew=!1,this.setAsWorkspaceTierList(e),this.hasSomethingInWorkspace=!0},saveTierList(e){let t=(new Date).getTime();e.id=this.current.id||t,e.created_at=this.current.created_at||t,e.updated_at=t,e.version=this.VERSION,this.$store.dispatch("SAVE_TIER_LIST",JSON.parse(JSON.stringify(e))).then((()=>{this.canSaveAsNew=!0,this.$snackbar.log({title:"Saved successfully!"})})).catch((e=>{this.$snackbar.error({title:"Save failed",description:e})}))},saveNewTierList(e){let t=(new Date).getTime();e.id=t,e.created_at=t,e.updated_at=t,e.version=this.VERSION,this.$store.dispatch("SAVE_TIER_LIST",JSON.parse(JSON.stringify(e))).then((()=>{this.$snackbar.log({title:"Saved successfully!"})})).catch((e=>{this.$snackbar.error({title:"Save failed",description:e})}))},exportAsJSON(e){let t=(new Date).getTime();e.id=this.current.id||t,e.created_at=this.current.created_at||null,e.updated_at=t,e.version=this.VERSION,(0,gs.Z)(e.name||"TierList",e)}},beforeCreate(){window.onbeforeunload=function(){return!0}},beforeUnmount(){window.onbeforeunload=null},beforeRouteLeave:async function(){if(!this.hasSomethingInWorkspace)return!0;let e=await this.$promiseAlert(this.$t("strings.warning"),this.$t("strings.l_while_tier_list_open",["<b>"+this.$t("strings.cancel")+"</b>"]),[this.$t("strings.confirm"),this.$t("strings.cancel")]);return(!Array.isArray(e)||1!==e[0])&&void 0}};const fs=(0,O.Z)(ws,[["render",c]]);var ys=fs}}]);