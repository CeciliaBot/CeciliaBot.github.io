"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[2665],{7688:function(t,e,n){n.d(e,{J:function(){return u},Z:function(){return i}});n(560);class i{constructor(t={}){this.setData(t),this.startTimer()}setData(t){this.date=void 0!==t.date?t.date&&isNaN(t.date)?new Date(t.date).getTime():t.date:this.date,this.utc=void 0!==t.utc?t.utc:this.utc,this.onUpdate=void 0!==t.onUpdate?t.onUpdate:this.onUpdate||function(){},this.onZero=void 0!==t.onZero?t.onZero:function(){}||function(){},this.interval=void 0!==t.interval?t.interval:this.interval||1e3}startTimer(){this.date?this.countDown():this.clock(),this.w=setTimeout((()=>{this.onUpdate&&(this.date?this.t=setInterval((()=>this.countDown()),this.interval):this.t=setInterval((()=>this.clock()),this.interval))}),1e3-(new Date).getMilliseconds())}countDown(){var t=(this.date-Date.now())/1e3,e=[86400,3600,60,1].map((e=>{var n=Math.max(Math.floor(t/e),0);return t-=e*n,n}));this.onUpdate(e,t),this.date-Date.now()<=0&&this.onZero()}padNumber(t){return t<10?"0"+t:t}clock(){var t=new Date,e=this.utc?t.getUTCHours():t.getHours(),n=this.padNumber(this.utc?t.getUTCMinutes():t.getMinutes()),i=this.padNumber(this.utc?t.getUTCSeconds():t.getSeconds());this.onUpdate([e,n,i],e+":"+n+":"+i)}$update(t,e){e&&(clearInterval(this.t),clearTimeout(this.w)),this.setData(t),e&&this.startTimer()}$destroy(){clearInterval(this.t),clearTimeout(this.w),this.t=null,this.w=null,this.interval=null,this.onUpdate=null,this.onZero=null,this.date=null,this.utc=null}}const s=[];var a=null;function o(){null==a&&(a=setInterval((()=>{const t=Date.now();s.forEach((e=>{e&&e.countDown(t)}))}),1e3))}function r(){s.length||(clearInterval(a),a=null)}window.logActiveTimers=()=>console.log(s);class u{constructor(t={}){this.setData(t),this.startTimer()}setData(t){this.date=new Date(t.date||this.date||Date.now()).getTime(),this.utc=t.utc||this.utc,this.onUpdate=t.onUpdate||this.onUpdate||function(){},this.onZero=t.onZero||this.onZero||function(){this.$stop()},this.interval=t.interval||this.interval||1e3}startTimer(){if(this.date-Date.now()<=0)return this.handleZero();this.start(),this.countDown(Date.now())}countDown(t){if(this.date-t<=0)return this.stop(),this.handleZero();var e=(this.date-t)/1e3,n=[86400,3600,60,1].map((t=>{var n=Math.max(Math.floor(e/t),0);return e-=t*n,n}));this.onUpdate(n,e)}handleZero(){this.onZero&&this.onZero()}start(){var t=s.indexOf(this);-1===t&&s.push(this),o()}stop(){var t=s.indexOf(this);-1!==t&&s.splice(t,1),r()}$update(t){this.setData(t),this.startTimer()}$destroy(){this.stop(),this.onUpdate=null,this.onZero=null,this.date=null,this.utc=null,console.log("Destroy",this,s)}}},2665:function(t,e,n){n.r(e),n.d(e,{default:function(){return I}});var i=n(6252);const s=(0,i._)("p",null,"Rate up",-1);function a(t,e,n,a,o,r){const u=(0,i.up)("Banner"),l=(0,i.up)("WidgetLayout");return(0,i.wg)(),(0,i.j4)(l,null,{header:(0,i.w5)((()=>[s])),default:(0,i.w5)((()=>[(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.events,((t,e)=>((0,i.wg)(),(0,i.j4)(u,{key:e,event:t},null,8,["event"])))),128))])])),_:1})}var o=n(3183);const r={class:"relative pointer",style:{"margin-bottom":"20px"}},u=["data-src"],l={class:"banner-timer text-center"},d=(0,i._)("span",null," Time left ",-1);function h(t,e,n,s,a,o){const h=(0,i.up)("CountdownTimer"),c=(0,i.Q2)("lazyloader");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",null,[(0,i.wy)((0,i._)("img",{class:"wgt-radius full-w","data-src":n.event.thumbnail},null,8,u),[[c]]),(0,i._)("div",l,[d,(0,i.Wm)(h,{times:o.dates},null,8,["times"])])])])}function c(t,e,n,s,a,o){return(0,i.wg)(),(0,i.iD)("span")}var m=n(7688),v={emits:["nextTimer","end"],props:{times:{type:Array,default:()=>[]},timeFormat:{type:Array,default:()=>[" days"," hrs"," min"," sec"]},countDownOver:{type:String,default:"Closed"}},data(){return{countDown:null,currentIndex:0}},mounted(){this.createCountdown()},beforeUnmount(){this.countDown&&(this.countDown.$destroy(),this.countDown=null)},watch:{times(){this.currentIndex=0,this.createCountdown()}},methods:{createCountdown(){let t=this;this.currentIndex>this.times.length||!this.times[this.currentIndex]||(this.currentIndex=0,this.countDown&&this.countDown.$destroy(),this.countDown=new m.J({date:this.times[this.currentIndex],interval:60,onUpdate:t=>{this.$el&&(this.$el.innerHTML=this.timeFormat.map(((e,n)=>void 0===t[n]?"":t[n]+e)).join(" "))},onZero(){t.currentIndex+=1;const e=t.times[t.currentIndex];e?(t.$emit("nextTimer",t.currentIndex),this.$update({date:e},!0)):(t.$el.innerHTML=t.countDownOver,this.$destroy(),t.countDown=null,t.$emit("end"))}}))}}},w=n(3744);const p=(0,w.Z)(v,[["render",c]]);var D=p,f={name:"OngoingBannersWidgetItem",components:{CountdownTimer:D},props:{event:{type:Object,default:()=>({})}},data(){return{}},computed:{startDate(){return new Date(this.event.dt[0]||0).getTime()},endDate(){return new Date(this.event.dt[1]||this.startDate).getTime()},dates(){return[this.startDate,this.endDate]}},methods:{}};const g=(0,w.Z)(f,[["render",h]]);var T=g,Z=n(2784),y={name:"OngoingBannersWidget",components:{WidgetLayout:o.Z,Banner:T},data(){return{events:[]}},created(){(0,Z.Z)("./data/timeline/covenant.json").then((t=>{const e=Date.now(),n=JSON.parse(t).filter((t=>new Date(t.dt[1]||t.dt[0])>e)).map((t=>(t.thumbnail||(t.thumbnail="https://d2x8kymwjom7h7.cloudfront.net/live/application_no/96001/default/11b4b6cac23547308a27648d41ffe783.jpg"),t)));this.events=n}))}};const x=(0,w.Z)(y,[["render",a]]);var I=x},3183:function(t,e,n){n.d(e,{Z:function(){return h}});var i=n(6252);const s={class:"widget-style glass-container-2 overflow-hidden"},a={class:"widget-title-bar text-ellipsis"},o={class:"widget-body hide-scrollbar"};function r(t,e,n,r,u,l){return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",a,[(0,i.WI)(t.$slots,"header")]),(0,i._)("div",o,[(0,i.WI)(t.$slots,"default")])])}var u={},l=n(3744);const d=(0,l.Z)(u,[["render",r]]);var h=d}}]);