"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[3853],{4985:function(e,t,i){i.d(t,{Nz:function(){return o},ZP:function(){return n}});i(560);function n(){return a("#")}function o(e){r("#",e)}function r(e="#",t){var i=t;Array.isArray(i)||(i=[i]);var n=window.location.href.split(e);n[n.length-1]=n[n.length-1].replace(new RegExp("("+i.join("|")+")[^&,]*","g"),""),window.history.replaceState(history.state,"",n.filter((e=>e)).join(e))}function a(e="#"){var t="",i=window.location.href.split(e);t=i[i.length-1]||"";var n={_stringHash:t};return t.split(/,|&/g).forEach((e=>{var t=e.split("=");n[t[0]]=void 0==t[1]||t[1]})),n}function s(e,t,i){var n=window.location.href.split(e);1===n.length&&n.push(""),i&&"#"===e&&n.length<3&&n.push("");var o=n.pop().split(/,|&/g).map((e=>{var t=e.split("=");return[t[0],void 0==t[1]||t[1]]})).filter((e=>e[0]));for(var r in t){for(var a,s=t[r],c=0;c<o.length;c++)if(o[c][0]===r){o[c][1]=s,a=!0;break}a||o.push([r,s])}n.push(o.map((e=>e.join("="))).join("&")),window.history.replaceState(history.state,"",n.filter((e=>e)).join(e))}window.setURLParams=s},6469:function(e,t,i){i.d(t,{R:function(){return o},k:function(){return n}});i(560);function n(e){return e[Math.floor(Math.random()*e.length)]}function o(e,t,i){if(t<i&&i--,t!==i){t>=e.length&&(t=e.length-1),i>=e.length&&(i=e.length-1);while(t<0)t+=e.length;while(i<0)i+=e.length;if(i>=e.length){var n=i-e.length+1;while(n--)e.push(void 0)}e.splice(i,0,e.splice(t,1)[0])}}},6163:function(e,t,i){function n(e,t){var i=null;return function(){clearTimeout(i);var n=arguments,o=this;i=setTimeout((function(){e.apply(o,n)}),t)}}function o(e,t){var i=!1;return function(){i||(e.apply(this,arguments),i=!0,setTimeout((function(){i=!1}),t))}}function r(e=!1){let t=window.location.href.split("?")[0],i=t.split("#"),n=e&&"#"===e.href.charAt(0)?2:1;while(i.length>n)i.pop();return i.join("#")}i.d(t,{Ds:function(){return n},P2:function(){return o},fA:function(){return r}})},5312:function(e,t,i){i.d(t,{Z:function(){return n}});i(8858),i(1318),i(3228);function n(e,t){const i=document.createElement("a");i.href=URL.createObjectURL(new Blob([JSON.stringify(t,null,2)],{type:"text/plain"})),i.setAttribute("download",e+".json"),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}},1918:function(e,t,i){i.d(t,{IB:function(){return o},KZ:function(){return r},Mf:function(){return h},QT:function(){return d},VS:function(){return g},ds:function(){return a},oD:function(){return l},rt:function(){return s}});var n=i(8439),o={HitSet:n.cK+"item/icon_set_acc.png",AttackSet:n.cK+"item/icon_set_att.png",UnitySet:n.cK+"item/icon_set_coop.png",CounterSet:n.cK+"item/icon_set_counter.png",CritChanceSet:n.cK+"item/icon_set_cri.png",CritDamageSet:n.cK+"item/icon_set_cri_dmg.png",DefenseSet:n.cK+"item/icon_set_def.png",HealSet:n.cK+"item/icon_set_heal_inc.png",ImmunitySet:n.cK+"item/icon_set_immune.png",HealthSet:n.cK+"item/icon_set_max_hp.png",PenetrationSet:n.cK+"item/icon_set_penetrate.png",RageSet:n.cK+"item/icon_set_rage.png",UnknownSet:n.cK+"item/icon_set_random.png",ResistSet:n.cK+"item/icon_set_res.png",RevengeSet:n.cK+"item/icon_set_revenge.png",InjurySet:n.cK+"item/icon_set_scar.png",SpeedSet:n.cK+"item/icon_set_speed.png",LifestealSet:n.cK+"item/icon_set_vampire.png",Attack:n.cK+"img/icon_menu_att.png",Defense:n.cK+"img/icon_menu_def.png",Health:n.cK+"img/icon_menu_max_hp.png",Speed:n.cK+"img/icon_menu_speed.png",CritChance:n.cK+"img/icon_menu_cri.png",CritDamage:n.cK+"img/icon_menu_cri_dmg.png",Effectivness:n.cK+"img/icon_menu_acc.png",EffectResistance:n.cK+"img/icon_menu_res.png",DualAttack:n.cK+"img/icon_menu_coop.png",Counter:n.cK+"img/icon_menu_counter.png",Rarity:n.cK+"cm_icon_star.png",Warrior:n.cK+"img/cm_icon_role_warrior.png",Knight:n.cK+"img/cm_icon_role_knight.png",Thief:n.cK+"img/cm_icon_role_thief.png",Ranger:n.cK+"img/cm_icon_role_ranger.png",Mage:n.cK+"img/cm_icon_role_mage.png",SoulWeaver:n.cK+"img/cm_icon_role_soul-weaver.png",Fire:n.cK+"img/cm_icon_profire.png",Ice:n.cK+"img/cm_icon_proice.png",Grass:n.cK+"img/cm_icon_proearth.png",Dark:n.cK+"img/cm_icon_promdark.png",Light:n.cK+"img/cm_icon_promlight.png",Aries:n.cK+"img/cm_icon_zodiac_ram.png",Taurus:n.cK+"img/cm_icon_zodiac_bull.png",Gemini:n.cK+"img/cm_icon_zodiac_twins.png",Cancer:n.cK+"img/cm_icon_zodiac_crab.png",Leo:n.cK+"img/cm_icon_zodiac_lion.png",Virgo:n.cK+"img/cm_icon_zodiac_maiden.png",Libra:n.cK+"img/cm_icon_zodiac_scales.png",Scorpius:n.cK+"img/cm_icon_zodiac_scorpion.png",Sagittarius:n.cK+"img/cm_icon_zodiac_archer.png",Capricornus:n.cK+"img/cm_icon_zodiac_goat.png",Aquarius:n.cK+"img/cm_icon_zodiac_waterbearer.png",Pisces:n.cK+"img/cm_icon_zodiac_fish.png",CermiaWeird:n.cK+"ui/emote/CermiaWeird.png",CharlotteNoted:n.cK+"ui/emote/c5009_hard_001.webp",MelanyLaugh:n.cK+"ui/emote/c3121_provoke_001.webp",ChristieTired:n.cK+"ui/emote/c3123_tired_001.webp",DieneL:n.cK+"ui/emote/c1076_heart_001.webp",DienePray:n.cK+"ui/emote/c1076_pray_001.webp",RasOk:n.cK+"ui/emote/RasOk_x150.gif",RasWave:n.cK+"ui/emote/RasWave_x150.gif",RasLaugh:n.cK+"ui/emote/RasLaugh_x150.gif",VildredThink:n.cK+"ui/emote/VildredThink_x150.gif",VildredAngry:n.cK+"ui/emote/VildredAngry_x150.gif",MercedesShocked:n.cK+"ui/emote/MercedesSurprised_x150.gif",MercedesCry:n.cK+"ui/emote/MercedesCry_x150.gif",AitherFlex:n.cK+"ui/emote/AitherFlex_x150.gif",AitherTongue:n.cK+"ui/emote/AitherTongue_x150.gif",CermiaPain:n.cK+"ui/emote/c1079_beg_001.webp",AColiKill:n.cK+"ui/emote/c2033_angry_001.webp",FlanSmh:n.cK+"ui/emote/c1110_smh_001.webp",BelianSmile:n.cK+"ui/emote/c1117_laughter_001.webp",NahkwolNope:n.cK+"ui/emote/c1151_nope_001.webp",Skystone:n.cK+"item/token_crystal.png",Transmit:n.cK+"item/token_hero1.png",GoldTransmit:n.cK+"item/token_hero2.png",Powder:n.cK+"item/token_powder.png",Covenant:n.cK+"item/token_ticket_rare.png",Mystic:n.cK+"item/token_ticket_special.png",Galaxy:n.cK+"item/token_ticket_moon.png",MolagoraSeed:n.cK+"item/token_mura.png",Molagora:n.cK+"item/ma_moragora1.png",Banned:n.cK+"img/_cm_banned_res.png",AttackSuccessful:n.cK+"img/battle_pvp_icon_win.png",AttackFailed:n.cK+"img/battle_pvp_icon_lose.png",DefenseSuccessful:n.cK+"img/battle_pvp_icon_def.png",DefenseDefeated:n.cK+"img/battle_pvp_icon_defeat.png",BattleDraw:n.cK+"img/battle_pvp_icon_draw.png",D:n.cK+"img/hero_dedi_a_d.png",C:n.cK+"img/hero_dedi_a_c.png",B:n.cK+"img/hero_dedi_a_b.png",A:n.cK+"img/hero_dedi_a_a.png",S:n.cK+"img/hero_dedi_a_s.png",SS:n.cK+"img/hero_dedi_a_ss.png",SSS:n.cK+"img/hero_dedi_a_sss.png",BOOBA:n.cK+"ui/emote/booba.webp",BASED:n.cK+"ui/emote/BASED.webp",BASEDCIGAR:n.cK+"ui/emote/BASEDCIGAR.webp",modCheck:n.cK+"ui/emote/modCheck.webp",Clueless:n.cK+"ui/emote/Clueless.webp",Aware:n.cK+"ui/emote/AWARE.gif",OMEGALUL:n.cK+"ui/emote/OMEGALUL.png",NOPPERS:n.cK+"ui/emote/NOPPERS.gif",EZ:n.cK+"ui/emote/EZ.png",WHO:n.cK+"ui/emote/WHO.webp",Pepega:n.cK+"ui/emote/pepega.png",PepegaCredit:n.cK+"ui/emote/PepegaCredit.webp",PepeLaugh:n.cK+"ui/emote/PepeLaugh.gif",Copium:n.cK+"ui/emote/copium.png",GIGACHAD:n.cK+"ui/emote/GIGACHAD.webp",SUSSY:n.cK+"ui/emote/SUSSY.webp",Bedge:n.cK+"ui/emote/bedge.webp",Smadge:n.cK+"ui/emote/Smadge.webp",Nerd:n.cK+"ui/emote/Nerd.webp"},r=Object.keys(o).map((e=>({code:e,src:o[e]})));function a(e){var t=document.createElement("img");return t.src=o[e],t.setAttribute("draggable",!1),t.title=":"+e+":",t.style.height="1.5em",t.style.verticalAlign="top",t.style.pointerEvents="none",t.setAttribute("SameSite","Lax"),t}function s(e){let t=(e||"").replace(/<(?!br\s*\/?)[^>]+>/,(e=>e.replace("<","&lt;").replace(">","&gt;").replace("/","&#47;"))),i=t.replace(/:[a-zA-Z0-9_-]+:/g,(function(e){var t=o[e.replace(/:/g,"")];return t?'<img src="'+t+'" title="'+e+'" draggable="false" style="height: 1.5em; vertical-align: top; pointer-events: none;" SameSite="Lax" />':e}));return i}function c(e){var t="";return e.childNodes?(e.childNodes.forEach(((e,i)=>{"#text"===e.nodeName?t+=e.data:"IMG"===e.nodeName?t+=e.title||"":"BR"===e.nodeName&&i>0?t+="<br>":"DIV"!==e.nodeName&&"P"!==e.nodeName||(t+="<div>"+c(e)+"</div>")})),t.replace(/(<[/]*div>){2}/g,"<br>").replace(/(<[/]*div>)/g,"<br>").replace(/(<br>)*$/,"")):e.innerHTML}function l(e){let t=c(e);return t}function h(){if(window.getSelection){const e=window.getSelection();if(e.getRangeAt)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null}function g(e,t,i,n=0){var o,r;window.getSelection&&(o=window.getSelection(),void 0!==i&&void 0!==n&&(r=document.createRange(),r.setStart(e,i),r.setEnd(e,i+n),o.removeAllRanges(),o.addRange(r)),o.rangeCount&&(r=o.getRangeAt(0),r.deleteContents(),r.insertNode(t),r.setStartAfter(t),r.setEndAfter(t),o.removeAllRanges(),o.addRange(r)))}function d(e,t){var i=h();console.log(i);var n=i.startContainer;if(e){if(t){var o=t.contains(n);o?console.log("is a child"):(n=t.lastChild,n||(n=document.createTextNode(""),t.appendChild(n)))}g(n,a(e))}}},4078:function(e,t,i){i.d(t,{Z:function(){return _}});var n=i(6252);function o(e,t,i,o,r,a){const s=(0,n.Q2)("emote");return(0,n.wy)(((0,n.wg)(),(0,n.j4)((0,n.LL)(i.tagName),(0,n.dG)({key:"text-content",ref:"text-box"},e.$attrs,{class:"input-box",contenteditable:i.editable,spellcheck:"false",onBlur:a.onBlur,onClick:a.onClick,innerHTML:a.text}),null,16,["contenteditable","onBlur","onClick","innerHTML"])),[[s]])}var r=i(2367),a=i(1918),s=i(5983),c=new WeakMap;function l(e){var t=c.get(e);if(t)return t.el;var i=document.createElement("div");return i.classList.add("hide-scrollbar"),i.onmousedown=e=>e.preventDefault(),i.style="background: var(--background-color-secondary); padding: 5px 0; border-radius: 8px; z-index: 100; cursor: pointer; position: absolute; top: 0; left: 0; transform: translate(-100%, -100%); max-height: 200px; overflow: auto;",c.set(e,{el:i,results:[],index:0,matchLength:0}),document.body.appendChild(i),i}function h(e){let t=e.target;var i=c.get(t);i&&i.el&&(i.el.remove(),i.el=null),i=null,c.delete(t)}function g(e,t){let i=e.currentTarget.querySelector("img");if(i){let e=i.title;if(!e)return;let r=c.get(t);e=e.slice(1,-1);var n=(0,a.Mf)(),o=n.startContainer;(0,a.VS)(o,(0,a.ds)(e),n.startOffset-r.matchLength,r.matchLength),h({target:t})}}function d(e){if(![17,18,16,20].includes(e.keyCode))if(":"===e.key||229==e.keyCode)h(e),window.requestAnimationFrame((()=>{var e=(0,a.Mf)(),t=e.startContainer;if("#text"===t.nodeName){var i=t.data.slice(0,e.startOffset),n=i.match(/:\w+:$/);if(n){const i=a.IB[n[0].replace(/:/g,"")];if(i){let i=n[0].length;(0,a.VS)(t,(0,a.ds)(n[0].replace(/:/g,"")),e.startOffset-i,i)}}}}));else if(37===e.keyCode||39===e.keyCode)h(e);else if([38,40,13,9].includes(e.keyCode)){var t=c.get(e.target);if(!t||!t.results.length)return;if(t.index||(t.index=0),38===e.keyCode)e.preventDefault(),t.el.children[t.index].style.background="",t.index--,t.index<0&&(t.index=t.results.length-1),t.el.children[t.index].style.background="black",t.el.children[t.index].scrollIntoView(!1);else if(40===e.keyCode)e.preventDefault(),t.el.children[t.index].style.background="",t.index++,t.index>t.results.length-1&&(t.index=0),t.el.children[t.index].style.background="black",t.el.children[t.index].scrollIntoView(!1);else if(13===e.keyCode||9===e.keyCode){e.preventDefault();var i=(0,a.Mf)(),n=i.startContainer;(0,a.VS)(n,(0,a.ds)(t.results[t.index].code),i.startOffset-t.matchLength,t.matchLength),h(e)}}else window.requestAnimationFrame((()=>{var t=l(e.target),i=c.get(e.target),n=(0,a.Mf)(),o=n.startContainer;if("#text"===o.nodeName){var h=o.data.slice(0,n.startOffset),d=h.match(/:\w+$/);if(d){let o=d[0].slice(1);var m=new RegExp("^"+o,"i");t.innerHTML="";var u=a.KZ.filter((e=>m.test(e.code))).slice(0,10);if(i.results=u,i.index=0,i.matchLength=d[0].length,u.forEach((n=>{let o=document.createElement("div");o.style="padding: 0 5px",o.onclick=t=>g(t,e.target),o.onmouseenter=e=>{t.children[i.index].style.background="",i.index=u.indexOf(n),e.target.style.background="black"};let r=(0,a.ds)(n.code);r.style.minWidth="1.5em",o.appendChild(r);var s=document.createTextNode(n.code);o.appendChild(s),t.appendChild(o)})),0==u.length)return void(t.style.display="none");t.style.display="block",t.children[i.index].style.background="black",window.requestAnimationFrame((()=>{(0,r.oo)(n,t,{strategy:"absolute",placement:"top",middleware:[(0,s.cv)(5),(0,r.uY)(),(0,r.RR)()]}).then((({x:e,y:i})=>{Object.assign(t.style,{transform:"translate("+e+"px,"+i+"px)",opacity:1})}))}))}else t.style.display="none"}}))}var m={beforeMount:function(e){e.addEventListener("keydown",d),e.addEventListener("blur",h),e.getCleanInnerHTML=()=>(0,a.oD)(e)},beforeUnmount:function(e){e.getCleanInnerHTML=null,e.removeEventListener("keydown",d),h({target:e})}},u={name:"EmotableBox",emits:["update"],directives:{emote:m},props:{tagName:{type:String,required:!1,default:"DIV"},value:{type:String,required:!1,default:""},editable:{type:Boolean,default:!0},icon:{type:Boolean,default:!1}},renderTriggered(e){console.log("EmoteableDiv",e)},data(){return{showEmoteSelector:!1,emotes:a.KZ,selectorStyling:{left:0,right:0}}},computed:{text(){return(0,a.rt)(this.value)}},methods:{toggleEmoteSelector(){this.showEmoteSelector=!this.showEmoteSelector},clickToInserEmote(e){(0,a.QT)(e,this.$refs["text-box"])},setSelectorStyling(){if(this.icon){var e=this.$refs["text-box"],t=this.$refs["emote-selector"];if(!e)return;(0,r.oo)(e,t,{strategy:"fixed",middleware:[(0,r.X5)({allowedPlacements:["top-end","bottom-end","left-start","right-start"]})]}).then((({x:e,y:t})=>{this.selectorStyling.top=t+"px",this.selectorStyling.left=e+"px"}))}},onClick(){},onBlur(e){try{this.$emit("update",this.$refs["text-box"].getCleanInnerHTML(),e)}catch(t){console.warn(t)}}}},p=i(3744);const f=(0,p.Z)(u,[["render",o]]);var _=f},2074:function(e,t,i){i.d(t,{Z:function(){return c}});var n=i(6252),o=i(8439),r=i(2229),a={name:"artifact-icon",emits:["click","context"],props:{inview:{type:Boolean,required:!1,default:!0},type:{type:Number,default:0},artifact:{type:String},showrole:{type:Boolean,required:!1,default:!0},showname:{type:Boolean,default:!1},showrarity:{type:Boolean,default:!1},size:{type:Number,default:75},lazyload:{type:Boolean,default:!0}},computed:{artifactData:function(){return this.$store.getters.getArtifact(this.artifact)},image:function(){return 1===this.type?this.$store.getters.getArtifactImage(this.artifactData._id):this.$store.getters.getArtifactIcon(this.artifactData._id)},placeholder:function(){return 0===this.type?"":o.cK+"item_arti/icon_art0000.png"},computedStyle(){return{width:"1em","vertical-align":"top",opacity:this.lazyload?0:1,transition:"opacity .4s ease"}}},render:function(){if(this.artifact)return(0,n.h)("div",{class:"hero-icon-comp noselect",style:{"font-size":this.size+"px"},onClick:e=>-1!=e.target.className.indexOf("remove")?this.$emit("remove",this.artifact,e):this.$emit("click",this.artifact,e),onContextmenu:e=>{e.preventDefault(),this.$emit("context",this.artifact,e)}},[(0,n.h)("div",{style:{position:"relative",width:"1em",height:0===this.type?"1em":"auto","text-align":"start","pointer-events":"none"}},[this.lazyload?(0,n.h)("img",{style:"height: 1em; vertical-align: top; position: absolute; transition: opacity .4s ease;",src:this.placeholder,"data-lazy-fader":!0,crossorigin:"anonymous",SameSite:"Lax"}):null,(0,n.wy)((0,n.h)("img",{key:this.image,[this.lazyload?"data-src":"src"]:this.image,crossorigin:"anonymous",SameSite:"Lax",style:this.computedStyle}),[[r.ZP]]),this.showrole?(0,n.h)("div",{class:"attribute-role",style:{"background-image":"url("+this.$store.getters.getRoleIcon(this.artifactData.role)+")"}}):null,this.showrarity?(0,n.h)("div",{class:"wrapper-hero-info rarity-"+this.artifactData.rarity,style:"top: 0; left: 0"}):null]),this["showname"]?(0,n.h)("div",{"pointer-events":"none",style:{width:this.size+(this.removable?.35*this.size:0)+"px"}},[(0,n.h)("p",{class:"label"},this.$store.getters.getArtifactName(this.artifactData._id))]):null])}};const s=a;var c=s},54:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(6252),o=i(3577);const r={style:{position:"absolute",width:"100%","z-index":"1","text-align":"center"}};function a(e,t,i,a,s,c){return(0,n.wg)(),(0,n.iD)("div",{ref:"interactive-element",tabindex:"-1",class:"main-container",onMouseenter:t[0]||(t[0]=(...e)=>c.focus&&c.focus(...e)),onTouchstart:t[1]||(t[1]=(...e)=>c.touchStart&&c.touchStart(...e)),onTouchmove:t[2]||(t[2]=(...e)=>c.touchMove&&c.touchMove(...e)),onTouchend:t[3]||(t[3]=(...e)=>c.touchEnd&&c.touchEnd(...e)),onMousemove:t[4]||(t[4]=(...e)=>c.mouseMove&&c.mouseMove(...e)),onMouseup:t[5]||(t[5]=(...e)=>c.mouseUp&&c.mouseUp(...e)),onMouseleave:t[6]||(t[6]=(...e)=>c.mouseLeave&&c.mouseLeave(...e)),onMousedown:t[7]||(t[7]=(...e)=>c.mouseDown&&c.mouseDown(...e)),onWheel:t[8]||(t[8]=(...e)=>c.mouseWheelZoom&&c.mouseWheelZoom(...e)),onKeydownCapture:t[9]||(t[9]=(...e)=>c.keyDown&&c.keyDown(...e))},[(0,n._)("div",r,[(0,n.WI)(e.$slots,"buttons",{},void 0,!0)]),((0,n.wg)(),(0,n.iD)("div",{key:"resizable-element",class:(0,o.C_)(["noselect",{zoomed:c.zoomed,smooth:this.smoothTransitions}]),style:(0,o.j5)({display:"inline-block",width:this.size[0]+"px",height:this.size[1]+"px",transform:"translate("+this.coordinates[0]+"px,"+this.coordinates[1]+"px) scale("+this.zoom+")","transform-origin":"0 0 0"})},[(0,n.WI)(e.$slots,"default",{loadEvent:c.loadEvent},void 0,!0)],6))],544)}var s,c={},l={name:"interactive-zoom-move",emits:["draggingStart","draggingEnd"],props:["width","height","padding","maxzoom","minzoom","smooth"],provide(){return{zoom:(0,n.Fl)((()=>this.zoom))}},data:function(){return{size:[0,0],zoom:1,defaultZoom:1,MAX_ZOOM:10,MIN_ZOOM:.2,dragging:!1,coordinates:[0,0],parentcontainer:null,parentPadding:[0,0,0,0],pinch:!1,isLoading:!1}},computed:{zoomed:function(){return this.zoom>this.defaultZoom},smoothTransitions:function(){return this.smooth&&!this.dragging&&!this.isLoading}},created:function(){!this.maxzoom||(this.MAX_ZOOM=Number(this.maxzoom)),!this.minzoom||(this.MIN_ZOOM=Number(this.minzoom)),window.addEventListener("resize",this.onScreenResize)},mounted:function(){this.parentcontainer=this.$el,this.$el.focus(),this.size=[this.width,this.height]},beforeUnmount:function(){this.parentcontainer=null,c={},s=null,window.removeEventListener("resize",this.onScreenResize)},watch:{padding:{immediate:!0,handler(e){e&&e.split(" ").forEach(((e,t)=>{this.parentPadding[t]=Number(e)}))}},size(){const e=this.setStartingZoom(this.size);var t=this.zoom===e;this.zoom=e,this.defaultZoom=e,t&&(this.coordinates=this.centerImage(this.size,this.zoom,this.coordinates))},zoom:function(){this.coordinates=this.centerImage(this.size,this.zoom,this.coordinates)},dragging(e){var t="draggingStart";e||(t="draggingEnd"),this.$emit(t)},pinch(e){var t="draggingStart";e||(t="draggingEnd"),this.$emit(t)}},methods:{loadEvent(e){this.isLoading=!0,setTimeout((()=>{this.isLoading=!1}),400);var t=e.target||e.originalTarget||e.path[0],i=t.height,n=t.width;this.coordinates=[0,0],this.size=[n,i],t.style.opacity=1,t.style.transition="all .4s ease",t.style.transform="scale(1)"},focus(){this.$el.focus()},blur(){this.$el.blur()},setStartingZoom:function(e){var t=this.parentcontainer.getBoundingClientRect(),i=t.width-this.parentPadding[1]-this.parentPadding[3],n=e[0],o=t.height-this.parentPadding[0]-this.parentPadding[2],r=e[1],a=i/n,s=o/r;return Math.min(a,s,1)},centerImage:function(e,t,i){var n=this.parentcontainer.getBoundingClientRect(),o=n.width,r=e[0]*t,a=n.height,s=e[1]*t,c=this.parentPadding,l=i[0],h=i[1];return r<=o-c[1]-c[3]?l=(o-r)/2:i[0]>=c[3]?l=c[3]:r+i[0]<o-c[1]&&(l=-r+o-c[1]),s<a-c[0]-c[2]?h=(a-s)/2:i[1]>c[0]?h=c[0]:s+i[1]<a-c[2]&&(h=-s+a-c[2]),[l,h]},restoreZoom:function(){this.zoom=this.defaultZoom},doubleZoom:function(){this.zoom*=2},originalResolution:function(){this.zoom=1},clickImage:function(e){if("IMG"===e.target.tagName&&2!==e.button){var t=(e.clientX-this.coordinates[0])/this.zoom,i=(e.clientY-this.coordinates[1])/this.zoom;this.zoomed?this.restoreZoom():this.defaultZoom-1>.2?this.originalResolution():this.doubleZoom(),this.coordinates=[e.clientX-t*this.zoom,e.clientY-i*this.zoom]}},isDragging:function(e){return!!(c.x&&Math.abs(c.x-e.clientX)>2&&Math.abs(c.y-e.clientY)>2)},mouseDown:function(e){2!==e.button&&(e.preventDefault(),e.stopPropagation(),this.dragging=!1,c={x:e.clientX-this.coordinates[0],y:e.clientY-this.coordinates[1]})},mouseMove:function(e){(this.dragging||this.isDragging(e))&&(this.dragging=!0,e.preventDefault(),this.coordinates=[e.clientX-c.x,e.clientY-c.y])},mouseUp:function(e){this.dragging?(this.dragging=!1,this.coordinates=this.centerImage(this.size,this.zoom,this.coordinates)):void 0!==!e.detail&&2!==e.detail||this.clickImage(e),c={}},mouseLeave:function(){this.dragging&&(c={},this.dragging=!1,this.coordinates=this.centerImage(this.size,this.zoom,this.coordinates))},mouseWheelZoom:function(e){if(e.preventDefault(),!this.dragging||!this.isLoading){var t=(e.clientX-this.coordinates[0])/this.zoom,i=(e.clientY-this.coordinates[1])/this.zoom,n=e.wheelDelta||-e.deltaY;this.zoom=n>0?1.1*this.zoom>this.MAX_ZOOM?this.MAX_ZOOM:1.1*this.zoom:this.zoom/1.1<this.MIN_ZOOM?this.MIN_ZOOM:this.zoom/1.1,this.coordinates=[e.clientX-t*this.zoom,e.clientY-i*this.zoom]}},getPinchZoomSize(e,t){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)},touchStart:function(e){var t=e.touches||e.changedTouches;this.pinch=!1,this.dragging=!1,2===t.length?(this.pinch=!0,this.dragging=!1,s=this.getPinchZoomSize(e.touches[0],e.touches[1]),c={x:(t[0].clientX+t[1].clientX)/2,y:(t[0].clientY+t[1].clientY)/2}):(c.x=t[0].clientX-this.coordinates[0],c.y=t[0].clientY-this.coordinates[1])},touchMove:function(e){const t=e.touches||e.changedTouches;if(this.pinch){var i=this.getPinchZoomSize(e.touches[0],e.touches[1]),n=1,o=(c.x-this.coordinates[0])/this.zoom,r=(c.y-this.coordinates[1])/this.zoom,a=this.zoom*(1+(i/s-1)*n);this.zoom=a>this.MAX_ZOOM?this.MAX_ZOOM:a<this.MIN_ZOOM?this.MIN_ZOOM:a,this.coordinates=[c.x-o*this.zoom,c.y-r*this.zoom],s=i}else{if(!this.dragging&&!this.isDragging(t[0]))return;this.dragging=!0,e.preventDefault(),this.coordinates=[t[0].clientX-c.x,t[0].clientY-c.y]}},touchEnd:function(e){this.pinch&&2!==e.changedTouches.length&&(this.pinch=!1,this.pinchCenter=null),this.dragging&&(this.dragging=!1,this.coordinates=this.centerImage(this.size,this.zoom,this.coordinates)),c={}},keyDown(e){if(console.log(e),!this.dragging){var t=0,i=0,n=0;switch(e.keyCode){case 38:case 87:i++;break;case 40:case 83:i--;break;case 37:case 65:t++;break;case 39:case 68:t--;break;case 187:case 107:case 69:n++;break;case 189:case 109:case 81:n--;break}if(t||i){e.preventDefault(),e.stopPropagation();var o=this.parentcontainer.getBoundingClientRect(),r=Math.min(o.width,o.height),a=.05;this.coordinates=this.centerImage(this.size,this.zoom,[this.coordinates[0]+r*a*t,this.coordinates[1]+r*a*i])}if(n){var s=this.zoom+.05*n,c=this.parentcontainer.getBoundingClientRect(),l=(c.width/2-this.coordinates[0])/this.zoom,h=(c.height/2-this.coordinates[1])/this.zoom;s>this.MAX_ZOOM?s=this.MAX_ZOOM:s<this.MIN_ZOOM&&(s=this.MIN_ZOOM),this.zoom=s,this.coordinates=[c.width/2-l*this.zoom,c.height/2-h*this.zoom]}}},onScreenResize:function(){let e=this.setStartingZoom(this.size);this.zoom===this.defaultZoom?e==this.zoom?this.coordinates=this.centerImage(this.size,this.zoom,this.coordinates):this.zoom=e:this.coordinates=this.centerImage(this.size,this.zoom,this.coordinates),this.defaultZoom=e}}},h=i(3744);const g=(0,h.Z)(l,[["render",a],["__scopeId","data-v-6161261f"]]);var d=g}}]);