"use strict";(self["webpackChunkv3"]=self["webpackChunkv3"]||[]).push([[8017],{6120:function(e,t,i){i.d(t,{Z:function(){return u}});var r=i(6252),a=i(9963),s=i(3577);const n=(0,r._)("img",{style:{"max-height":"100px",height:"100%"},src:"https://cdn.glitch.com/6c14ca82-3bcb-4fd6-afa7-815b95e04a14%2Fras-run-slow.gif?v=1632241290215"},null,-1),o={style:{"font-size":"32px",color:"white","text-shadow":"0px 0px 3px grey, 0 0 10px black, 0 0 10px black","line-height":"30px","padding-top":"12px","margin-left":"20px"}};function l(e,t,i,l,c,d){return(0,r.wg)(),(0,r.iD)("div",{class:"noselect loading-part animatefade absolute",onContextmenu:t[0]||(t[0]=(0,a.iM)((()=>{}),["prevent"]))},[n,(0,r._)("div",o,(0,s.zw)(i.text),1)],32)}var c={props:{text:{type:String,default:""}}},d=i(3744);const p=(0,d.Z)(c,[["render",l]]);var u=p},7356:function(e,t,i){i.r(t),i.d(t,{default:function(){return W}});var r=i(6252),a=i(9963);const s=(0,r._)("h2",null,"Artifacts",-1),n=["src"],o=["src"];function l(e,t,i,l,c,d){const p=(0,r.up)("PagePath"),u=(0,r.up)("PageTitle"),m=(0,r.up)("FilterBlock"),f=(0,r.up)("ArtifactFullImage"),h=(0,r.up)("MouseParallax"),g=(0,r.up)("router-link"),y=(0,r.up)("FetchComponent"),w=(0,r.up)("ListArtifactImages");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p),s])),_:1}),(0,r.Wm)(m,{modelValue:c.filters,"onUpdate:modelValue":t[0]||(t[0]=e=>c.filters=e),"one-stars":!0,"two-stars":!0,"common-role":!0,class:"pad-5"},null,8,["modelValue"]),(0,r.Wm)(w,{class:"flex flex-wrap justify-center",style:{"min-height":"100vh"}},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{promise:c.fetching,onLoad:d.fetchComplete,onFinally:d.afterFetch},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(d.sortedList,(e=>(0,r.wy)(((0,r.wg)(),(0,r.j4)(g,{key:e,to:"/artifacts/"+e._id,class:"route-restore pointer",style:{"vertical-align":"top"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{class:"pad-5","border-radius":"0.08em"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{artifact:e},null,8,["artifact"]),e.$isNew?((0,r.wg)(),(0,r.iD)("img",{key:0,style:{position:"absolute",top:"0",left:"0",width:"25%"},src:d.newIcon},null,8,n)):e.$isUpdated?((0,r.wg)(),(0,r.iD)("img",{key:1,style:{position:"absolute",top:"0",left:"0",width:"25%"},src:d.updatedIcon},null,8,o)):(0,r.kq)("",!0)])),_:2},1024)])),_:2},1032,["to"])),[[a.F8,d.filtredList[e._id]]]))),128))])),_:1},8,["promise","onLoad","onFinally"])])),_:1})])}var c=i(8753),d=i(171),p=i(222),u=i(3409),m=i(9367),f=i(5123),h=i(3355);const g=(0,r._)("div",null,"Error",-1);function y(e,t,i,a,s,n){const o=(0,r.up)("LoadingComponent");return s.isFetching?(0,r.WI)(e.$slots,"fetching",{key:0},(()=>[(0,r.Wm)(o,{text:i.text},null,8,["text"])])):s.isError?(0,r.WI)(e.$slots,"error",{key:1},(()=>[g])):(0,r.WI)(e.$slots,"default",{key:2})}var w=i(6120),x={emits:["load","error","finally"],components:{LoadingComponent:w.Z},props:{promise:{type:Array,default:()=>[]},text:{type:String,default:"CONNECTING"}},data(){return{isFetching:!1,isError:!1,isDone:!1}},watch:{promise:{immediate:!0,handler(){this.doPromise()}}},methods:{doPromise(){this.isFetching=!0;let e=Array.isArray(this.promise)?this.promise:[this.promise];Promise.all(e).then((e=>{this.$emit("load",...e)})).catch((e=>{this.isError=!0,this.$emit("error",e)})).then((()=>{this.isFetching=!1,this.$emit("finally")}))}}},v=i(3744);const k=(0,v.Z)(x,[["render",y]]);var C=k,$=null,b=0,_={name:"ArtifactsIndex",components:{PagePath:d.Z,PageTitle:p.Z,FilterBlock:u.Z,ListArtifactImages:m.Z,MouseParallax:f.Z,ArtifactFullImage:h.Z,FetchComponent:C},inject:["mainContainerWrapper"],data(){return{fetching:null,filters:{name:"",rarity:[],role:[],tags:[],debuff:[],buff:[],common:[]},list:[]}},created(){this.fetching=this.$gameData.artifact.list(),$&&(this.filters=JSON.parse($))},beforeUnmount(){$=JSON.stringify(this.filters),this.mainContainerWrapper&&(b=this.mainContainerWrapper().scrollTop)},computed:{newIcon(){return c.cK+"/img/gacha_new.png"},updatedIcon(){return c.cK+"/ui/cm_update_icon.png"},sortedList(){const e=e=>["warrior","knight","assassin","ranger","mage","manauser"].indexOf(e),t=Array.isArray(this.list)?this.list.slice():Object.values(this.list);return t.sort(((e,t)=>e.name<t.name?-1:0)).sort(((t,i)=>t.$isNew!==i.$isNew?t.$isNew?-1:1:t.$isUpdated!==i.$isUpdated?t.$isUpdated?-1:1:t.rarity!==i.rarity?t.rarity>i.rarity?-1:1:e(t.role)<e(i.role)?-1:1))},filtredList(){var e={},t=/[^a-z0-9]/g,i=/[^a-z0-9,]/g,r=this.filters,a=r.name.toLowerCase().replace(t,"");for(var s in this.list){var n=this.list[s];e[n._id]=(-1!==n.name.toLowerCase().replace(t,"").indexOf(a)||n.hero&&-1!==n.hero.toLowerCase().replace(t,"").indexOf(a)||n.nicknames&&-1!==n.nicknames.join(",").toLowerCase().replace(i,"").indexOf(a))&&["role","rarity"].every((e=>!r[e].length||r[e].includes(n[e])))&&(!r.tags||r.tags.every((e=>n.tags.includes(e))))&&["common","buff","debuff"].every((e=>!r[e].length||r[e].every((t=>n[e]&&n[e].includes(t)))))}return e}},methods:{fetchComplete(e){const t=Date.now()-12096e5;this.list=e.map((e=>(t<e.created_dt?e.$isNew=!0:t<e.updated_dt&&(e.$isUpdated=!0),e)))},afterFetch(){this.$nextTick((()=>{this.mainContainerWrapper().scrollTo(0,b)}))}}};const F=(0,v.Z)(_,[["render",l]]);var W=F}}]);