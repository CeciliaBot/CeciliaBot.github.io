<html>
    <head>
        <meta name="viewport" content="initial-scale=0.8, user-scalable=no">
        <title>CeciliaBot Timeline</title>
        <meta name="keywords" content="epic seven banner, epic 7 history, e7 timeline, epic 7 timeline, epic 7, e7, epic seven" />
        <meta name="description" content="Timeline of Epic Seven's Rate up and Mystic Banners" />
        <!--Favicon-->
        <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
        <link rel="manifest" href="/favicons/site.webmanifest">
        <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
        <link rel="shortcut icon" href="/favicons/favicon.ico">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="msapplication-config" content="/favicons/browserconfig.xml">
        <meta name="theme-color" content="#252B35">
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="CeciliaBot">
        <meta property="og:image" content="/favicons/android-chrome-256x256.png">
        <meta property="og:image:width" content="256">
        <meta property="og:image:height" content="256">
      
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js"></script>
        <link rel="stylesheet" href="style.css">
    </head>
    <style>
      [v-cloak] {
        display: none;
      }
    </style>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-161715700-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-161715700-1');
    </script>
    <body>
        <div id="app">
            <div id="icon_bar" v-cloak>
              <div class="icon_bar_small" @click="filter.showEvents=!filter.showEvents">{{!filter.showEvents?'Show':'Hide'}} Events</div>
              <div class="icon_bar_small" @click="settings.hideUserPull=!settings.hideUserPull" style="display: none;">{{settings.hideUserPull?'Show':'Hide'}} my Pulls</div>
              <div class="icon_bar_small" @click="daySize=20">x20</div>
              <div class="icon_bar_small" @click="daySize=30">x30</div>
              <div class="icon_bar_small" @click="daySize=40">x40</div>
              <div class="icon_bar_small" @click="daySize=50">Default</div>
              <a href="#2021-03-18" style="display: none;">go to</a>
            </div>
            <section class="noselect" v-cloak>
                <ul class="timeline">
                    <li v-for="(banners,date,index) in renderList" :style="'width: '+ daySize*dateDiff( Object.keys(renderList)[index+1],date )+'px'" :id="date">
                        <span class="date">{{displayDate(date)}}</span>
                        <span v-if="filter.showEvents===true && banners.event" class="tevent"><b><a :href="'#'+(banners.event.ref||date)">{{banners.event.name}}</a></b></span>
                        <div v-for="banner in banners.m" v-if="banner && banner.end===date" @click="openThisBanner(banner)" class="banner mystic" :style="'width:'+bannerLength(banner.start,banner.end)+'px;'">
                            <div class="icon_container">
                              <img v-for="img in banner.c" :src="'https://cdn.glitch.com/6c14ca82-3bcb-4fd6-afa7-815b95e04a14%2F'+img+'_s.png'" />
                            </div>
                              <div v-if="!settings.hideUserPull" class="upulls">
                                <span>
                                  <img src="https://d3kxs6kpbh59hp.cloudfront.net/community/COMMUNITY/5866e7302db84a0d9035be7fe7b268ba/9d6430994aae4105be07b27955e0da7a_1604292793.png" style="height: 40px;vertical-align: middle;"> x {{(userBannerData(banner).pulls||0) * daySize}}
                                </span>
                                <span>
                                  <img src="https://emoji.gg/assets/emoji/6757_Sadge.png" style="height: 30px;vertical-align: middle;"> x {{userBannerData(banner).pity||0}}
                                </span>
                              </div>
                        </div>
                        <div class="wrapper">
                          <div v-for="banner in banners.n" v-if="banner && banner.end===date" @click="openThisBanner(banner)" style="position: static !important;" class="banner" :class="banner.type" :style="'width:'+bannerLength(banner.start,banner.end)+'px;'">
                              <div class="icon_container">
                                <img v-for="img in banner.c" :src="'https://cdn.glitch.com/6c14ca82-3bcb-4fd6-afa7-815b95e04a14%2F'+img+'_s.png'" />
                              </div>
                              <div v-if="!settings.hideUserPull" class="upulls">
                                <span>
                                  <img src="https://epic7x.com/wp-content/uploads/2019/01/Covenant-Bookmark.png" style="height: 40px;vertical-align: middle;"> x {{(userBannerData(banner).pulls||0) * 5}}
                                </span>
                                <span>
                                  <img src="https://emoji.gg/assets/emoji/6757_Sadge.png" style="height: 30px;vertical-align: middle;"> x {{userBannerData(banner).pity||0}}
                                </span>
                              </div>
                          </div>
                          <div v-else class="banner dummy"></div>
                        </div>
                        <!--<div v-for="banner in banners" v-if="banner && banner.end===date" class="banner" v-bind:class="banner.type" :style="'width:'+( 50*7*dateIndexDiff(index,banner.start)+(10*(dateIndexDiff(index,banner.start)-1)) )+'px;'">
                            <div class="icon_container">
                              <img v-for="img in banner.c" :src="'https://cdn.glitch.com/6c14ca82-3bcb-4fd6-afa7-815b95e04a14%2F'+img+'_s.png'" />
                            </div>
                        </div>
                        <div v-else class="banner dummy"></div>-->
                    </li>
                </ul>
            </section>
          
            <button v-if="settings.dev==true" @click="devMenu=['newBanner']" v-cloak>
              New Banner  
            </button>
          
            <div class="modal animatezoom" v-if="bannerOpen!=false" v-cloak>
              <div class="modal-content modal-three-parts">
                <div>
                  <span class="modal-title">{{bannerOpen.title}} ({{bannerOpen.subtitle}})</span>
                </div>
                <div>
                  <div>
                      Number of pulls: <input type="text" ref="pulls" :value="userBannerData(bannerOpen).pulls||0"><br><br>
                      Pity hit #: <input type="text" ref="pity" :value="userBannerData(bannerOpen).pity||0"><br><br>
                  </div>
                  <div v-for="c in bannerOpen.c">
                    <img class="game-item" :src="'https://cdn.glitch.com/6c14ca82-3bcb-4fd6-afa7-815b95e04a14%2F'+c+'_s.png'">
                    <input ref="cinput" :value="userBannerData(bannerOpen)[c]||0">
                  </div>
                </div>
                <div>
                  <span class="modal-text">{{bannerId(bannerOpen)}}</span>
                  <button @click="saveBannerEdit($event,bannerOpen)" class="modal-button">Save</button>
                  <button @click="closeBanner($event,bannerOpen)" class="modal-button">Close</button>
                </div>
              </div>
            </div>
          
            <div class="modal animatezoom" v-if="devMenu!=false" v-cloak>
              <div class="modal-content modal-three-parts" id="devModal">
                <template v-if="devMenu[0]==='editBanner'||devMenu[0]==='newBanner'">
                  <label for="type">type:</label>
                  <input type="text" id="type" name="type" :value="(devMenu[1]||{}).type"><br><br>
                  <label for="start">start:</label>
                  <input type="text" id="start" name="type" :value="(devMenu[1]||{}).start || ''"><br><br>
                  <label for="end">end:</label>
                  <input type="text" id="end" name="type" :value="(devMenu[1]||{}).end || ''"><br><br>
                  <label for="title">title:</label>
                  <input type="text" id="title" name="type" :value="(devMenu[1]||{}).title || ''"><br><br>
                  <label for="subtitle">subtitle:</label>
                  <input type="text" id="subtitle" name="type" :value="(devMenu[1]||{}).subtitle || ''"><br><br>
                  <label for="c">characters:</label>
                  <input type="text" id="c" name="type" :value="(devMenu[1]||{}).c || ''"><br><br>
                  <label for="a">artifacts:</label>
                  <input type="text" id="a" name="type" :value="(devMenu[1]||{}).a || ''"><br><br>
                  <button class="modal-button" @click="devSaveBanner($event)">Save Banner</button>
                  <button class="modal-button" @click="devMenu=false; closeBanner($event,devMenu[1])">Cancel</button>
                </template>
              </div>
            </div>
          
            <div v-if="userLang==='it-ITaaa'" style="position:fixed; font-size: 200px; height:100%; top: 0; left: 0;pointer-events: none;opacity: 0.8;display: flex; flex-direction: column; justify-content: center; text-align:center; color: var(--font-color)">
            </div>
        </div>
    </body>
    <script src="js.js"></script>
</html>
